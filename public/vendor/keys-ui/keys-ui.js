(function($,H){typeof exports=="object"&&typeof module<"u"?H(exports):typeof define=="function"&&define.amd?define(["exports"],H):($=typeof globalThis<"u"?globalThis:$||self,H($.KeysUI={}))})(this,function($){"use strict";var iD=Object.defineProperty;var sD=($,H,b)=>H in $?iD($,H,{enumerable:!0,configurable:!0,writable:!0,value:b}):$[H]=b;var q=($,H,b)=>sD($,typeof H!="symbol"?H+"":H,b);var Pa;const Ur=class Ur{constructor(){this.initialized=!1,this.stateManager=new Map}static getInstance(){const e=this.name;return Ur.instances.has(e)||Ur.instances.set(e,new this),Ur.instances.get(e)}init(){var e,t,n;this.initialized||((e=this.onBeforeInit)==null||e.call(this),this.bindEventListeners(),this.initializeElements(),(t=this.setupDynamicObserver)==null||t.call(this),(n=this.onAfterInit)==null||n.call(this),this.initialized=!0)}destroy(){var e;(e=this.onDestroy)==null||e.call(this),this.stateManager.clear(),this.initialized=!1}getState(e){return this.stateManager.get(e)}setState(e,t){this.stateManager.set(e,t)}removeState(e){return this.stateManager.delete(e)}hasState(e){return this.stateManager.has(e)}clearAllStates(){this.stateManager.clear()}getAllStates(){return new Map(this.stateManager)}createDynamicObserver(e){const t=new MutationObserver(n=>{n.forEach(i=>{i.addedNodes.length>0&&e(i.addedNodes)})});return t.observe(document.body,{childList:!0,subtree:!0}),t}createResizeHandler(e,t=100){let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(e,t)}}isInitialized(){return this.initialized}getStateCount(){return this.stateManager.size}};Ur.instances=new Map;let H=Ur;class b{static findClosest(e,t){return!e||!(e instanceof Element)?null:e.closest(t)||null}static findClosestWithData(e,t){return(e==null?void 0:e.closest(`[data-${t}]`))||null}static querySelector(e,t){return(t||document).querySelector(e)||null}static querySelectorAll(e,t){const n=t||document;return Array.from(n.querySelectorAll(e))}static findByDataAttribute(e,t,n){const i=t?`[data-${e}="${t}"]`:`[data-${e}]`;return this.querySelectorAll(i,n)}static findFirstByDataAttribute(e,t,n){const i=t?`[data-${e}="${t}"]`:`[data-${e}]`;return this.querySelector(i,n)}static hasDataAttribute(e,t,n){if(!e)return!1;const i=e.dataset[t];return n!==void 0?i===n:i!==void 0}static getDataAttribute(e,t){return e==null?void 0:e.dataset[t]}static setDataAttribute(e,t,n){e&&(e.dataset[t]=n)}static removeDataAttribute(e,t){e&&delete e.dataset[t]}static isDisabled(e){return e?e.hasAttribute("disabled")||e.dataset.disabled==="true"||e.getAttribute("aria-disabled")==="true":!0}static isHidden(e){return e?e.hidden||e.style.display==="none"||e.getAttribute("aria-hidden")==="true"||!e.offsetParent:!0}static findFormElement(e){return(e==null?void 0:e.querySelector("input, textarea"))||null}static findFormElementForAction(e){let t=this.findClosest(e,'[data-input-actions="true"]');if(t&&(t.tagName.toLowerCase()==="input"||t.tagName.toLowerCase()==="textarea"))return t;if(t=this.findClosest(e,'*:has(input[data-input-actions="true"]), *:has(textarea[data-input-actions="true"])'),t){const i=this.findFormElement(t);if(i)return i}let n=e.parentElement;for(;n;){const i=this.findFormElement(n);if(i)return i;n=n.parentElement}return null}static getElementById(e){return document.getElementById(e)||null}static matches(e,t){var n;return((n=e==null?void 0:e.matches)==null?void 0:n.call(e,t))??!1}static findChildren(e,t){return e?Array.from(e.children).filter(n=>this.matches(n,t)):[]}static getNextSibling(e,t){let n=e==null?void 0:e.nextElementSibling;for(;n;){if(!t||this.matches(n,t))return n;n=n.nextElementSibling}return null}static getPreviousSibling(e,t){let n=e==null?void 0:e.previousElementSibling;for(;n;){if(!t||this.matches(n,t))return n;n=n.previousElementSibling}return null}static addClass(e,t){e==null||e.classList.add(t)}static removeClass(e,t){e==null||e.classList.remove(t)}static toggleClass(e,t,n){return(e==null?void 0:e.classList.toggle(t,n))??!1}static hasClass(e,t){return(e==null?void 0:e.classList.contains(t))??!1}static removeClasses(e,t){e&&e.classList.remove(...t)}static addClasses(e,t){e&&e.classList.add(...t)}static toggleAttribute(e,t,n){e&&(n!==void 0?e.setAttribute(t,n):e.removeAttribute(t))}static getComputedStyle(e,t){return e?window.getComputedStyle(e).getPropertyValue(t):""}static isInViewport(e){if(!e)return!1;const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}static getElementOffset(e){if(!e)return{top:0,left:0};const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}static focus(e,t){e&&(t?setTimeout(()=>e.focus(),t):e.focus())}static scrollIntoView(e,t){e&&e.scrollIntoView(t||{block:"nearest"})}static removeElement(e){e&&e.parentNode&&e.parentNode.removeChild(e)}static createElement(e,t){const n=document.createElement(e);return t!=null&&t.classes&&n.classList.add(...t.classes),t!=null&&t.attributes&&Object.entries(t.attributes).forEach(([i,s])=>{n.setAttribute(i,s)}),t!=null&&t.textContent&&(n.textContent=t.textContent),t!=null&&t.innerHTML&&(n.innerHTML=t.innerHTML),n}}class T{static dispatchCustomEvent(e,t,n,i){const s=new CustomEvent(t,{detail:n,bubbles:(i==null?void 0:i.bubbles)??!0,cancelable:(i==null?void 0:i.cancelable)??!0});return e.dispatchEvent(s)}static addEventListener(e,t,n,i){return e.addEventListener(t,n,i),()=>{e.removeEventListener(t,n,i)}}static handleDelegatedEvent(e,t,n,i){const s=i||document,a=o=>{const l=o.target;let c=null;l instanceof Element&&(c=l.closest(t)),c&&n(c,o)};return this.addEventListener(s,e,a)}static handleDelegatedClick(e,t,n){const i=n||document,s=a=>{const o=a,l=o.target;let c=null;l instanceof Element&&(c=l.closest(e)),c&&t(c,o)};return this.addEventListener(i,"click",s)}static handleDelegatedKeydown(e,t,n){const i=n||document,s=a=>{const o=a,l=o.target;let c=null;l instanceof Element&&(c=l.closest(e)),c&&t(c,o)};return this.addEventListener(i,"keydown",s)}static handleKeyPress(e,t,n){return i=>{e.includes(i.key)&&(n!=null&&n.preventDefault&&i.preventDefault(),n!=null&&n.stopPropagation&&i.stopPropagation(),t(i.key,i))}}static handleDelegatedInput(e,t,n){const i=n||document,s=a=>{const o=a,l=o.target;let c=null;l instanceof Element&&(c=l.closest(e)),c&&t(c,o)};return this.addEventListener(i,"input",s)}static handleDelegatedChange(e,t,n){const i=n||document,s=a=>{const o=a.target;let l=null;o instanceof Element&&(l=o.closest(e)),l&&t(l,a)};return this.addEventListener(i,"change",s)}static handleDelegatedFocus(e,t,n){const i=n||document,s=a=>{const o=a,l=o.target;let c=null;l instanceof Element&&(c=l.closest(e)),c&&t(c,o)};return this.addEventListener(i,"focusin",s)}static debounce(e,t){let n=null;return(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}static throttle(e,t){let n=!1;return(...i)=>{n||(e(...i),n=!0,setTimeout(()=>{n=!1},t))}}static handleResize(e,t=100){const n=this.debounce(e,t);return this.addEventListener(window,"resize",n)}static handleClickOutside(e,t){const n=i=>{const s=i,a=s.target;e.contains(a)||t(s)};return this.addEventListener(document,"click",n)}static handleEscape(e){const t=this.handleKeyPress(["Escape"],(n,i)=>e(i));return this.addEventListener(document,"keydown",n=>t(n))}static preventAndStop(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}static shouldHandleEvent(e){return!e.hasAttribute("disabled")&&e.dataset.disabled!=="true"&&e.getAttribute("aria-disabled")!=="true"&&e.offsetParent!==null}static handleFormSubmission(e,t,n){const i=s=>{const a=s;if(n&&!n(e)){s.preventDefault();return}const o=new FormData(e);t(o,a)};return this.addEventListener(e,"submit",i)}static createCleanupManager(){const e=[];return{add:t=>{e.push(t)},cleanup:()=>{e.forEach(t=>t()),e.length=0}}}static createNavigationHandler(e){return t=>{var s,a,o,l,c,d,f,h,g,m,y;const{key:n}=t,i=((s=e.preventDefault)==null?void 0:s.includes(n))??!0;switch(n){case"ArrowUp":i&&t.preventDefault(),(a=e.onArrowUp)==null||a.call(e);break;case"ArrowDown":i&&t.preventDefault(),(o=e.onArrowDown)==null||o.call(e);break;case"ArrowLeft":i&&t.preventDefault(),(l=e.onArrowLeft)==null||l.call(e);break;case"ArrowRight":i&&t.preventDefault(),(c=e.onArrowRight)==null||c.call(e);break;case"Enter":i&&t.preventDefault(),(d=e.onEnter)==null||d.call(e);break;case" ":i&&t.preventDefault(),(f=e.onSpace)==null||f.call(e);break;case"Escape":i&&t.preventDefault(),(h=e.onEscape)==null||h.call(e);break;case"Home":i&&t.preventDefault(),(g=e.onHome)==null||g.call(e);break;case"End":i&&t.preventDefault(),(m=e.onEnd)==null||m.call(e);break;case"Tab":(y=e.onTab)==null||y.call(e);break}}}}function Ou(r,e=""){const t=window.KeysUITranslations;if(!t)return e;const n=r.split(".");let i=t;for(const s of n)if(i=i==null?void 0:i[s],i===void 0)return e;return i||e}class us extends H{initializeElements(){}bindEventListeners(){T.handleDelegatedClick("[data-action] button",(e,t)=>{t.preventDefault(),this.handleActionClick(e)}),T.handleDelegatedKeydown("[data-action] button",(e,t)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.handleActionClick(e))})}async handleActionClick(e){const t=b.findClosest(e,"[data-action]"),n=t==null?void 0:t.dataset.action;if(!n)return;const i=b.findFormElementForAction(e);if(!i)return;const s=n==="password_toggle"?"toggle-password":n;switch(s){case"clear":this.clearValue(i);break;case"copy":await this.copyToClipboard(i,t);break;case"toggle-password":await this.togglePasswordVisibility(i,e,t);break;case"external":this.openExternalUrl(t.dataset.url);break;default:this.handleCustomAction(i,s);break}this.dispatchActionEvent(i,s)}async swapButtonIcon(e,t){e.setAttribute("data-current-icon",t),this.updateButtonIconState(e,t)}updateButtonIconState(e,t){const n=b.querySelector(".button-icon-default",e),i=b.querySelector(".button-icon-toggle",e),s=b.querySelector(".button-icon-success",e),a=e.dataset.iconDefault,o=e.dataset.iconToggle,l=e.dataset.iconSuccess;n&&(n.classList.remove("opacity-100"),n.classList.add("opacity-0")),i&&(i.classList.remove("opacity-100","scale-110","scale-90"),i.classList.add("opacity-0")),s&&(s.classList.remove("opacity-100","scale-110","scale-90"),s.classList.add("opacity-0")),t===a&&n?(n.classList.remove("opacity-0"),n.classList.add("opacity-100")):t===o&&i?(i.classList.remove("opacity-0"),i.classList.add("opacity-100")):t===l&&s&&(s.classList.remove("opacity-0"),s.classList.add("opacity-100","scale-110"))}animateIconSuccess(e){e.classList.add("scale-110"),setTimeout(()=>{e.classList.remove("scale-110"),e.classList.add("scale-90"),setTimeout(()=>{e.classList.remove("scale-90")},150)},150)}clearValue(e){e.value="",e.focus(),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}async copyToClipboard(e,t){const n=b.querySelector("button",t);try{await navigator.clipboard.writeText(e.value),this.showFeedback(e,Ou("feedback.copied_clipboard","Copied to clipboard"),"success"),n&&await this.showCopySuccess(n,t)}catch{this.fallbackCopyToClipboard(e,t)}}fallbackCopyToClipboard(e,t){const n=b.querySelector("button",t);e.select(),e instanceof HTMLInputElement&&e.setSelectionRange(0,99999);try{document.execCommand("copy"),this.showFeedback(e,Ou("feedback.copied_clipboard","Copied to clipboard"),"success"),n&&this.showCopySuccess(n,t)}catch{this.showFeedback(e,"Copy failed","error")}}async showCopySuccess(e,t){const n=e.dataset.iconSuccess,i=e.dataset.labelSuccess,s=e.dataset.iconDefault,a=b.querySelector(".sr-only",e);if(n&&s)if(await this.swapButtonIcon(e,n),i&&a){const o=a.textContent;a.textContent=i,setTimeout(async()=>{await this.swapButtonIcon(e,s),o&&a&&(a.textContent=o)},2e3)}else setTimeout(async()=>{await this.swapButtonIcon(e,s)},2e3)}async togglePasswordVisibility(e,t,n){var f;const i=e.type==="password",s=i?"text":"password",a=t.dataset.iconDefault,o=t.dataset.iconToggle,l=(f=b.querySelector(".sr-only",t))==null?void 0:f.textContent,c=t.dataset.labelToggle;e.type=s;const d=b.querySelector(".sr-only",t);i?(o&&await this.swapButtonIcon(t,o),c&&d&&(d.textContent=c),t.setAttribute("aria-label",c||"Hide password")):(a&&await this.swapButtonIcon(t,a),l&&d&&(d.textContent=l),t.setAttribute("aria-label",l||"Show password"))}openExternalUrl(e){if(e)try{window.open(e,"_blank","noopener,noreferrer")}catch(t){console.error("Failed to open external URL:",t)}}handleCustomAction(e,t){}dispatchActionEvent(e,t){T.dispatchCustomEvent(e,"form-action",{element:e,action:t,value:e.value})}showFeedback(e,t,n="success"){const i=document.createElement("div");i.className=`absolute top-full left-0 mt-1 px-2 py-1 text-xs rounded shadow-lg z-10 pointer-events-none ${n==="success"?"bg-success text-foreground-success":"bg-danger text-foreground-danger"}`,i.textContent=t;const s=b.findClosest(e,".relative");s&&(s.appendChild(i),setTimeout(()=>{i.parentNode&&i.parentNode.removeChild(i)},2e3))}addActionHandler(e,t){return T.addEventListener(document,"form-action",n=>{const i=n;i.detail.action===e&&t(i.detail.element)})}onDestroy(){}}us.getInstance();class ds extends H{initializeElements(){this.initializeAutoResize(),this.initializeCharacterCounts()}bindEventListeners(){T.handleDelegatedEvent("input",'textarea[data-auto-resize="true"]',e=>{this.handleAutoResize(e)}),T.handleDelegatedEvent("input",'textarea[data-show-character-count="true"]',e=>{this.updateCharacterCount(e)}),T.handleDelegatedEvent("paste",'textarea[data-show-character-count="true"]',e=>{setTimeout(()=>{this.updateCharacterCount(e)},0)}),T.handleDelegatedEvent("cut",'textarea[data-show-character-count="true"]',e=>{setTimeout(()=>{this.updateCharacterCount(e)},0)})}initializeAutoResize(){b.querySelectorAll('textarea[data-auto-resize="true"]').forEach(t=>{this.setupAutoResize(t)})}initializeCharacterCounts(){b.querySelectorAll('textarea[data-show-character-count="true"]').forEach(t=>{this.updateCharacterCount(t)})}setupAutoResize(e){const t=parseInt(e.getAttribute("rows")||"3"),n=this.getLineHeight(e),i=this.getVerticalPadding(e),s=t*n+i;e.style.minHeight=`${s}px`,e.style.resize="none",e.style.overflow="hidden",this.handleAutoResize(e)}handleAutoResize(e){e.style.height="auto";const t=e.scrollHeight,n=parseInt(e.style.minHeight||"0"),i=Math.max(t,n);e.style.height=`${i}px`,this.dispatchResizeEvent(e,i)}updateCharacterCount(e){const t=e.id||e.name;if(!t)return;const n=b.querySelector(`[data-character-count][data-target-id="${t}"]`);if(!n)return;const i=e.value.length,s=parseInt(n.dataset.maxLength||"0")||null,a=b.querySelector("[data-current-count]",n);a&&(a.textContent=i.toString()),this.applyCharacterCountFeedback(n,e,i,s),this.dispatchCharacterCountEvent(e,i,s)}applyCharacterCountFeedback(e,t,n,i){if(!i)return;e.classList.remove("text-muted","text-warning","text-danger"),t.classList.remove("border-warning","border-danger","focus:border-warning","focus:border-danger","focus:ring-warning","focus:ring-danger");const s=n/i*100;n>i?(e.classList.add("text-danger"),t.classList.add("border-danger","focus:border-danger","focus:ring-danger")):s>=90?(e.classList.add("text-warning"),t.classList.add("border-warning","focus:border-warning","focus:ring-warning")):e.classList.add("text-muted")}getLineHeight(e){const t=window.getComputedStyle(e),n=t.lineHeight;return n==="normal"?parseFloat(t.fontSize)*1.2:parseFloat(n)}getVerticalPadding(e){const t=window.getComputedStyle(e),n=parseFloat(t.paddingTop),i=parseFloat(t.paddingBottom),s=parseFloat(t.borderTopWidth),a=parseFloat(t.borderBottomWidth);return n+i+s+a}dispatchResizeEvent(e,t){T.dispatchCustomEvent(e,"textarea-resize",{element:e,height:t})}dispatchCharacterCountEvent(e,t,n){T.dispatchCustomEvent(e,"textarea-character-count",{element:e,currentLength:t,maxLength:n||void 0})}addResizeHandler(e){return T.addEventListener(document,"textarea-resize",t=>{const n=t;e(n.detail.element,n.detail.height)})}addCharacterCountHandler(e){return T.addEventListener(document,"textarea-character-count",t=>{e(t.detail)})}onDestroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0)}triggerAutoResize(e){e.dataset.autoResize==="true"&&this.handleAutoResize(e)}triggerCharacterCountUpdate(e){e.dataset.showCharacterCount==="true"&&this.updateCharacterCount(e)}}ds.getInstance();class hs extends H{initializeElements(){}bindEventListeners(){T.handleDelegatedClick("[data-dismiss-alert]",(e,t)=>{t.preventDefault(),this.handleDismissClick(e)}),T.handleDelegatedKeydown("[data-dismiss-alert]",(e,t)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.handleDismissClick(e))})}handleDismissClick(e){const t=this.findAlertForButton(e);t&&(this.dismissAlert(t),this.dispatchAlertEvent(t,"dismiss"))}findAlertForButton(e){return b.findClosest(e,'[data-dismissible="true"]')}dismissAlert(e){e.classList.add("alert-dismissing"),e.style.transition="opacity 300ms ease-out, transform 300ms ease-out",e.style.opacity="0",e.style.transform="translateX(100px)",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}showAlert(e){e.style.display="block",e.style.transition="opacity 300ms ease-out, transform 300ms ease-out",e.style.opacity="1",e.style.transform="translateX(0)",setTimeout(()=>{this.dispatchAlertEvent(e,"show")},300)}createAlert(e){const{variant:t="info",title:n,message:i,dismissible:s=!0,duration:a,container:o=document.body}=e,l=document.createElement("div");l.className=this.getAlertClasses(t),l.setAttribute("role","alert"),s&&l.setAttribute("data-dismissible","true");const c=this.buildAlertContent(t,n,i,s);return l.innerHTML=c,o.appendChild(l),l.style.opacity="0",l.style.transform="translateX(100%)",setTimeout(()=>{this.showAlert(l)},10),a&&a>0&&setTimeout(()=>{this.dismissAlert(l)},a),this.dispatchAlertEvent(l,"create"),l}getAlertClasses(e){const t="rounded-lg border p-4 space-y-3",n={info:"bg-info/5 border-info/20 text-info-foreground",success:"bg-success/5 border-success/20 text-success-foreground",warning:"bg-warning/5 border-warning/20 text-warning-foreground",danger:"bg-danger/5 border-danger/20 text-danger-foreground",neutral:"bg-neutral/5 border-neutral/20 text-neutral-foreground"};return`${t} ${n[e]||n.info}`}buildAlertContent(e,t,n,i){const s=this.getVariantIcon(e),a=this.getVariantIconColor(e);return`
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="w-5 h-5 ${a}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        ${this.getIconSvg(s)}
                    </svg>
                </div>
                <div class="ml-3 flex-1">
                    ${t?`<div class="text-base font-medium">${t}</div>`:""}
                    <div class="text-sm opacity-90 ${t?"mt-1":""}">${n||""}</div>
                </div>
                ${i?`
                    <div class="ml-auto pl-3">
                        <button type="button" data-dismiss-alert class="inline-flex rounded-md p-1 ${a} hover:bg-current hover:bg-opacity-20 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current" aria-label="Dismiss">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                `:""}
            </div>
        `}getVariantIcon(e){const t={info:"information-circle",success:"check-circle",warning:"exclamation-triangle",danger:"x-circle",neutral:"chat-bubble-left-ellipsis"};return t[e]||t.info}getVariantIconColor(e){const t={info:"text-info",success:"text-success",warning:"text-warning",danger:"text-danger",neutral:"text-neutral"};return t[e]||t.info}getIconSvg(e){const t={"information-circle":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>',"check-circle":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',"exclamation-triangle":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"></path>',"x-circle":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',"chat-bubble-left-ellipsis":'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>'};return t[e]||t["information-circle"]}dispatchAlertEvent(e,t){T.dispatchCustomEvent(e,"alert-action",{alert:e,action:t}),T.dispatchCustomEvent(document.body,"alert-action",{alert:e,action:t})}addActionHandler(e,t){return T.addEventListener(document,"alert-action",n=>{const i=n;i.detail.action===e&&t(i.detail.alert)})}dismissAllByVariant(e){b.querySelectorAll(`[data-dismissible="true"][class*="${e}"]`).forEach(n=>{this.dismissAlert(n)})}dismissAll(){b.querySelectorAll('[data-dismissible="true"]').forEach(t=>{this.dismissAlert(t)})}onDestroy(){}}hs.getInstance();class ho extends H{constructor(){super(...arguments),this.failedUrls=new Set,this.MAX_RETRIES=2,this.RETRY_DELAY=1e3}bindEventListeners(){}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;n.hasAttribute("data-keys-avatar")&&this.initializeAvatar(n),n.querySelectorAll('[data-keys-avatar="true"]').forEach(s=>{this.initializeAvatar(s)})}})})}initializeElements(){b.querySelectorAll('[data-keys-avatar="true"]').forEach(t=>{this.initializeAvatar(t)})}initializeAvatar(e){const t=e.querySelector("img"),n=e.querySelector('[data-avatar-fallback="true"]');if(!t)return;const i=e.getAttribute("data-fallback-type")||"icon",s={element:e,img:t,fallbackContainer:n,hasInitials:i==="initials",hasIcon:i==="icon",retryCount:0,maxRetries:this.MAX_RETRIES,isLoading:!1,hasFailed:!1};this.setState(e,s),this.setupImageErrorHandling(s),t.complete&&!t.naturalWidth&&this.handleImageError(s)}setupImageErrorHandling(e){e.img&&(T.addEventListener(e.img,"error",()=>{this.handleImageError(e)}),T.addEventListener(e.img,"load",()=>{this.handleImageLoad(e)}),e.img.loading==="lazy"&&this.setupLazyLoadingSupport(e))}handleImageError(e){if(!e.img||e.hasFailed)return;const t=e.img.src;if(this.failedUrls.add(t),e.retryCount<e.maxRetries&&!this.failedUrls.has(t)){this.retryImageLoad(e);return}e.hasFailed=!0,this.showFallback(e)}handleImageLoad(e){if(!e.img)return;const t=e.img.src;this.failedUrls.delete(t),e.hasFailed=!1,e.retryCount=0,e.isLoading=!1,this.showImage(e)}retryImageLoad(e){!e.img||e.retryCount>=e.maxRetries||(e.retryCount++,e.isLoading=!0,e.element.setAttribute("data-avatar-loading","true"),setTimeout(()=>{if(!e.img||e.hasFailed)return;const t=e.img.src;e.img.src="",requestAnimationFrame(()=>{e.img&&(e.img.src=t)})},this.RETRY_DELAY*e.retryCount))}showFallback(e){e.img&&(e.img.style.display="none",e.fallbackContainer&&(e.fallbackContainer.style.display="block"),e.element.setAttribute("data-avatar-fallback-active","true"),e.element.removeAttribute("data-avatar-image-active"),e.element.removeAttribute("data-avatar-loading"),this.updateAccessibility(e,"fallback"),this.dispatchAvatarEvent(e.element,"fallback",{hasInitials:e.hasInitials,hasIcon:e.hasIcon}))}showImage(e){e.img&&(e.img.style.display="block",e.fallbackContainer&&(e.fallbackContainer.style.display="none"),e.element.setAttribute("data-avatar-image-active","true"),e.element.removeAttribute("data-avatar-fallback-active"),e.element.removeAttribute("data-avatar-loading"),this.updateAccessibility(e,"image"),this.dispatchAvatarEvent(e.element,"imageLoad",{src:e.img.src}))}setupLazyLoadingSupport(e){if(!e.img||!("IntersectionObserver"in window))return;const t=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&t.unobserve(i.target)})},{rootMargin:"50px"});t.observe(e.img)}updateAccessibility(e,t){var s;const n=e.element.getAttribute("data-avatar-name"),i=(s=e.img)==null?void 0:s.getAttribute("alt");if(t==="fallback"){const a=e.hasInitials&&n?`Initials for ${n}`:"Avatar placeholder";e.element.setAttribute("aria-label",a)}else t==="image"&&i&&e.element.setAttribute("aria-label",i)}dispatchAvatarEvent(e,t,n={}){const i=new CustomEvent(`avatar:${t}`,{detail:{element:e,...n},bubbles:!0});e.dispatchEvent(i)}triggerFallback(e){const t=this.getState(e);t&&!t.hasFailed&&this.handleImageError(t)}retryAvatar(e){const t=this.getState(e);t&&t.hasFailed&&t.img&&(t.hasFailed=!1,t.retryCount=0,this.handleImageLoad(t))}hasAvatarFailed(e){const t=this.getState(e);return t?t.hasFailed:!1}clearFailedUrlsCache(){this.failedUrls.clear()}}class fs extends H{initializeElements(){}bindEventListeners(){T.handleDelegatedClick("[data-dismiss-target]",(e,t)=>{t.preventDefault(),this.handleDismissClick(e)}),T.handleDelegatedKeydown("[data-dismiss-target]",(e,t)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.handleDismissClick(e))})}handleDismissClick(e){const t=this.findBadgeForButton(e);t&&(this.dismissBadge(t),this.dispatchBadgeEvent(t,"dismiss"))}findBadgeForButton(e){const t=e.getAttribute("data-dismiss-target");if(!t)return null;const n=t.startsWith("#")?t.slice(1):t;return b.querySelector(`#${n}`)}dismissBadge(e){e.classList.add("badge-dismissing"),e.style.transition="all 250ms ease-out",e.style.transform="scale(0.8)",e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},250)}showBadge(e){e.style.display="inline-flex",e.style.opacity="0",e.style.transform="scale(0.8)",setTimeout(()=>{e.style.transition="all 250ms ease-out",e.style.opacity="1",e.style.transform="scale(1)",this.dispatchBadgeEvent(e,"show")},10)}createBadge(e){const{variant:t="simple",color:n="blue",size:i="sm",text:s,icon:a,dismissible:o=!1,container:l=document.body}=e,c=document.createElement(o?"button":"span"),d=o?`badge-${Date.now()}-${Math.random().toString(36).substr(2,9)}`:void 0;c.className=this.getBadgeClasses(t,n,i),d&&(c.id=d),o&&(c.setAttribute("type","button"),c.setAttribute("data-dismiss-target",`#${d}`),c.setAttribute("aria-label","Remove badge"));const f=this.buildBadgeContent(s,a,o);return c.innerHTML=f,l.appendChild(c),c.style.opacity="0",c.style.transform="scale(0.8)",setTimeout(()=>{this.showBadge(c)},10),this.dispatchBadgeEvent(c,"create"),c}getBadgeClasses(e,t,n){const i="inline-flex items-center font-medium",s={xs:"px-1.5 py-0.5 text-xs",sm:"px-2.5 py-0.5 text-xs",md:"px-3 py-1 text-sm"},a={simple:"rounded-full",chip:"rounded-sm",subtle:""},o=this.getColorClasses(e,t);return`${i} ${s[n]||s.sm} ${a[e]||a.simple} ${o}`}getColorClasses(e,t){if(e==="subtle"){const i={brand:"text-brand",success:"text-success",warning:"text-warning",danger:"text-danger",neutral:"text-neutral",blue:"text-blue-600",green:"text-green-600",red:"text-red-600",purple:"text-purple-600",yellow:"text-yellow-600"};return i[t]||i.blue}const n={brand:"bg-brand/10 text-brand",success:"bg-success/10 text-success",warning:"bg-warning/10 text-warning",danger:"bg-danger/10 text-danger",neutral:"bg-neutral/10 text-neutral",blue:"bg-blue-500/10 text-blue-600",green:"bg-green-500/10 text-green-600",red:"bg-red-500/10 text-red-600",purple:"bg-purple-500/10 text-purple-600",yellow:"bg-yellow-500/10 text-yellow-600"};return n[t]||n.blue}buildBadgeContent(e,t,n){let i="";return t&&(i+=`<svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <!-- Icon would be rendered here -->
            </svg>`),i+=e,n&&(i+=`<svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>`),i}dispatchBadgeEvent(e,t){T.dispatchCustomEvent(e,"badge-action",{badge:e,action:t}),T.dispatchCustomEvent(document.body,"badge-action",{badge:e,action:t})}addActionHandler(e,t){return T.addEventListener(document,"badge-action",n=>{const i=n;i.detail.action===e&&t(i.detail.badge)})}dismissAllByColor(e){b.querySelectorAll(`[data-dismissible="true"][class*="${e}"]`).forEach(n=>{this.dismissBadge(n)})}dismissAll(){b.querySelectorAll("[data-dismiss-target]").forEach(t=>{const n=this.findBadgeForButton(t);n&&this.dismissBadge(n)})}onDestroy(){}}const fo=fs.getInstance();class ps extends H{initializeElements(){b.querySelectorAll('[data-keys-badge-group="true"]').forEach(t=>{this.initializeBadgeGroup(t)})}bindEventListeners(){T.handleDelegatedClick('[data-badge-group-action="clear-all"]',(e,t)=>{t.preventDefault(),this.handleClearAllClick(e)}),T.handleDelegatedKeydown('[data-badge-group-action="clear-all"]',(e,t)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.handleClearAllClick(e))}),T.handleDelegatedClick('[data-badge-group-action="show-more"]',(e,t)=>{t.preventDefault(),this.handleShowMoreClick(e)})}initializeBadgeGroup(e){this.applyMaxBadgeLogic(e),this.applySizeInheritance(e),this.dispatchGroupEvent(e,"init")}applyMaxBadgeLogic(e){const t=e.getAttribute("data-max");if(!t)return;const n=parseInt(t,10);if(isNaN(n)||n<1)return;const i=e.querySelector('[data-badge-container="true"]')||e,s=Array.from(i.children).filter(o=>o.hasAttribute("data-keys-badge")||o.classList.contains("badge"));if(s.length<=n)return;const a=s.slice(n);a.forEach(o=>{o.style.display="none",o.setAttribute("data-hidden-by-max","true")}),this.createOrUpdateMoreIndicator(e,i,a.length)}createOrUpdateMoreIndicator(e,t,n){const i=t.querySelector('[data-badge-group-action="show-more"]');i&&i.remove();const s=document.createElement("button");s.className="inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full bg-neutral/10 text-neutral hover:bg-neutral/20 transition-colors duration-200",s.setAttribute("data-badge-group-action","show-more"),s.setAttribute("data-hidden-count",n.toString()),s.setAttribute("type","button"),s.setAttribute("aria-label",`Show ${n} more badges`),s.innerHTML=`+${n} more`,t.appendChild(s)}applySizeInheritance(e){const t=e.getAttribute("data-size");if(!t)return;e.style.setProperty("--badge-group-size",t),e.querySelectorAll('[data-keys-badge="true"]:not([data-size])').forEach(i=>{i.setAttribute("data-size",t),this.updateBadgeSizeClasses(i,t)})}updateBadgeSizeClasses(e,t){e.classList.remove("px-1.5","py-0.5","text-xs","px-2.5","px-3","py-1","text-sm");const n={xs:["px-1.5","py-0.5","text-xs"],sm:["px-2.5","py-0.5","text-xs"],md:["px-3","py-1","text-sm"]},i=n[t]||n.sm;e.classList.add(...i)}handleClearAllClick(e){const t=this.findBadgeGroupForButton(e);t&&(this.clearAllBadges(t),this.dispatchGroupEvent(t,"clear-all"))}handleShowMoreClick(e){const t=this.findBadgeGroupForButton(e);t&&(this.showAllBadges(t),this.dispatchGroupEvent(t,"show-more"))}findBadgeGroupForButton(e){return e.closest('[data-keys-badge-group="true"]')}clearAllBadges(e){e.querySelectorAll('[data-dismiss-target], [data-dismissible="true"]').forEach(i=>{if(i.hasAttribute("data-dismiss-target")){const s=i.getAttribute("data-dismiss-target");if(s){const a=b.querySelector(s.startsWith("#")?s:`#${s}`);a&&fo.dismissBadge(a)}}else fo.dismissBadge(i)});const n=e.querySelector('[data-badge-group-action="show-more"]');n&&n.remove()}showAllBadges(e){e.querySelectorAll('[data-hidden-by-max="true"]').forEach(i=>{i.style.display="",i.removeAttribute("data-hidden-by-max")});const n=e.querySelector('[data-badge-group-action="show-more"]');n&&n.remove(),e.setAttribute("data-all-badges-shown","true")}addBadgeToGroup(e,t){const n=e.getAttribute("data-size"),i=t.size||n||"sm",s=fo.createBadge({...t,size:i,container:e.querySelector('[data-badge-container="true"]')||e});return this.applyMaxBadgeLogic(e),this.dispatchGroupEvent(e,"badge-added",[s]),s}refreshBadgeGroup(e){this.initializeBadgeGroup(e)}dispatchGroupEvent(e,t,n){T.dispatchCustomEvent(e,"badge-group-action",{group:e,action:t,badges:n}),T.dispatchCustomEvent(document.body,"badge-group-action",{group:e,action:t,badges:n})}addGroupActionHandler(e,t){return T.addEventListener(document,"badge-group-action",n=>{const i=n;i.detail.action===e&&t(i.detail.group,i.detail.badges)})}initializeDynamicGroups(){b.querySelectorAll('[data-keys-badge-group="true"]:not([data-group-initialized])').forEach(t=>{this.initializeBadgeGroup(t),t.setAttribute("data-group-initialized","true")})}onDestroy(){}}ps.getInstance();class gs extends H{constructor(){super(...arguments),this.buttonStates=new Map}initializeElements(){b.querySelectorAll('[data-multi-state="true"]').forEach(t=>{this.initializeButton(t)})}initializeButton(e){this.buttonStates.set(e,{current:"default",cycling:!1,element:e}),this.updateIconState(e,"default")}bindEventListeners(){T.handleDelegatedClick('[data-multi-state="true"]',(e,t)=>{t.preventDefault(),this.handleButtonClick(e)}),T.handleDelegatedKeydown('[data-multi-state="true"]',(e,t)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.handleButtonClick(e))})}async handleButtonClick(e){const t=this.buttonStates.get(e);if(!t||t.cycling)return;const n=this.getNextState(t.current,e);t.cycling=!0,await this.transitionToState(e,n),t.current=n,t.cycling=!1,n==="success"&&setTimeout(async()=>{t.current==="success"&&(t.cycling=!0,await this.transitionToState(e,"default"),t.current="default",t.cycling=!1)},2e3),this.dispatchButtonEvent(e,n)}getNextState(e,t){const n=t.dataset.iconToggle,i=t.dataset.iconSuccess;switch(e){case"default":return n?"toggle":i?"success":"default";case"toggle":return i?"success":"default";case"success":default:return"default"}}async transitionToState(e,t){this.updateIconState(e,t),this.updateButtonLabel(e,t),t==="success"&&this.animateSuccessFeedback(e)}updateIconState(e,t){const n=b.querySelector(".button-icon-default",e),i=b.querySelector(".button-icon-toggle",e),s=b.querySelector(".button-icon-success",e);[n,i,s].forEach(o=>{o&&(o.classList.remove("opacity-100","scale-110"),o.classList.add("opacity-0"))});let a=null;switch(t){case"default":a=n;break;case"toggle":a=i;break;case"success":a=s,a&&a.classList.add("scale-110");break}a&&(a.classList.remove("opacity-0"),a.classList.add("opacity-100"))}updateButtonLabel(e,t){const n=b.querySelector(".sr-only",e);let i=null,s=null;switch(t){case"default":const a=this.getOriginalLabel(e);i=a,s=a;break;case"toggle":i=e.dataset.labelToggle||null,s=e.dataset.labelToggle||null;break;case"success":i=e.dataset.labelSuccess||null,s=e.dataset.labelSuccess||null;break}i&&n&&(n.textContent=i),s&&e.setAttribute("aria-label",s),t==="toggle"?e.setAttribute("aria-pressed","true"):e.removeAttribute("aria-pressed")}getOriginalLabel(e){var n;if(e.dataset.originalLabel)return e.dataset.originalLabel;const t=(n=e.textContent)==null?void 0:n.trim();return t?(e.dataset.originalLabel=t,t):e.getAttribute("aria-label")||"Button"}animateSuccessFeedback(e){e.classList.add("scale-105"),setTimeout(()=>{e.classList.remove("scale-105")},200)}dispatchButtonEvent(e,t){T.dispatchCustomEvent(e,"button-state-change",{element:e,state:t,timestamp:Date.now()})}setButtonState(e,t){const n=this.buttonStates.get(e);n||this.initializeButton(e),this.transitionToState(e,t),n&&(n.current=t)}getButtonState(e){const t=this.buttonStates.get(e);return t?t.current:"default"}addStateChangeHandler(e){return T.addEventListener(document,"button-state-change",t=>{const n=t;e(n.detail.element,n.detail.state)})}onDestroy(){this.buttonStates.clear()}}gs.getInstance();const Ba=class Ba{static formatDate(e,t){if(!e||isNaN(e.getTime()))return"";const n=e.getFullYear(),i=e.getMonth()+1,s=e.getDate(),a=[["YYYY",String(n)],["YY",String(n).slice(-2)],["Y",String(n)],["y",String(n).slice(-2)],["MMMM",this.MONTH_NAMES[i-1]],["MMM",this.MONTH_NAMES_SHORT[i-1]],["MM",String(i).padStart(2,"0")],["M",this.MONTH_NAMES_SHORT[i-1]],["mm",String(i).padStart(2,"0")],["m",String(i).padStart(2,"0")],["n",String(i)],["F",this.MONTH_NAMES[i-1]],["DD",String(s).padStart(2,"0")],["dd",String(s).padStart(2,"0")],["d",String(s).padStart(2,"0")],["j",String(s)]];let o=t;for(const[l,c]of a)o=o.replace(new RegExp(l,"g"),c);return o}static formatDateString(e){if(!e||isNaN(e.getTime()))return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}static parseDate(e){if(!e||typeof e!="string"||!e.trim())return null;try{const t=new Date(e);return isNaN(t.getTime())?null:t}catch{return null}}static formatDateForDisplay(e,t){if(!e)return"";const n=this.parseDate(e);return n?this.formatDate(n,t):""}static formatRangeForDisplay(e,t,n,i=" - "){if(!e)return"";const s=this.formatDateForDisplay(e,n),a=t?this.formatDateForDisplay(t,n):"";return a?`${s}${i}${a}`:s}static formatRangeForSubmission(e,t,n="Y-m-d"){if(!e)return null;const i=this.formatDateForSubmission(e,n),s=t?this.formatDateForSubmission(t,n):"";return s?`${i},${s}`:i}static formatDateForSubmission(e,t="Y-m-d"){if(!e)return"";const n=this.parseDate(e);return n?this.formatDate(n,t):""}static addDaysToDate(e,t){const n=this.parseDate(e);return n?(n.setDate(n.getDate()+t),this.formatDateString(n)):e}static addMonthsToDate(e,t){const n=this.parseDate(e);return n?(n.setMonth(n.getMonth()+t),this.formatDateString(n)):e}static getFirstDayOfMonth(e){const t=this.parseDate(e);return t?(t.setDate(1),this.formatDateString(t)):e}static getLastDayOfMonth(e){const t=this.parseDate(e);return t?(t.setMonth(t.getMonth()+1,0),this.formatDateString(t)):e}static getCurrentYearMonth(){const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}static getTodayDate(){return this.formatDateString(new Date)}static isToday(e){return e===this.getTodayDate()}static isDateInRange(e,t,n){if(!t||!n)return!1;const i=this.parseDate(e),s=this.parseDate(t),a=this.parseDate(n);return!i||!s||!a?!1:i>=s&&i<=a}static isDateRangeStart(e,t){return t===e}static isDateRangeEnd(e,t){return t===e}static getFormatPlaceholder(e){return{"Y-m-d":"YYYY-MM-DD","Y/m/d":"YYYY/MM/DD","d-m-Y":"DD-MM-YYYY","d/m/Y":"DD/MM/YYYY","m/d/Y":"MM/DD/YYYY","m-d-Y":"MM-DD-YYYY","F j, Y":"Month DD, YYYY","M j, Y":"Mon DD, YYYY","j F Y":"DD Month YYYY"}[e]||"YYYY-MM-DD"}static parseInputDate(e,t){if(!e||!e.trim())return null;try{const n=new Date(e);if(!isNaN(n.getTime()))return n}catch{}return null}static createDateAriaLabel(e,t=!1,n=!1,i=!1,s=!1,a=!1){const o=this.parseDate(e);if(!o)return e;let c=o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return t&&(c+=", Today"),n?c+=", Selected":i?c+=", Range start":s?c+=", Range end":a&&(c+=", In selected range"),c}static isValidDateString(e){const t=this.parseDate(e);return t!==null&&!isNaN(t.getTime())}static compareDates(e,t){const n=this.parseDate(e),i=this.parseDate(t);return!n||!i?0:n.getTime()-i.getTime()}static getQuickSelectorDate(e){const t=new Date;let n=null,i=null;switch(e){case"today":n=t,i=t;break;case"yesterday":n=new Date(t),n.setDate(t.getDate()-1),i=n;break;case"last7days":i=t,n=new Date(t),n.setDate(t.getDate()-6);break;case"last30days":i=t,n=new Date(t),n.setDate(t.getDate()-29);break;case"thismonth":n=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"lastmonth":n=new Date(t.getFullYear(),t.getMonth()-1,1),i=new Date(t.getFullYear(),t.getMonth(),0);break;case"thisyear":n=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),11,31);break}return{start:n,end:i}}};Ba.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],Ba.MONTH_NAMES_SHORT=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];let ye=Ba;class Dt{static selectDate(e,t,n,i){n.isDisabled||(n.isRange?this.handleRangeSelection(e,t,n,i):i({selectedDate:t,focusedDate:t}))}static handleRangeSelection(e,t,n,i){const s=new Date(t);if(!n.startDate||n.rangeSelectionState==="none"){i({startDate:t,endDate:null,focusedDate:t,rangeSelectionState:"selecting-end"});return}if(n.startDate&&!n.endDate){const a=new Date(n.startDate);s<a?i({startDate:t,endDate:null,focusedDate:t,rangeSelectionState:"selecting-end"}):s.getTime()===a.getTime()?i({startDate:null,endDate:null,focusedDate:t,rangeSelectionState:"none"}):i({endDate:t,focusedDate:t,rangeSelectionState:"none"});return}i({startDate:t,endDate:null,focusedDate:t,rangeSelectionState:"selecting-end"})}static clearSelection(e,t,n){t.isRange?n({startDate:null,endDate:null,rangeSelectionState:"none"}):n({selectedDate:null})}static selectToday(e,t,n){const i=this.getTodayDate();t.isRange?n({startDate:i,endDate:i,focusedDate:i,rangeSelectionState:"none"}):n({selectedDate:i,focusedDate:i})}static formatRangeForDisplay(e,t){return!e&&!t?"":e&&t?`${e},${t}`:e?`${e},`:""}static isDateInRange(e,t,n){if(!t||!n)return!1;const i=new Date(e),s=new Date(t),a=new Date(n);return i>=s&&i<=a}static isDateRangeStart(e,t){return t===e}static isDateRangeEnd(e,t){return t===e}static getRangeAttributes(e,t){if(!t.isRange)return"";const n=[];return e.isInRange&&n.push('data-is-in-range="true"'),e.isRangeStart&&n.push('data-is-range-start="true"'),e.isRangeEnd&&n.push('data-is-range-end="true"'),n.join(" ")}static getTodayDate(){const e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}static isToday(e){return e===this.getTodayDate()}}class om{static generateCalendarGrid(e,t,n=0){const i=this.addMonthsToDate(t.currentMonth+"-01",n),s=parseInt(i.substring(0,4)),a=parseInt(i.substring(5,7))-1,o=new Date(s,a,1),l=new Date(o);l.setDate(l.getDate()-o.getDay());const c=[];let d=[];for(let f=0;f<42;f++){const h=new Date(l);h.setDate(l.getDate()+f);const g=this.formatDateString(h),m=h.getMonth()===a,y=Dt.isToday(g),k=t.selectedDate===g,w=this.isDateDisabled(e,h,t),x=t.isRange?Dt.isDateInRange(g,t.startDate,t.endDate):!1,E=t.isRange?Dt.isDateRangeStart(g,t.startDate):!1,C=t.isRange?Dt.isDateRangeEnd(g,t.endDate):!1,I={date:g,day:h.getDate(),isCurrentMonth:m,isToday:y,isSelected:k,isDisabled:w,isInRange:x,isRangeStart:E,isRangeEnd:C};d.push(I),d.length===7&&(c.push(d),d=[])}return c}static renderCalendarGrid(e,t){t.monthsToShow>1?this.renderMultipleMonths(e,t):this.renderSingleMonth(e,t)}static renderSingleMonth(e,t){const n=e.querySelector("[data-calendar-grid-container]");if(!n)return;const i=this.generateCalendarGrid(e,t),s=this.getCellClasses(e),a=t.weekdays.map(c=>`<div class="${s} font-semibold text-muted text-center">${c}</div>`).join(""),o=i.map(c=>c.map(d=>{const f=this.getDayButtonClasses(d,e,t),h=Dt.getRangeAttributes(d,t),g=this.getDateAriaLabel(d,t);return`
                    <div class="calendar-day ${s}">
                        <button
                            type="button"
                            class="${f}"
                            data-date="${d.date}"
                            data-calendar-day-btn
                            ${d.isDisabled?"disabled":""}
                            ${h}
                            aria-label="${g}"
                            tabindex="${d.date===t.focusedDate?"0":"-1"}"
                        >
                            ${d.day}
                        </button>
                    </div>
                `}).join("")).join(""),l=`
            <div class="calendar-weekdays-grid grid grid-cols-7 gap-0">
                ${a}
            </div>
            <div class="calendar-days-grid grid grid-cols-7 gap-0">
                ${o}
            </div>
        `;n.innerHTML=l}static renderMultipleMonths(e,t){e.querySelectorAll("[data-calendar-grid-container]").forEach((i,s)=>{if(s>=t.monthsToShow)return;const a=this.generateCalendarGrid(e,t,s),o=this.getCellClasses(e),l=this.addMonthsToDate(t.currentMonth+"-01",s),c=t.monthNames[parseInt(l.substring(5,7))-1],d=l.substring(0,4),f=`
                <div class="calendar-month-header text-center font-semibold text-sm mb-2 text-muted">
                    ${c} ${d}
                </div>
            `,h=t.weekdays.map(y=>`<div class="${o} font-semibold text-muted text-center text-xs">${y}</div>`).join(""),g=a.map(y=>y.map(k=>{const w=this.getDayButtonClasses(k,e,t),x=Dt.getRangeAttributes(k,t),E=this.getDateAriaLabel(k,t);return`
                        <div class="calendar-day ${o}">
                            <button
                                type="button"
                                class="${w}"
                                data-date="${k.date}"
                                data-calendar-day-btn
                                data-month-index="${s}"
                                ${k.isDisabled?"disabled":""}
                                ${x}
                                aria-label="${E}"
                                tabindex="${k.date===t.focusedDate?"0":"-1"}"
                            >
                                ${k.day}
                            </button>
                        </div>
                    `}).join("")).join(""),m=`
                ${f}
                <div class="calendar-weekdays-grid grid grid-cols-7 gap-0 mb-1">
                    ${h}
                </div>
                <div class="calendar-days-grid grid grid-cols-7 gap-0">
                    ${g}
                </div>
            `;i.innerHTML=m})}static getCellClasses(e){const t=e.dataset.size||"md";return{sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"}[t]||"w-10 h-10 text-sm"}static getDayButtonClasses(e,t,n){const i=t.dataset.size||"md",s="w-full h-full rounded-md border transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-1",a={sm:"text-xs",md:"text-sm font-medium",lg:"text-base font-medium"}[i]||"text-sm font-medium";let o="";return e.isDisabled?o="bg-surface text-muted border-transparent cursor-not-allowed opacity-40 hover:bg-surface hover:border-transparent":e.isSelected&&!n.isRange?o="bg-brand text-white border-brand-600 font-bold shadow-sm":e.isToday?o="bg-neutral-50 text-brand border-brand font-semibold":e.isCurrentMonth?o="text-foreground border-transparent hover:bg-neutral-hover hover:border-border":o="text-muted border-transparent hover:bg-neutral-hover hover:border-border",`${s} ${a} ${o}`.trim()}static getDateAriaLabel(e,t){const n=new Date(e.date),i=n.toLocaleDateString("en-US",{weekday:"long"}),s=n.toLocaleDateString("en-US",{month:"long"});let a=`${i}, ${s} ${e.day}, ${n.getFullYear()}`;return e.isToday&&(a+=", today"),e.isSelected&&(a+=", selected"),e.isRangeStart&&(a+=", range start"),e.isRangeEnd&&(a+=", range end"),e.isInRange&&(a+=", in range"),e.isDisabled&&(a+=", disabled"),a}static isDateDisabled(e,t,n){if(n.isDisabled)return!0;const i=this.formatDateString(t);return n.minDate&&i<n.minDate||n.maxDate&&i>n.maxDate?!0:n.disabledDates&&Array.isArray(n.disabledDates)?n.disabledDates.includes(i):!1}static formatDateString(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}static addMonthsToDate(e,t){const n=new Date(e);return n.setMonth(n.getMonth()+t),this.formatDateString(n)}}class fn{static navigateMonth(e,t,n,i,s){if(n.isDisabled)return;const a=new Date(n.currentMonth+"-01"),o=new Date(a);t==="prev"?o.setMonth(a.getMonth()-1):o.setMonth(a.getMonth()+1);const l=this.formatYearMonth(o);this.canNavigateToMonth(o,n)&&(i({currentMonth:l,viewMode:"calendar"}),s(),this.updateMonthYearDisplay(e,n.monthNames,l))}static navigateToToday(e,t,n,i){const s=new Date,a=this.formatYearMonth(s);a!==t.currentMonth&&(n({currentMonth:a,viewMode:"calendar"}),i(),this.updateMonthYearDisplay(e,t.monthNames,a))}static toggleMonthYearDropdown(e,t,n,i){t.isDisabled||(t.viewMode==="calendar"?(n({viewMode:"month"}),this.renderMonthGrid(e,t,n,i)):t.viewMode==="month"?(n({viewMode:"year"}),this.renderYearGrid(e,t,n,i)):(n({viewMode:"calendar"}),i()))}static renderMonthGrid(e,t,n,i){const s=e.querySelector("[data-calendar-grid-container]");if(!s)return;const a=parseInt(t.currentMonth.substring(0,4)),o=parseInt(t.currentMonth.substring(5,7))-1,l=t.monthNames.map((f,h)=>{const g=h===o,m=this.isMonthDisabled(e,a,h,t);return`
                <button
                    type="button"
                    class="${this.getMonthButtonClasses(g,m)} month-option"
                    data-month="${h}"
                    data-calendar-month-btn
                    ${m?"disabled":""}
                    aria-label="Select ${f} ${a}"
                >
                    ${f}
                </button>
            `}).join(""),d=`
            ${`
            <div class="flex items-center justify-between mb-4">
                <button
                    type="button"
                    class="p-2 rounded-md hover:bg-neutral-hover focus:outline-none focus:ring-2 focus:ring-accent"
                    data-calendar-year-nav="prev"
                    aria-label="Previous year"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>

                <button
                    type="button"
                    class="text-lg font-semibold px-4 py-2 rounded-md hover:bg-neutral-hover focus:outline-none focus:ring-2 focus:ring-accent"
                    data-calendar-year-btn
                    aria-label="Select year ${a}"
                >
                    ${a}
                </button>

                <button
                    type="button"
                    class="p-2 rounded-md hover:bg-neutral-hover focus:outline-none focus:ring-2 focus:ring-accent"
                    data-calendar-year-nav="next"
                    aria-label="Next year"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        `}
            <div class="month-grid grid grid-cols-3 gap-2">
                ${l}
            </div>
        `;s.innerHTML=d,this.bindMonthGridEvents(e,t,n,i)}static renderYearGrid(e,t,n,i){const s=e.querySelector("[data-calendar-grid-container]");if(!s)return;const a=parseInt(t.currentMonth.substring(0,4)),o=Math.floor(a/10)*10,c=Array.from({length:12},(h,g)=>o-1+g).map(h=>{const g=h===a,m=this.isYearDisabled(e,h,t),y=h<o||h>=o+10;return`
                <button
                    type="button"
                    class="${this.getYearButtonClasses(g,m,y)} year-option"
                    data-year="${h}"
                    data-calendar-year-option
                    ${m?"disabled":""}
                    aria-label="Select year ${h}"
                >
                    ${h}
                </button>
            `}).join(""),f=`
            ${`
            <div class="flex items-center justify-between mb-4">
                <button
                    type="button"
                    class="p-2 rounded-md hover:bg-neutral-hover focus:outline-none focus:ring-2 focus:ring-accent"
                    data-calendar-decade-nav="prev"
                    aria-label="Previous decade"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>

                <span class="text-lg font-semibold">
                    ${o} - ${o+9}
                </span>

                <button
                    type="button"
                    class="p-2 rounded-md hover:bg-neutral-hover focus:outline-none focus:ring-2 focus:ring-accent"
                    data-calendar-decade-nav="next"
                    aria-label="Next decade"
                >
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        `}
            <div class="year-grid grid grid-cols-4 gap-2">
                ${c}
            </div>
        `;s.innerHTML=f,this.bindYearGridEvents(e,t,n,i)}static selectMonth(e,t,n,i,s){const o=`${n.currentMonth.substring(0,4)}-${String(t+1).padStart(2,"0")}`;i({currentMonth:o,viewMode:"calendar"}),s(),this.updateMonthYearDisplay(e,n.monthNames,o)}static selectYear(e,t,n,i,s){const a=n.currentMonth.substring(5,7),o=`${t}-${a}`;i({currentMonth:o,viewMode:"month"}),this.renderMonthGrid(e,n,i,s)}static navigateYear(e,t,n,i,s){if(n.isDisabled)return;const a=parseInt(n.currentMonth.substring(0,4)),o=t==="prev"?a-1:a+1,l=n.currentMonth.substring(5,7),c=`${o}-${l}`;i({currentMonth:c}),n.viewMode==="year"?this.renderYearGrid(e,n,i,s):n.viewMode==="month"&&this.renderMonthGrid(e,n,i,s)}static canNavigateToMonth(e,t){if(t.minDate){const n=new Date(t.minDate),i=new Date(n.getFullYear(),n.getMonth(),1);if(e<i)return!1}if(t.maxDate){const n=new Date(t.maxDate),i=new Date(n.getFullYear(),n.getMonth(),1);if(e>i)return!1}return!0}static isMonthDisabled(e,t,n,i){if(i.minDate){const s=new Date(i.minDate);if(t<s.getFullYear()||t===s.getFullYear()&&n<s.getMonth())return!0}if(i.maxDate){const s=new Date(i.maxDate);if(t>s.getFullYear()||t===s.getFullYear()&&n>s.getMonth())return!0}return!1}static isYearDisabled(e,t,n){return!!(n.minDate&&t<new Date(n.minDate).getFullYear()||n.maxDate&&t>new Date(n.maxDate).getFullYear())}static updateMonthYearDisplay(e,t,n){const i=e.querySelector(".calendar-month-year-display");if(!i)return;const s=n.substring(0,4),a=parseInt(n.substring(5,7))-1,o=t[a];i.textContent=`${o} ${s}`}static getMonthButtonClasses(e,t){const n="w-full p-3 rounded-md text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent";return t?`${n} bg-surface text-muted cursor-not-allowed opacity-50`:e?`${n} bg-brand text-white font-semibold shadow-sm`:`${n} text-foreground hover:bg-neutral-hover hover:scale-105`}static getYearButtonClasses(e,t,n){const i="w-full p-3 rounded-md text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent";return t?`${i} bg-surface text-muted cursor-not-allowed opacity-50`:e?`${i} bg-brand text-white font-semibold shadow-sm`:n?`${i} text-muted hover:bg-neutral-hover opacity-75`:`${i} text-foreground hover:bg-neutral-hover hover:scale-105`}static formatYearMonth(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")}static bindMonthGridEvents(e,t,n,i){var s;e.querySelectorAll("[data-calendar-month-btn]").forEach(a=>{a.addEventListener("click",o=>{const l=parseInt(o.target.dataset.month||"0");this.selectMonth(e,l,t,n,i)})}),(s=e.querySelector("[data-calendar-year-btn]"))==null||s.addEventListener("click",()=>{n({viewMode:"year"}),this.renderYearGrid(e,t,n,i)})}static bindYearGridEvents(e,t,n,i){e.querySelectorAll("[data-calendar-year-option]").forEach(s=>{s.addEventListener("click",a=>{const o=parseInt(a.target.dataset.year||"0");this.selectYear(e,o,t,n,i)})}),e.querySelectorAll("[data-calendar-decade-nav]").forEach(s=>{s.addEventListener("click",a=>{const o=a.target.dataset.calendarDecadeNav,l=parseInt(t.currentMonth.substring(0,4)),c=Math.floor(l/10)*10,h=`${(o==="prev"?c-10:c+10)+l%10}-${t.currentMonth.substring(5,7)}`;n({currentMonth:h}),this.renderYearGrid(e,t,n,i)})})}}class po{static handleKeydown(e,t,n,i,s,a){if(n.isDisabled||!n.focusedDate)return;const{key:o,ctrlKey:l,shiftKey:c}=t;switch(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Enter"," ","Escape"].includes(o)&&t.preventDefault(),o){case"ArrowLeft":this.navigateByDays(e,-1,n,i,a);break;case"ArrowRight":this.navigateByDays(e,1,n,i,a);break;case"ArrowUp":this.navigateByDays(e,-7,n,i,a);break;case"ArrowDown":this.navigateByDays(e,7,n,i,a);break;case"PageUp":c?this.navigateByYears(e,-1,n,i,a):this.navigateByMonths(e,-1,n,i,a);break;case"PageDown":c?this.navigateByYears(e,1,n,i,a):this.navigateByMonths(e,1,n,i,a);break;case"Home":l?this.navigateToToday(e,n,i,a):this.navigateToWeekStart(e,n,i,a);break;case"End":this.navigateToWeekEnd(e,n,i,a);break;case"Enter":case" ":n.focusedDate&&s(n.focusedDate);break;case"Escape":this.handleEscape(e,n,i,a);break;case"t":case"T":!l&&!c&&this.navigateToToday(e,n,i,a);break}}static navigateByDays(e,t,n,i,s){if(!n.focusedDate)return;const a=this.addDaysToDate(n.focusedDate,t);this.isDateNavigable(a,n)&&this.focusDate(e,a,n,i,s)}static navigateByMonths(e,t,n,i,s){if(!n.focusedDate)return;const a=new Date(n.focusedDate),o=new Date(a);o.setMonth(a.getMonth()+t),o.getDate()!==a.getDate()&&o.setDate(0);const l=this.formatDateString(o);if(this.isDateNavigable(l,n)){const c=this.formatYearMonth(o);c!==n.currentMonth?(i({currentMonth:c,focusedDate:l}),s()):this.focusDate(e,l,n,i,s)}}static navigateByYears(e,t,n,i,s){if(!n.focusedDate)return;const a=new Date(n.focusedDate),o=new Date(a);o.setFullYear(a.getFullYear()+t),o.getMonth()!==a.getMonth()&&o.setDate(0);const l=this.formatDateString(o);if(this.isDateNavigable(l,n)){const c=this.formatYearMonth(o);i({currentMonth:c,focusedDate:l}),setTimeout(()=>s(),100)}}static navigateToWeekStart(e,t,n,i){if(!t.focusedDate)return;const s=new Date(t.focusedDate),a=s.getDay(),o=new Date(s);o.setDate(s.getDate()-a);const l=this.formatDateString(o);this.isDateNavigable(l,t)&&this.focusDate(e,l,t,n,i)}static navigateToWeekEnd(e,t,n,i){if(!t.focusedDate)return;const s=new Date(t.focusedDate),a=6-s.getDay(),o=new Date(s);o.setDate(s.getDate()+a);const l=this.formatDateString(o);this.isDateNavigable(l,t)&&this.focusDate(e,l,t,n,i)}static navigateToToday(e,t,n,i){const s=this.getTodayDate();if(this.isDateNavigable(s,t)){const a=this.formatYearMonth(new Date(s));a!==t.currentMonth?(n({currentMonth:a,focusedDate:s}),i()):this.focusDate(e,s,t,n,i)}}static handleEscape(e,t,n,i){t.viewMode!=="calendar"?(n({viewMode:"calendar"}),setTimeout(()=>i(),100)):t.isRange&&t.rangeSelectionState==="selecting-end"&&(n({rangeSelectionState:"none",startDate:null,endDate:null}),setTimeout(()=>i(),100))}static focusDate(e,t,n,i,s){i({focusedDate:t}),e.querySelectorAll("[data-calendar-day-btn]").forEach(o=>{o.setAttribute("tabindex","-1")});const a=e.querySelector(`[data-calendar-day-btn][data-date="${t}"]`);a&&(a.setAttribute("tabindex","0"),a.focus())}static isDateNavigable(e,t){return!(t.minDate&&e<t.minDate||t.maxDate&&e>t.maxDate||t.disabledDates.includes(e))}static addDaysToDate(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),this.formatDateString(n)}static formatDateString(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}static formatYearMonth(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")}static getTodayDate(){const e=new Date;return this.formatDateString(e)}static bindKeyboardEvents(e,t,n,i,s){e.removeEventListener("keydown",e.dataset.keydownHandler);const a=o=>{this.handleKeydown(e,o,t,n,i,s)};e.dataset.keydownHandler=a.toString(),e.addEventListener("keydown",a),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0")}static initializeFocus(e,t){const n=t.focusedDate||this.getTodayDate(),i=e.querySelector(`[data-calendar-day-btn][data-date="${n}"]`);i&&(i.setAttribute("tabindex","0"),document.activeElement===e&&i.focus())}static unbindKeyboardEvents(e){const t=e.dataset.keydownHandler;t&&(e.removeEventListener("keydown",t),delete e.dataset.keydownHandler)}}class Xt{static updateHiddenInput(e,t){t.isRange?this.updateRangeInputs(e,t):this.updateSingleInput(e,t)}static updateRangeInputs(e,t){const n=e.querySelector(".calendar-start-input"),i=e.querySelector(".calendar-end-input"),s=e.querySelector(".calendar-range-input");n&&(n.value=t.startDate||""),i&&(i.value=t.endDate||""),s&&(s.value=Dt.formatRangeForDisplay(t.startDate,t.endDate)),[n,i,s].forEach(a=>{a&&this.dispatchInputChangeEvent(a)})}static updateSingleInput(e,t){const n=e.querySelector(".calendar-hidden-input");n&&(n.value=t.selectedDate||"",this.dispatchInputChangeEvent(n))}static dispatchInputChangeEvent(e){const t=new Event("input",{bubbles:!0}),n=new Event("change",{bubbles:!0});e.dispatchEvent(t),e.dispatchEvent(n),window.Livewire&&e.hasAttribute("wire:model")&&window.Livewire.hook("message.processed",()=>{})}static handleQuickSelector(e,t,n,i,s){const a=new Date;let o=null,l=null,c=null;switch(t){case"today":if(c=this.formatDateString(a),this.isDateDisabled(c,n)){console.warn("Today is disabled and cannot be selected");return}n.isRange&&(o=c,l=c);break;case"yesterday":const g=new Date(a);if(g.setDate(g.getDate()-1),c=this.formatDateString(g),this.isDateDisabled(c,n)){console.warn("Yesterday is disabled and cannot be selected");return}n.isRange&&(o=c,l=c);break;case"last7days":if(n.isRange){l=this.formatDateString(a);const m=new Date(a);m.setDate(a.getDate()-6),o=this.formatDateString(m)}break;case"last30days":if(n.isRange){l=this.formatDateString(a);const m=new Date(a);m.setDate(a.getDate()-29),o=this.formatDateString(m)}break;case"thismonth":if(n.isRange){const m=new Date(a.getFullYear(),a.getMonth(),1),y=new Date(a.getFullYear(),a.getMonth()+1,0);o=this.formatDateString(m),l=this.formatDateString(y)}break;case"lastmonth":if(n.isRange){const m=new Date(a.getFullYear(),a.getMonth()-1,1),y=new Date(a.getFullYear(),a.getMonth(),0);o=this.formatDateString(m),l=this.formatDateString(y)}break;case"thisyear":if(n.isRange){const m=new Date(a.getFullYear(),0,1),y=new Date(a.getFullYear(),11,31);o=this.formatDateString(m),l=this.formatDateString(y)}break;default:console.warn(`Unknown quick selector value: ${t}`);return}const d=l||c;let f=n.currentMonth;d&&(f=this.formatYearMonth(new Date(d))),n.isRange&&o&&l?i({startDate:o,endDate:l,rangeSelectionState:"none",focusedDate:l,viewMode:"calendar",currentMonth:f}):!n.isRange&&c&&i({selectedDate:c,focusedDate:c,viewMode:"calendar",currentMonth:f}),s(),fn.updateMonthYearDisplay(e,n.monthNames,f),this.updateHiddenInput(e,n);const h=c?ye.formatDateForDisplay(c,n.displayFormat):null;o&&ye.formatDateForDisplay(o,n.displayFormat),l&&ye.formatDateForDisplay(l,n.displayFormat),n.isRange&&o&&l?this.dispatchCalendarEvent(e,"rangeSelected",{startDate:o,endDate:l,formattedRange:ye.formatRangeForDisplay(o,l,n.displayFormat),source:"quickSelector"}):!n.isRange&&c&&this.dispatchCalendarEvent(e,"dateSelected",{selectedDate:c,formattedDate:h,source:"quickSelector"})}static isDateDisabled(e,t){const n=ye.parseDate(e);if(!n)return!0;if(t.minDate){const i=ye.parseDate(t.minDate);if(i&&n<i)return!0}if(t.maxDate){const i=ye.parseDate(t.maxDate);if(i&&n>i)return!0}return!!(t.disabledDates&&t.disabledDates.includes(e))}static handleFooterAction(e,t,n,i,s){switch(t){case"clear":Dt.clearSelection(e,n,i),s(),this.updateHiddenInput(e,n),this.dispatchCalendarEvent(e,"cleared",{source:"footerAction"});break;case"today":const a=this.formatDateString(new Date),o=this.formatYearMonth(new Date);if(this.isDateDisabled(a,n)){console.warn("Today is disabled and cannot be selected");return}n.isRange?i({startDate:a,endDate:a,focusedDate:a,rangeSelectionState:"none",currentMonth:o}):i({selectedDate:a,focusedDate:a,currentMonth:o}),s(),fn.updateMonthYearDisplay(e,n.monthNames,o),this.updateHiddenInput(e,n);const l=ye.formatDateForDisplay(a,n.displayFormat);this.dispatchCalendarEvent(e,"dateSelected",{selectedDate:n.isRange?null:a,startDate:n.isRange?a:null,endDate:n.isRange?a:null,formattedDate:n.isRange?null:l,formattedRange:n.isRange?`${l} - ${l}`:null,source:"footerAction"});break;default:console.warn(`Unknown footer action: ${t}`)}}static dispatchCalendarEvent(e,t,n=null){const i=new CustomEvent(`calendar:${t}`,{bubbles:!0,cancelable:!0,detail:{calendar:e,...n}});e.dispatchEvent(i),document.dispatchEvent(new CustomEvent(`keys:calendar:${t}`,{bubbles:!0,cancelable:!0,detail:{calendar:e,...n}}))}static bindFormEvents(e,t,n,i){e.addEventListener("quickSelector:clicked",s=>{var o;const a=(o=s.detail)==null?void 0:o.value;a&&this.handleQuickSelector(e,a,t,n,i)}),e.addEventListener("click",s=>{const a=s.target.closest("[data-quick-selector]");if(a&&!e.closest("[data-keys-date-picker]")){const l=a.dataset.quickSelector;l&&this.handleQuickSelector(e,l,t,n,i)}}),e.querySelectorAll("[data-calendar-action]").forEach(s=>{s.addEventListener("click",a=>{const o=a.target.dataset.calendarAction;o&&this.handleFooterAction(e,o,t,n,i)})})}static getCalendarState(e,t){return{currentMonth:t.currentMonth,selectedDate:t.selectedDate,startDate:t.startDate,endDate:t.endDate,focusedDate:t.focusedDate,isRange:t.isRange,isDisabled:t.isDisabled,viewMode:t.viewMode,rangeSelectionState:t.rangeSelectionState,formattedValue:t.isRange?Dt.formatRangeForDisplay(t.startDate,t.endDate):t.selectedDate}}static setSelectedDate(e,t,n,i,s){if(n.isRange){console.warn("Use setSelectedRange for range calendars");return}if(i({selectedDate:t,focusedDate:t}),t){const a=this.formatYearMonth(new Date(t));a!==n.currentMonth&&i({currentMonth:a})}s(),this.updateHiddenInput(e,n),this.dispatchCalendarEvent(e,"dateChanged",{selectedDate:t,source:"programmatic"})}static setSelectedRange(e,t,n,i,s,a){if(!i.isRange){console.warn("Use setSelectedDate for single date calendars");return}if(s({startDate:t,endDate:n,rangeSelectionState:"none",focusedDate:n||t}),n||t){const o=n||t,l=this.formatYearMonth(new Date(o));l!==i.currentMonth&&s({currentMonth:l})}a(),this.updateHiddenInput(e,i),this.dispatchCalendarEvent(e,"rangeChanged",{startDate:t,endDate:n,source:"programmatic"})}static formatDateString(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}static formatYearMonth(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")}}class go extends H{initializeElements(){b.findByDataAttribute("keys-calendar","true").forEach(e=>{this.initializeCalendar(e)})}initializeCalendar(e){if(this.hasState(e))return;const t=e.dataset.keysCalendarConfig,n=e.dataset.disabled==="true";let i;try{i=t?JSON.parse(t):{}}catch(a){console.error("Failed to parse calendar data:",a),i={}}const s={currentMonth:i.currentMonth||this.getCurrentYearMonth(),selectedDate:i.selectedDate||null,startDate:i.startDate||null,endDate:i.endDate||null,focusedDate:i.selectedDate||i.startDate||this.getTodayDate(),isRange:i.isRange||!1,monthsToShow:i.monthsToShow||1,rangeSelectionState:"none",isDisabled:n,minDate:i.minDate||null,maxDate:i.maxDate||null,disabledDates:i.disabledDates||[],weekdays:i.weekdays||["S","M","T","W","T","F","S"],monthNames:i.monthNames||["January","February","March","April","May","June","July","August","September","October","November","December"],viewMode:"calendar",format:i.format||"Y-m-d",displayFormat:i.displayFormat||i.format||"Y-m-d"};this.setState(e,s),this.renderCalendar(e),this.bindAllEventListeners(e),Xt.updateHiddenInput(e,s),Xt.dispatchCalendarEvent(e,"initialized",{state:s})}bindEventListeners(){}bindAllEventListeners(e){const t=this.getState(e);t&&(this.bindDateSelectionEvents(e),this.bindNavigationEvents(e),Xt.bindFormEvents(e,t,n=>this.updateState(e,n),()=>this.renderCalendar(e)),po.bindKeyboardEvents(e,t,n=>this.updateState(e,n),n=>this.selectDate(e,n),()=>this.renderCalendar(e)))}bindDateSelectionEvents(e){e.addEventListener("click",t=>{const n=t.target;if(n.dataset.calendarDayBtn!==void 0){const i=n.dataset.date,s=n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true";i&&!s&&this.selectDate(e,i)}})}bindNavigationEvents(e){e.addEventListener("click",t=>{const n=t.target,i=this.getState(e);if(!i)return;const s=n.closest("[data-calendar-nav]");if(s){const d=s.dataset.calendarNav;fn.navigateMonth(e,d,i,f=>this.updateState(e,f),()=>this.renderCalendar(e));return}if(n.closest("[data-calendar-month-year-btn]")){fn.toggleMonthYearDropdown(e,i,d=>this.updateState(e,d),()=>this.renderCalendar(e));return}const o=n.closest("[data-calendar-month-btn]");if(o){const d=parseInt(o.dataset.month||"0");fn.selectMonth(e,d,i,f=>this.updateState(e,f),()=>this.renderCalendar(e));return}const l=n.closest("[data-calendar-year-option]");if(l){const d=parseInt(l.dataset.year||"0");fn.selectYear(e,d,i,f=>this.updateState(e,f),()=>this.renderCalendar(e));return}const c=n.closest("[data-calendar-year-nav]");if(c){const d=c.dataset.calendarYearNav;fn.navigateYear(e,d,i,f=>this.updateState(e,f),()=>this.renderCalendar(e));return}})}selectDate(e,t){const n=this.getState(e);if(!n)return;Dt.selectDate(e,t,n,s=>this.updateState(e,s)),this.renderCalendar(e),Xt.updateHiddenInput(e,this.getState(e));const i=this.getState(e);if(n.isRange){const s=i.startDate&&i.endDate?ye.formatRangeForDisplay(i.startDate,i.endDate,i.displayFormat):i.startDate?ye.formatDateForDisplay(i.startDate,i.displayFormat):"";Xt.dispatchCalendarEvent(e,"rangeSelected",{startDate:i.startDate,endDate:i.endDate,formattedRange:s,source:"userClick"})}else{const s=ye.formatDateForDisplay(t,i.displayFormat);Xt.dispatchCalendarEvent(e,"dateSelected",{selectedDate:t,formattedDate:s,source:"userClick"})}}renderCalendar(e){const t=this.getState(e);t&&(this.toggleQuickSelectors(e,t.viewMode),t.viewMode==="calendar"?(om.renderCalendarGrid(e,t),po.initializeFocus(e,t)):t.viewMode==="month"||t.viewMode==="year"&&fn.renderYearGrid(e,t,n=>this.updateState(e,n),()=>this.renderCalendar(e)))}toggleQuickSelectors(e,t){const n=this.getState(e),i=e.querySelector('[data-view-mode-show="calendar"]');if(i){const a=i.querySelectorAll("[data-quick-selector]").length>0;t==="calendar"&&(n!=null&&n.isRange)&&a?i.style.display="":i.style.display="none"}}updateState(e,t){const n=this.getState(e);if(!n)return;const i={...n,...t};this.setState(e,i)}setupDynamicObserver(){new MutationObserver(t=>{t.forEach(n=>{n.addedNodes.forEach(i=>{if(i.nodeType===Node.ELEMENT_NODE){const s=i;s.dataset.keysCalendar==="true"&&this.initializeCalendar(s),s.querySelectorAll('[data-keys-calendar="true"]').forEach(o=>{this.initializeCalendar(o)})}})})}).observe(document.body,{childList:!0,subtree:!0})}getCalendarState(e){const t=this.getState(e);return t?Xt.getCalendarState(e,t):null}setSelectedDate(e,t){const n=this.getState(e);n&&Xt.setSelectedDate(e,t,n,i=>this.updateState(e,i),()=>this.renderCalendar(e))}setSelectedRange(e,t,n){const i=this.getState(e);i&&Xt.setSelectedRange(e,t,n,i,s=>this.updateState(e,s),()=>this.renderCalendar(e))}onDestroy(){b.findByDataAttribute("keys-calendar","true").forEach(e=>{po.unbindKeyboardEvents(e)})}getCurrentYearMonth(){const e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")}getTodayDate(){const e=new Date;return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")}}class ms extends H{initializeElements(){}bindEventListeners(){T.handleDelegatedClick("label[for]",e=>{const t=e.getAttribute("for");if(!t)return;const n=b.getElementById(t);!n||n.type!=="radio"||this.focusRadioInput(n)}),T.handleDelegatedKeydown('input[type="radio"]',(e,t)=>{T.createNavigationHandler({onArrowDown:()=>this.focusNextRadio(e),onArrowRight:()=>this.focusNextRadio(e),onArrowUp:()=>this.focusPreviousRadio(e),onArrowLeft:()=>this.focusPreviousRadio(e),preventDefault:["ArrowDown","ArrowRight","ArrowUp","ArrowLeft"]})(t)})}focusRadioInput(e){b.focus(e,0),this.dispatchFocusEvent(e)}focusNextRadio(e){const t=this.getRadioGroup(e),i=(t.indexOf(e)+1)%t.length,s=t[i];s&&(s.focus(),s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})),this.dispatchFocusEvent(s))}focusPreviousRadio(e){const t=this.getRadioGroup(e),n=t.indexOf(e),i=n===0?t.length-1:n-1,s=t[i];s&&(s.focus(),s.checked=!0,s.dispatchEvent(new Event("change",{bubbles:!0})),this.dispatchFocusEvent(s))}getRadioGroup(e){const t=e.name;return t?Array.from(b.querySelectorAll(`input[type="radio"][name="${t}"]`)).filter(i=>!i.disabled):[e]}dispatchFocusEvent(e){T.dispatchCustomEvent(e,"radio-focus",{radio:e,name:e.name,value:e.value,checked:e.checked})}addFocusHandler(e){return T.addEventListener(document,"radio-focus",t=>{e(t.detail.radio)})}onDestroy(){}}ms.getInstance();class On extends H{initializeElements(){b.findByDataAttribute("range","true").forEach(e=>{this.initializeRange(e)})}initializeRange(e){var a,o,l;if(this.hasState(e))return;const t=b.querySelector(".range-track",e);if(!t)return;const n={min:parseFloat(t.dataset.min||"0"),max:parseFloat(t.dataset.max||"100"),step:parseFloat(t.dataset.step||"1"),dual:t.dataset.dual==="true",ticks:t.dataset.ticks?JSON.parse(t.dataset.ticks):[],disabled:t.dataset.disabled==="true"},i=this.getElements(e,n);if(!i.track)return;const s={minValue:n.dual?parseFloat(((a=i.inputs.min)==null?void 0:a.value)||n.min.toString()):n.min,maxValue:n.dual?parseFloat(((o=i.inputs.max)==null?void 0:o.value)||n.max.toString()):n.max,singleValue:n.dual?n.min:parseFloat(((l=i.inputs.single)==null?void 0:l.value)||n.min.toString()),isDragging:!1,activeHandle:null};this.setState(e,{config:n,state:s,elements:i}),n.disabled||this.setupHandleInteractions(e,i)}getElements(e,t){const n=b.querySelector(".range-track",e),i=b.querySelector(".range-fill",e),s={},a={},o={},l={};return t.dual?(s.min=b.querySelector('[data-handle="min"]',e),s.max=b.querySelector('[data-handle="max"]',e),a.min=b.querySelector('[data-native-input="min"]',e),a.max=b.querySelector('[data-native-input="max"]',e),o.min=b.querySelector('[data-range-input="min"]',e),o.max=b.querySelector('[data-range-input="max"]',e),l.min=b.querySelector('[data-value-display="min"]',e),l.max=b.querySelector('[data-value-display="max"]',e)):(s.single=b.querySelector('[data-handle="single"]',e),a.single=b.querySelector('[data-native-input="single"]',e),o.single=b.querySelector('[data-range-input="single"]',e),l.single=b.querySelector('[data-value-display="single"]',e)),{container:e,track:n,fill:i,handles:s,inputs:a,hiddenInputs:o,valueDisplays:l}}setupHandleInteractions(e,t){const{handles:n}=t;Object.entries(n).forEach(([i,s])=>{s&&(s.addEventListener("mousedown",a=>this.handleStart(a,e,i)),s.addEventListener("touchstart",a=>this.handleStart(a,e,i),{passive:!1}),s.addEventListener("keydown",a=>this.handleKeydown(a,e,i)),s.addEventListener("focus",()=>this.handleFocus(e,i)),s.addEventListener("blur",()=>this.handleBlur(e,i)))}),t.track.addEventListener("click",i=>this.handleTrackClick(i,e))}bindEventListeners(){T.addEventListener(document,"mousemove",e=>this.handleMove(e)),T.addEventListener(document,"mouseup",e=>this.handleEnd(e)),T.addEventListener(document,"touchmove",e=>this.handleMove(e),{passive:!1}),T.addEventListener(document,"touchend",e=>this.handleEnd(e)),T.addEventListener(document,"touchcancel",e=>this.handleEnd(e))}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"range","true")&&this.initializeRange(n),b.findByDataAttribute("range","true",n).forEach(i=>{this.initializeRange(i)})}})})}handleStart(e,t,n){e.preventDefault();const i=this.getState(t);if(!i||i.config.disabled)return;i.state.isDragging=!0,i.state.activeHandle=n;const s=i.elements.handles[n];s&&(s.classList.add("dragging"),s.focus()),t.classList.add("dragging"),document.body.style.userSelect="none"}handleMove(e){const t=Array.from(this.getAllStates().entries()).find(([h,g])=>g.state.isDragging);if(!t)return;e.preventDefault();const[n,i]=t,{config:s,state:a,elements:o}=i,l="touches"in e?e.touches[0].clientX:e.clientX,c=o.track.getBoundingClientRect(),d=Math.max(0,Math.min(1,(l-c.left)/c.width));let f=this.percentageToValue(d,s);f=this.snapToTickIfNeeded(f,s),this.updateValue(n,a.activeHandle,f)}handleEnd(e){const t=Array.from(this.getAllStates().entries()).find(([a,o])=>o.state.isDragging);if(!t)return;const[n,i]=t;i.state.isDragging=!1;const s=i.elements.handles[i.state.activeHandle];s&&s.classList.remove("dragging"),n.classList.remove("dragging"),i.state.activeHandle=null,document.body.style.userSelect="",this.dispatchChangeEvent(n)}handleKeydown(e,t,n){const i=this.getState(t);if(!i||i.config.disabled)return;const{config:s,state:a}=i;let o=!1,l;const c=n==="min"?a.minValue:n==="max"?a.maxValue:a.singleValue;switch(e.key){case"ArrowLeft":case"ArrowDown":l=Math.max(s.min,c-s.step),o=!0;break;case"ArrowRight":case"ArrowUp":l=Math.min(s.max,c+s.step),o=!0;break;case"PageDown":l=Math.max(s.min,c-s.step*10),o=!0;break;case"PageUp":l=Math.min(s.max,c+s.step*10),o=!0;break;case"Home":l=s.min,o=!0;break;case"End":l=s.max,o=!0;break}o&&(e.preventDefault(),l=this.snapToTickIfNeeded(l,s),this.updateValue(t,n,l),this.dispatchChangeEvent(t))}handleTrackClick(e,t){const n=this.getState(t);if(!n||n.config.disabled)return;const{config:i,state:s}=n,a=n.elements.track.getBoundingClientRect(),o=(e.clientX-a.left)/a.width;let l=this.percentageToValue(o,i);if(l=this.snapToTickIfNeeded(l,i),i.dual){const c=Math.abs(l-s.minValue),d=Math.abs(l-s.maxValue),f=c<=d?"min":"max";this.updateValue(t,f,l)}else this.updateValue(t,"single",l);this.dispatchChangeEvent(t)}updateValue(e,t,n){const i=this.getState(e);if(!i)return;const{config:s,state:a,elements:o}=i;s.dual?t==="min"?(n=Math.min(n,a.maxValue),a.minValue=n):t==="max"&&(n=Math.max(n,a.minValue),a.maxValue=n):a.singleValue=n,this.updateVisualElements(e),this.updateFormInputs(e),this.dispatchInputEvent(e)}updateVisualElements(e){const t=this.getState(e);if(!t)return;const{config:n,state:i,elements:s}=t;if(n.dual){const a=this.valueToPercentage(i.minValue,n),o=this.valueToPercentage(i.maxValue,n);s.handles.min&&(s.handles.min.style.left=`${a}%`,s.handles.min.setAttribute("aria-valuenow",i.minValue.toString()),s.handles.min.setAttribute("aria-valuetext",i.minValue.toString())),s.handles.max&&(s.handles.max.style.left=`${o}%`,s.handles.max.setAttribute("aria-valuenow",i.maxValue.toString()),s.handles.max.setAttribute("aria-valuetext",i.maxValue.toString())),s.fill.style.left=`${a}%`,s.fill.style.width=`${o-a}%`,s.valueDisplays.min&&(s.valueDisplays.min.textContent=i.minValue.toString()),s.valueDisplays.max&&(s.valueDisplays.max.textContent=i.maxValue.toString())}else{const a=this.valueToPercentage(i.singleValue,n);s.handles.single&&(s.handles.single.style.left=`${a}%`,s.handles.single.setAttribute("aria-valuenow",i.singleValue.toString()),s.handles.single.setAttribute("aria-valuetext",i.singleValue.toString())),s.fill.style.width=`${a}%`,s.valueDisplays.single&&(s.valueDisplays.single.textContent=i.singleValue.toString())}}updateFormInputs(e){const t=this.getState(e);if(!t)return;const{config:n,state:i,elements:s}=t;n.dual?(s.inputs.min&&(s.inputs.min.value=i.minValue.toString()),s.inputs.max&&(s.inputs.max.value=i.maxValue.toString()),s.hiddenInputs.min&&(s.hiddenInputs.min.value=i.minValue.toString()),s.hiddenInputs.max&&(s.hiddenInputs.max.value=i.maxValue.toString())):(s.inputs.single&&(s.inputs.single.value=i.singleValue.toString()),s.hiddenInputs.single&&(s.hiddenInputs.single.value=i.singleValue.toString()))}percentageToValue(e,t){const n=t.max-t.min;let i=t.min+e*n;return i=Math.round(i/t.step)*t.step,Math.max(t.min,Math.min(t.max,i))}valueToPercentage(e,t){return(e-t.min)/(t.max-t.min)*100}snapToTickIfNeeded(e,t){if(t.ticks.length===0)return e;let n=t.ticks[0],i=Math.abs(e-n);for(const s of t.ticks){const a=Math.abs(e-s);a<i&&(n=s,i=a)}return n}handleFocus(e,t){}handleBlur(e,t){}dispatchInputEvent(e){var a,o,l;const t=this.getState(e);if(!t)return;const{config:n,state:i}=t,s=n.dual?[i.minValue,i.maxValue]:i.singleValue;T.dispatchCustomEvent(e,"range-input",{value:s,dual:n.dual},{bubbles:!0,cancelable:!0}),n.dual?((a=t.elements.hiddenInputs.min)==null||a.dispatchEvent(new Event("input",{bubbles:!0})),(o=t.elements.hiddenInputs.max)==null||o.dispatchEvent(new Event("input",{bubbles:!0}))):(l=t.elements.hiddenInputs.single)==null||l.dispatchEvent(new Event("input",{bubbles:!0}))}dispatchChangeEvent(e){var a,o,l;const t=this.getState(e);if(!t)return;const{config:n,state:i}=t,s=n.dual?[i.minValue,i.maxValue]:i.singleValue;T.dispatchCustomEvent(e,"range-change",{value:s,dual:n.dual},{bubbles:!0,cancelable:!0}),n.dual?((a=t.elements.hiddenInputs.min)==null||a.dispatchEvent(new Event("change",{bubbles:!0})),(o=t.elements.hiddenInputs.max)==null||o.dispatchEvent(new Event("change",{bubbles:!0}))):(l=t.elements.hiddenInputs.single)==null||l.dispatchEvent(new Event("change",{bubbles:!0}))}getValue(e){const t=this.getState(e);if(!t)return null;const{config:n,state:i}=t;return n.dual?[i.minValue,i.maxValue]:i.singleValue}setValue(e,t){const n=this.getState(e);if(!n)return;const{config:i}=n;i.dual&&Array.isArray(t)?(this.updateValue(e,"min",t[0]),this.updateValue(e,"max",t[1])):!i.dual&&typeof t=="number"&&this.updateValue(e,"single",t),this.dispatchChangeEvent(e)}destroyRange(e){this.removeState(e)}destroyAll(){this.clearAllStates()}onDestroy(){}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{On.getInstance().init()}):On.getInstance().init(),window.RangeActions=On,On.getInstance();class mo extends H{bindEventListeners(){document.addEventListener("click",e=>{const t=e.target;if(!(t instanceof HTMLElement))return;const n=t.closest(".rating-star");n&&this.handleClick(e,n)}),document.addEventListener("mouseover",e=>{const t=e.target;if(!(t instanceof HTMLElement))return;const n=t.closest(".rating-star");if(n){const i=e.relatedTarget;(!i||!(i instanceof Node)||!n.contains(i))&&this.handleHover(n)}}),document.addEventListener("mouseout",e=>{const t=e.target;if(!(t instanceof HTMLElement))return;const n=t.closest(".rating-star");if(n){const i=e.relatedTarget;if(!i||!(i instanceof Node)||!n.contains(i)){const s=n.closest('[data-keys-rating="true"]');s&&this.handleHoverEnd(s)}}}),document.addEventListener("keydown",e=>{const t=e.target;if(!(t instanceof HTMLElement))return;const n=t.closest('[data-keys-rating="true"]');n&&this.handleKeyDown(e,n)})}initializeElements(){b.querySelectorAll('[data-keys-rating="true"]').forEach(t=>{this.initializeRating(t)})}initializeRating(e){const t=Array.from(e.querySelectorAll(".rating-star")),n=e.querySelector('[data-rating-input="true"]')||document.querySelector(`#${e.dataset.ratingId}`),i={stars:t,hiddenInput:n,currentValue:parseFloat(e.dataset.value||"0"),maxValue:parseInt(e.dataset.max||"5"),readonly:e.dataset.readonly==="true",disabled:e.dataset.disabled==="true",allowHalf:e.dataset.allowHalf==="true",hoverValue:0};this.setState(e,i),this.updateStars(e,i.currentValue)}handleClick(e,t){e.preventDefault();const n=t.closest('[data-keys-rating="true"]');if(!n)return;const i=this.getState(n);if(!i||i.readonly||i.disabled)return;let a=i.stars.indexOf(t)+1;if(i.allowHalf){const o=t.getBoundingClientRect();a=e.clientX-o.left<o.width/2?a-.5:a}this.setRating(n,a),n.dispatchEvent(new CustomEvent("rating-change",{detail:{value:a},bubbles:!0}))}handleHover(e){const t=e.closest('[data-keys-rating="true"]');if(!t)return;const n=this.getState(t);if(!n||n.readonly||n.disabled)return;const s=n.stars.indexOf(e)+1;n.hoverValue=s,this.updateStars(t,s)}handleHoverEnd(e){const t=this.getState(e);!t||t.readonly||t.disabled||(t.hoverValue=0,this.updateStars(e,t.currentValue))}handleKeyDown(e,t){const n=this.getState(t);if(!n||n.readonly||n.disabled)return;let i=n.currentValue;switch(e.key){case"ArrowRight":case"ArrowUp":e.preventDefault(),i=Math.min(n.maxValue,n.currentValue+1);break;case"ArrowLeft":case"ArrowDown":e.preventDefault(),i=Math.max(0,n.currentValue-1);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.preventDefault();const s=parseInt(e.key);s<=n.maxValue&&(i=s);break;case"Home":e.preventDefault(),i=1;break;case"End":e.preventDefault(),i=n.maxValue;break;default:return}i!==n.currentValue&&this.setRating(t,i)}setRating(e,t){const n=this.getState(e);n&&(n.currentValue=t,this.updateStars(e,t),this.updateHiddenInput(e,t),this.updateLivewire(e,t))}updateStars(e,t){const n=this.getState(e);if(!n)return;const i=n.hoverValue||t;n.stars.forEach((s,a)=>{const o=a+1,l=s.querySelector("[data-keys-icon]");if(!l)return;const c=o<=i,f=`text-${e.dataset.color||"warning"}`,h=["opacity-30","text-neutral-400","dark:text-neutral-500"],g=["text-brand","text-warning","text-success","text-danger","text-neutral-500"];l.classList.remove(...h,...g,f),c?l.classList.add(f):l.classList.add(...h),s.setAttribute("aria-pressed",c?"true":"false")}),e.dataset.value=t.toString()}updateHiddenInput(e,t){const n=this.getState(e);!n||!n.hiddenInput||(n.hiddenInput.value=t.toString(),n.hiddenInput.dispatchEvent(new Event("input",{bubbles:!0})),n.hiddenInput.dispatchEvent(new Event("change",{bubbles:!0})))}updateLivewire(e,t){var s,a;const n=this.getState(e);if(!n||!n.hiddenInput)return;const i=(s=n.hiddenInput)==null?void 0:s.__livewire;if(i&&n.hiddenInput.hasAttribute("wire:model")){const o=n.hiddenInput.getAttribute("wire:model");o&&i.set(o,t)}if(typeof window.Livewire<"u"&&n.hiddenInput.name)try{const o=window.Livewire.find((a=e.closest("[wire\\:id]"))==null?void 0:a.getAttribute("wire:id"));o&&o.set(n.hiddenInput.name,t)}catch{}}getValue(e){const t=this.getState(e);return(t==null?void 0:t.currentValue)||0}setValue(e,t){const n=this.getState(e);n&&!n.readonly&&!n.disabled&&this.setRating(e,t)}onDestroy(){}}mo.getInstance();let pn=class{static isLivewireAvailable(){return typeof window<"u"&&"Livewire"in window}static isLivewireEnabled(e){return e.dataset.livewireEnabled==="true"||e.dataset.livewireMode==="true"||!!e.dataset.wireModel}static getLivewireComponent(e){if(!this.isLivewireAvailable())return null;const t=e.closest("[wire\\:id]");return t?window.Livewire.find(t.getAttribute("wire:id")):null}static getWireModelProperty(e){return e.dataset.wireModel||e.dataset.livewireProperty||null}static updateLivewireProperty(e,t){const n=this.getLivewireComponent(e),i=this.getWireModelProperty(e);if(!(!n||!i))try{n.set(i,t)}catch(s){console.warn("Failed to update Livewire property:",i,s)}}static formatValueForLivewire(e,t){return t?Array.isArray(e)?e:[]:Array.isArray(e)?e[0]||"":e||""}};class bs extends H{initializeElements(){b.findByDataAttribute("select","true").forEach((t,n)=>{this.initializeSelect(t)})}initializeSelect(e){const t=e.dataset.multiple==="true",i={selectedValues:this.readInitialValues(e,t),searchTerm:"",filteredOptions:[]};this.setState(e,i),this.updateOptions(e),this.updateOptionsSelectedState(e),this.updateDisplay(e),this.updateStableInputs(e)}readInitialValues(e,t){if(pn.isLivewireEnabled(e))return[];if(t){const n=b.querySelectorAll(".select-pool-input",e),i=[];return n.forEach(s=>{s.dataset.poolActive==="true"&&s.value&&i.push(s.value)}),i}else{const n=b.querySelector(".select-single-input",e);return n&&n.value?[n.value]:[]}}bindEventListeners(){T.handleDelegatedEvent("click","[data-chip-remove]",(e,t)=>{t.preventDefault(),t.stopPropagation();const n=e.dataset.chipValue,i=b.findClosest(e,'[data-select="true"]');i&&n&&this.removeChip(i,n)}),T.handleDelegatedEvent("click","[data-select-clear]",(e,t)=>{t.preventDefault(),t.stopPropagation();const n=b.findClosest(e,'[data-select="true"]');n&&this.clearSelection(n)}),T.handleDelegatedEvent("click","[data-select-option]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,'[data-select="true"]');n&&this.selectOption(n,e)}),T.handleDelegatedEvent("input","input[data-select-search]",(e,t)=>{const n=b.findClosest(e,'[data-select="true"]');n&&n.dataset.searchable==="true"&&this.handleSearch(n,e.value)}),T.addEventListener(document,"toggle",e=>{var n;const t=e.target;if(t.dataset.keysPopover==="true"&&t.id.startsWith("select-dropdown-")){const i=e,s=t.id.replace("select-dropdown-",""),a=(n=b.querySelector(`[data-select="true"] button[id="${s}"]`))==null?void 0:n.closest('[data-select="true"]');i.newState==="open"?this.handlePopoverOpened(t,a):i.newState==="closed"&&this.handlePopoverClosed(t,a)}})}handlePopoverOpened(e,t){if(t&&t.dataset.searchable==="true"){const n=b.querySelector("input[data-select-search]",e);n&&setTimeout(()=>{n.focus()},0)}}handlePopoverClosed(e,t){if(t){const n=b.querySelector("input[data-select-search]",e);n&&(n.value="",this.handleSearch(t,""))}}selectOption(e,t){var a;const n=this.getState(e),i=t.dataset.value;if(!n||!i||t.getAttribute("aria-disabled")==="true")return;if(e.dataset.multiple==="true"){const o=n.selectedValues.indexOf(i);o>-1?n.selectedValues.splice(o,1):n.selectedValues.push(i)}else{n.selectedValues=[i];const o=b.querySelector(`#select-dropdown-${(a=e.querySelector("button"))==null?void 0:a.id}`);o&&o.hidePopover&&o.hidePopover()}this.setState(e,n),this.updateDisplay(e),this.updateStableInputs(e),this.updateOptionsSelectedState(e),pn.isLivewireEnabled(e)&&this.syncToLivewire(e)}removeChip(e,t){const n=this.getState(e);if(!n)return;const i=n.selectedValues.indexOf(t);i>-1&&(n.selectedValues.splice(i,1),this.setState(e,n),this.updateDisplay(e),this.updateStableInputs(e),this.updateOptionsSelectedState(e),pn.isLivewireEnabled(e)&&this.syncToLivewire(e))}clearSelection(e){const t=this.getState(e);t&&(t.selectedValues=[],this.setState(e,t),this.updateDisplay(e),this.updateStableInputs(e),this.updateOptionsSelectedState(e),pn.isLivewireEnabled(e)&&this.syncToLivewire(e))}handleSearch(e,t){const n=this.getState(e);n&&(n.searchTerm=t.trim().toLowerCase(),this.setState(e,n),this.updateFilteredOptions(e),this.updateOptionsVisibility(e))}updateFilteredOptions(e){const t=this.getState(e);if(!t)return;const n=this.getAllOptions(e);t.searchTerm?t.filteredOptions=n.filter(i=>i.searchableText.includes(t.searchTerm)):t.filteredOptions=n,this.setState(e,t)}updateOptionsVisibility(e){const t=this.getState(e);if(!t)return;const n=b.querySelectorAll("[data-select-option]",e),i=b.querySelector("[data-select-no-results]",e);let s=0;n.forEach(a=>{const o=a,l=o.dataset.value||"";t.filteredOptions.some(d=>d.value===l)?(o.style.display="",s++):o.style.display="none"}),i&&(s===0&&t.searchTerm?i.classList.remove("hidden"):i.classList.add("hidden"))}updateDisplay(e){if(!this.getState(e))return;e.dataset.multiple==="true"?this.updateChipsDisplay(e):this.updateSingleValueDisplay(e),this.updateClearButtonVisibility(e)}updateClearButtonVisibility(e){const t=this.getState(e);if(!t)return;const n=b.querySelector("[data-select-clear]",e);if(!n)return;const i=t.selectedValues.length>0,s=e.dataset.disabled==="true",a=e.dataset.clearable==="true";i&&!s&&a?(n.classList.remove("opacity-0","pointer-events-none"),n.classList.add("opacity-100","pointer-events-auto")):(n.classList.remove("opacity-100","pointer-events-auto"),n.classList.add("opacity-0","pointer-events-none"))}updateChipsDisplay(e){const t=this.getState(e);if(!t)return;const n=b.querySelector("[data-select-chips]",e);if(!n)return;const i=b.querySelectorAll('[data-select-chip="true"]',n),s=b.querySelector("[data-select-placeholder]",e),a=b.querySelector("[data-select-spacer]",e);if(t.selectedValues.length===0)i.forEach(o=>o.remove()),s&&s.classList.remove("hidden"),a&&a.classList.add("hidden");else{s&&s.classList.add("hidden"),a&&a.classList.remove("hidden");const o=Array.from(i).map(l=>l.dataset.chipValue).filter(l=>l);i.forEach(l=>{const c=l.dataset.chipValue;c&&!t.selectedValues.includes(c)&&l.remove()}),t.selectedValues.forEach(l=>{o.includes(l)||this.createChipElement(e,n,l)})}}createChipElement(e,t,n){this.createChipElementFallback(e,t,n)}createChipElementFallback(e,t,n){const i=this.findOptionByValue(e,n),s=i?i.displayLabel:n,a=i?i.htmlContent:s,o=document.createElement("span");o.className="inline-flex items-center font-medium px-2 py-0.5 text-xs rounded-full bg-surface text-text border border-border gap-1.5",o.setAttribute("data-select-chip","true"),o.setAttribute("data-chip-value",n),o.innerHTML=`
            <span class="chip-content inline-flex items-center gap-1.5">${a}</span>
            <button type="button" class="w-4 h-4 flex items-center justify-center rounded-full hover:bg-hover transition-colors focus:outline-none focus:ring-1 focus:ring-border ml-0.5" data-chip-remove data-chip-value="${n}">
                <span class="text-xs leading-none" aria-hidden="true">×</span>
                <span class="sr-only">Remove ${s}</span>
            </button>
        `,t.appendChild(o)}updateSingleValueDisplay(e){const t=this.getState(e);if(!t)return;const n=b.querySelector(".select-value",e);if(n)if(t.selectedValues.length===0){const i=e.dataset.placeholder||"Select option...";n.innerHTML=`<span class="text-muted select-placeholder">${i}</span>`}else{const i=t.selectedValues[0],s=this.findOptionByValue(e,i),a=s?s.htmlContent:i;n.innerHTML=a}}updateStableInputs(e){const t=this.getState(e);if(!t)return;const n=e.dataset.multiple==="true";pn.isLivewireEnabled(e)?this.syncToLivewire(e):n?this.updateMultipleInputPool(e,t.selectedValues):this.updateSingleInput(e,t.selectedValues[0]||"")}updateSingleInput(e,t){const n=b.querySelector(".select-single-input",e);n&&n.value!==t&&(n.value=t,n.dispatchEvent(new Event("change",{bubbles:!0})))}updateMultipleInputPool(e,t){const n=b.querySelectorAll(".select-pool-input",e);n.forEach((s,a)=>{const o=a<t.length,l=o?t[a]:"";s.value!==l&&(s.value=l),s.dataset.poolActive=o?"true":"false",s.style.display=o?"":"none"});const i=n[0];i&&i.dispatchEvent(new Event("change",{bubbles:!0}))}updateOptionsSelectedState(e){const t=this.getState(e);if(!t)return;b.querySelectorAll("[data-select-option]",e).forEach(i=>{const s=i,a=s.dataset.value||"",o=t.selectedValues.includes(a);s.setAttribute("aria-selected",o?"true":"false")})}updateOptions(e){const t=this.getAllOptions(e),n=this.getState(e);n&&(n.filteredOptions=t,this.setState(e,n))}getAllOptions(e){const t=b.querySelectorAll("[data-select-option]",e);return Array.from(t).map(n=>{var c,d;const i=n,s=i.dataset.displayLabel||((c=i.textContent)==null?void 0:c.trim())||"",a=i.cloneNode(!0),o=a.querySelector(".flex-shrink-0.ml-2");o&&o.remove();const l=a.innerHTML.trim();return{element:i,value:i.dataset.value||"",label:((d=i.textContent)==null?void 0:d.trim())||"",displayLabel:s,searchableText:i.dataset.searchableText||s.toLowerCase(),disabled:i.getAttribute("aria-disabled")==="true",htmlContent:l}})}findOptionByValue(e,t){return this.getAllOptions(e).find(i=>i.value===t)||null}syncToLivewire(e){const t=this.getState(e);if(!t||!pn.isLivewireEnabled(e))return;const n=e.dataset.multiple==="true",i=pn.formatValueForLivewire(t.selectedValues,n);pn.updateLivewireProperty(e,i)}setSelectedValues(e,t){const n=this.getState(e);if(!n)return;const i=e.dataset.multiple==="true";n.selectedValues=i?t:t.slice(0,1),this.setState(e,n),this.updateDisplay(e),this.updateStableInputs(e),this.updateOptionsSelectedState(e)}getSelectValue(e){const t=this.getState(e);return t?e.dataset.multiple==="true"?t.selectedValues:t.selectedValues[0]||null:null}}bs.getInstance();class ys extends H{constructor(){super(...arguments),this.resizeCleanup=null}initializeElements(){b.findByDataAttribute("keys-tabs","true").forEach(e=>{this.initializeTabsElement(e)})}initializeTabsElement(e){const t=e.dataset.orientation||"horizontal",n=e.dataset.variant||"default",i=e.dataset.disabled==="true",s=e.dataset.value,a=Array.from(b.querySelectorAll('[data-tabs-trigger="true"]',e)),o=Array.from(b.querySelectorAll('[data-tabs-panel="true"]',e));let l=s||null;if(!l&&a.length>0){const d=a.find(f=>f.getAttribute("aria-disabled")!=="true");l=(d==null?void 0:d.dataset.value)||null}const c={activeTab:l,tabs:a,panels:o,orientation:t,variant:n,disabled:i};this.setState(e,c),this.updateTabsState(e),this.initializeMarker(e),e.classList.add("tabs-initialized")}bindEventListeners(){T.handleDelegatedClick('[data-tabs-trigger="true"]',(e,t)=>{t.preventDefault();const n=b.findClosest(e,'[data-keys-tabs="true"]');n&&e.getAttribute("aria-disabled")!=="true"&&this.activateTab(n,e.dataset.value||"")}),T.handleDelegatedKeydown('[data-tabs-trigger="true"]',(e,t)=>{const n=b.findClosest(e,'[data-keys-tabs="true"]');n&&this.handleKeydown(n,t)}),this.resizeCleanup=T.handleResize(()=>{this.handleResize()},100)}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"keys-tabs","true")&&(this.hasState(n)||this.initializeTabsElement(n)),b.findByDataAttribute("keys-tabs","true",n).forEach(s=>{this.hasState(s)||this.initializeTabsElement(s)})}})})}activateTab(e,t,n=!1){const i=this.getState(e);if(!i||i.disabled)return;const s=i.tabs.find(o=>o.dataset.value===t);if(!s||s.getAttribute("aria-disabled")==="true")return;const a=i.activeTab;i.activeTab=t,this.setState(e,i),this.updateTabsState(e),this.repositionMarker(e,s),n&&s.focus(),T.dispatchCustomEvent(e,"tabs:change",{tabs:e,activeTab:t,previousTab:a})}updateTabsState(e){const t=this.getState(e);t&&(t.tabs.forEach(n=>{const i=n.dataset.value===t.activeTab,s=n.getAttribute("aria-disabled")==="true";n.setAttribute("aria-selected",i?"true":"false"),n.setAttribute("data-state",i?"active":"inactive"),s?n.setAttribute("tabindex","-1"):i?n.setAttribute("tabindex","0"):n.setAttribute("tabindex","-1"),n.id=`tab-${n.dataset.value}`}),t.panels.forEach(n=>{const i=n.dataset.value===t.activeTab;n.setAttribute("data-state",i?"active":"inactive"),n.style.display=i?"block":"none",n.setAttribute("aria-labelledby",`tab-${n.dataset.value}`)}))}handleKeydown(e,t){const n=this.getState(e);if(!n||n.disabled)return;const i=t.target,s=n.tabs.indexOf(i);let a=-1;switch(t.key){case"ArrowLeft":case"ArrowUp":t.preventDefault(),a=n.orientation==="horizontal"?this.getPreviousEnabledTabIndex(n,s):t.key==="ArrowUp"?this.getPreviousEnabledTabIndex(n,s):s;break;case"ArrowRight":case"ArrowDown":t.preventDefault(),a=n.orientation==="horizontal"?this.getNextEnabledTabIndex(n,s):t.key==="ArrowDown"?this.getNextEnabledTabIndex(n,s):s;break;case"Home":t.preventDefault(),a=this.getFirstEnabledTabIndex(n);break;case"End":t.preventDefault(),a=this.getLastEnabledTabIndex(n);break;case"Enter":case" ":t.preventDefault(),i.dataset.value&&this.activateTab(e,i.dataset.value,!0);return}if(a>=0&&a<n.tabs.length){const o=n.tabs[a];o.dataset.value&&this.activateTab(e,o.dataset.value,!0)}}getNextEnabledTabIndex(e,t){for(let n=1;n<e.tabs.length;n++){const i=(t+n)%e.tabs.length;if(e.tabs[i].getAttribute("aria-disabled")!=="true")return i}return t}getPreviousEnabledTabIndex(e,t){for(let n=1;n<e.tabs.length;n++){const i=(t-n+e.tabs.length)%e.tabs.length;if(e.tabs[i].getAttribute("aria-disabled")!=="true")return i}return t}getFirstEnabledTabIndex(e){for(let t=0;t<e.tabs.length;t++)if(e.tabs[t].getAttribute("aria-disabled")!=="true")return t;return 0}getLastEnabledTabIndex(e){for(let t=e.tabs.length-1;t>=0;t--)if(e.tabs[t].getAttribute("aria-disabled")!=="true")return t;return e.tabs.length-1}getTabsState(e){return this.getState(e)||null}setActiveTab(e,t,n=!1){this.activateTab(e,t,n)}initializeMarker(e){const t=this.getState(e);if(!t||!t.activeTab)return;const n=t.tabs.find(i=>i.dataset.value===t.activeTab);n&&setTimeout(()=>{this.repositionMarker(e,n)},10)}repositionMarker(e,t){const n=this.getState(e);if(!n)return;const i=b.querySelector('[data-tab-marker="true"]',e);if(!i)return;const{orientation:s,variant:a}=n;s==="vertical"?this.repositionVerticalMarker(i,t,a):this.repositionHorizontalMarker(i,t,a)}repositionHorizontalMarker(e,t,n){const i=t.offsetWidth,s=t.offsetLeft;if(e.style.width=`${i}px`,n==="pills"){const a=t.offsetHeight,o=t.offsetTop;e.style.height=`${a}px`,e.style.transform=`translate(${s}px, ${o}px)`}else e.style.transform=`translateX(${s}px)`}repositionVerticalMarker(e,t,n){const i=t.offsetHeight,s=t.offsetTop;if(e.style.height=`${i}px`,n==="pills"){const a=t.offsetWidth,o=t.offsetLeft;e.style.width=`${a}px`,e.style.transform=`translate(${o}px, ${s}px)`}else e.style.transform=`translateY(${s}px)`}handleResize(){this.getAllStates().forEach((e,t)=>{if(e.activeTab){const n=e.tabs.find(i=>i.dataset.value===e.activeTab);n&&this.repositionMarker(t,n)}})}onDestroy(){this.resizeCleanup&&(this.resizeCleanup(),this.resizeCleanup=null)}}ys.getInstance();class vs extends H{initializeElements(){b.querySelectorAll("dialog[data-modal]").forEach(e=>{this.initializeModal(e)}),this.setupLivewireIntegration()}initializeModal(e){if(this.hasState(e))return;const t={lastFocusedElement:null};this.setState(e,t),e.addEventListener("close",()=>{this.handleModalClose(e)}),e.addEventListener("cancel",n=>{this.handleModalCancel(e,n)})}bindEventListeners(){T.handleDelegatedClick("[commandfor]",(e,t)=>{const n=e.getAttribute("command"),i=e.getAttribute("commandfor");if(n==="show-modal"&&i){const s=b.getElementById(i);s&&s.matches("dialog[data-modal]")&&this.handleModalOpen(s,e)}}),T.handleDelegatedClick("[data-modal-close]",(e,t)=>{const n=b.findClosest(e,"dialog[data-modal]");n&&n.close()})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;n.matches&&n.matches("dialog[data-modal]")&&this.initializeModal(n),b.querySelectorAll("dialog[data-modal]",n).forEach(s=>{this.initializeModal(s)})}})})}handleModalCancel(e,t){this.dispatchModalEvent(e,"modal:cancel",{originalEvent:t})}setInitialFocus(e){const t=b.querySelector("[autofocus]",e);if(t){t.focus();return}const n=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n.length>0&&n[0].focus()}isModalOpen(e){const t=b.getElementById(e);return t?t.open:!1}dispatchModalEvent(e,t,n={}){T.dispatchCustomEvent(e,t,{modal:e,...n},{bubbles:!0,cancelable:!0})}getModalState(e){const t=b.getElementById(e);return t&&this.getState(t)||null}setupLivewireIntegration(){typeof window.Livewire>"u"||(window.Livewire.on("openModal",e=>{const t=e.id||e.modal;t&&(this.openModal(t),e.wireModel&&this.updateWireModel(t,!0))}),window.Livewire.on("closeModal",e=>{const t=e.id||e.modal;t?(this.closeModal(t),e.wireModel&&this.updateWireModel(t,!1)):this.closeAllModals()}),window.Livewire.on("toggleModal",e=>{const t=e.id||e.modal;t&&this.toggleModal(t)}))}updateWireModel(e,t){var s;const n=b.getElementById(e);if(!n)return;const i=n.getAttribute("wire:model");if(i&&typeof window.Livewire<"u"&&window.Livewire.find){const a=(s=b.findClosest(n,"[wire\\:id]"))==null?void 0:s.getAttribute("wire:id");if(a){const o=window.Livewire.find(a);o&&o.set(i,t)}}}toggleModal(e){const t=b.getElementById(e);return!t||!t.matches("dialog[data-modal]")?(console.warn(`Modal with id "${e}" not found`),!1):t.open?this.closeModal(e):this.openModal(e)}closeAllModals(){b.querySelectorAll("dialog[data-modal][open]").forEach(e=>{e.id&&this.closeModal(e.id)})}openModal(e,t){const n=b.getElementById(e);return!n||!n.matches("dialog[data-modal]")?(console.warn(`Modal with id "${e}" not found`),!1):(this.handleModalOpen(n,t),n.showModal(),this.dispatchLivewireEvent("modalOpened",{id:e,modal:e}),!0)}closeModal(e){const t=b.getElementById(e);return!t||!t.matches("dialog[data-modal]")?(console.warn(`Modal with id "${e}" not found`),!1):(t.close(),this.dispatchLivewireEvent("modalClosed",{id:e,modal:e}),!0)}dispatchLivewireEvent(e,t){typeof window.Livewire<"u"&&window.Livewire.dispatch&&window.Livewire.dispatch(e,t)}handleModalClose(e){const t=this.getState(e);if(!t)return;e.getAttribute("wire:model")&&this.updateWireModel(e.id,!1),t.lastFocusedElement&&document.contains(t.lastFocusedElement)&&t.lastFocusedElement.focus(),t.lastFocusedElement=null,this.setState(e,t),this.dispatchModalEvent(e,"modal:close"),this.dispatchLivewireEvent("modalClosed",{id:e.id,modal:e.id})}handleModalOpen(e,t){const n=this.getState(e);if(!n)return;e.getAttribute("wire:model")&&this.updateWireModel(e.id,!0),n.lastFocusedElement=t||document.activeElement,this.setState(e,n),this.dispatchModalEvent(e,"modal:open",{trigger:t}),this.dispatchLivewireEvent("modalOpened",{id:e.id,modal:e.id}),setTimeout(()=>{this.setInitialFocus(e)},50)}onDestroy(){}}vs.getInstance();const fr={DEFAULT_TIMEOUT:5e3,STACK_OFFSET:72,ANIMATION_DURATION:300},gn={TOAST:'[data-keys-toast="true"]',DISMISS_BUTTON:"[data-toast-dismiss]"};class Mn extends H{initializeElements(){this.initializeToastSystem(),this.setupLivewireIntegration()}initializeToastSystem(){const e=document.documentElement;if(!this.hasState(e)){const t={toasts:new Map,timers:new Map,pausedTimers:new Map,toastCounter:0};this.setState(e,t)}this.discoverToasts()}bindEventListeners(){T.handleDelegatedClick(`${gn.TOAST}[popover] [data-keys-button]${gn.DISMISS_BUTTON}`,(e,t)=>{const n=e.getAttribute("data-toast-dismiss");n&&(t.preventDefault(),t.stopPropagation(),this.dismiss(n))}),T.handleDelegatedEvent("toggle",`${gn.TOAST}[popover]`,e=>{const t=e.id;if(t){const n=e.matches(":popover-open");this.dispatchToastEvent(n?"toast:show":"toast:close",t)}}),T.handleDelegatedClick(`${gn.TOAST}[popover] [data-toast-action]`,(e,t)=>{const n=e.getAttribute("data-toast-action"),i=b.findClosest(e,`${gn.TOAST}[popover]`);n&&i&&(t.preventDefault(),t.stopPropagation(),this.dispatchToastEvent("toast:action",i.id,{action:n}))}),T.handleDelegatedEvent("mouseenter",`${gn.TOAST}[popover]`,e=>{this.pauseTimer(e.id)}),T.handleDelegatedEvent("mouseleave",`${gn.TOAST}[popover]`,e=>{this.resumeTimer(e.id)}),T.handleDelegatedEvent("keydown",`${gn.TOAST}[popover]`,(e,t)=>{const n=t;n.key==="Escape"&&e.hasAttribute("data-dismissible")&&(n.preventDefault(),this.dismiss(e.id))})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&t.querySelectorAll("[data-keys-toast][popover]").length>0&&this.discoverToasts()})})}discoverToasts(){const e=this.getGlobalState();e&&document.querySelectorAll("[data-keys-toast][popover]").forEach(t=>{const n=t.id;n&&e.toasts.set(n,t)})}getGlobalState(){return this.getState(document.documentElement)||null}registerToast(e,t){const n=this.getGlobalState();n&&n.toasts.set(e,t)}setupLivewireIntegration(){typeof window.Livewire>"u"||(window.Livewire.on("showToast",e=>{const t=e.variant||"info";this.show(t,e)}),window.Livewire.on("hideToast",e=>{e.id?this.dismiss(e.id):this.dismissAll()}))}show(e,t={message:""}){const n=this.getGlobalState();if(!n)return!1;const i=t.position||"top-right",s=`toast-${e}-${i}-${++n.toastCounter}`,a=this.createToastElement(s,e,i,t),l=this.calculateStackPosition(i)*fr.STACK_OFFSET;a.style.setProperty("--stack-offset",`${l}px`),document.body.appendChild(a),this.showToastElement(a),a.setAttribute("data-toast-visible","true");const c=t.duration||fr.DEFAULT_TIMEOUT;return!(t.persistent===!0)&&c>0&&this.setTimer(s,c),n.toasts.set(s,a),this.dispatchToastEvent("toast:show",s,t),!0}calculateStackPosition(e){const t=this.getGlobalState();if(!t)return 0;let n=0;return t.toasts.forEach(i=>{i.getAttribute("data-position")===e&&i.getAttribute("data-toast-visible")==="true"&&n++}),n}showToastElement(e){try{e.showPopover()}catch{console.warn("Popover API not supported, using fallback display"),e.style.display="block"}}hideToastElement(e){try{e.hidePopover()}catch{console.warn("Popover API hide failed, using manual hide"),e.style.display="none"}}createToastElement(e,t,n,i){const s=t==="error"?"danger":t,a=document.createElement("div");a.className=this.getPopoverClasses(n,s),a.setAttribute("data-keys-toast","true"),a.setAttribute("data-variant",t),a.setAttribute("data-position",n),a.setAttribute("data-element-type","popover"),a.setAttribute("data-dismissible","true"),a.setAttribute("data-has-icon","true"),a.setAttribute("popover","manual"),a.setAttribute("role","status");const o=s==="danger"||s==="warning"?"assertive":"polite";return a.setAttribute("aria-live",o),a.setAttribute("aria-atomic","true"),a.id=e,i.title&&(a.setAttribute("aria-labelledby",`${e}-title`),a.setAttribute("data-has-title","true")),a.setAttribute("aria-describedby",`${e}-message`),a.innerHTML=`
            <div class="px-4 pt-4 pb-3">
                <div class="flex items-start gap-3">
                    <div class="flex-shrink-0 w-8 h-8 rounded-md flex items-center justify-center ${this.getIconWrapperClasses(s)}">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-icon="true">
                            ${this.getIconPath(s)}
                        </svg>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h3 id="${e}-title" class="hidden font-semibold text-sm leading-5 mb-1"></h3>
                        <div id="${e}-message" class="text-sm opacity-90 leading-5"></div>
                    </div>
                    <div class="flex-shrink-0">
                        <button type="button"
                                class="inline-flex items-center justify-center rounded-md bg-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-6 w-6 text-xs hover:bg-surface active:bg-muted focus:ring-accent text-current opacity-60 hover:opacity-100 -m-1"
                                data-keys-button="true"
                                data-variant="ghost"
                                data-size="xs"
                                data-element-type="button"
                                data-icon-only="true"
                                data-has-icon="true"
                                data-toast-dismiss="${e}"
                                aria-label="Dismiss notification">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            <span class="sr-only">Dismiss</span>
                        </button>
                    </div>
                </div>
            </div>
        `,this.updateToastContent(a,i),a}getPopoverClasses(e,t){let n="max-w-sm w-fit h-fit rounded-lg shadow-lg text-foreground z-[9999] p-0 overflow-visible opacity-100";return n+=" "+this.getVariantClasses(t),n}getVariantClasses(e){const t={info:"border border-info bg-info-subtle",success:"border border-success bg-success-subtle",warning:"border border-warning bg-warning-subtle",danger:"border border-danger bg-danger-subtle",neutral:"border border-neutral bg-neutral-subtle"};return t[e]||t.info}getIconWrapperClasses(e){const t={info:"bg-info text-white",success:"bg-success text-white",warning:"bg-warning text-black",danger:"bg-danger text-white",neutral:"bg-neutral text-white"};return t[e]||t.info}getIconPath(e){const t={info:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>',success:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',warning:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>',danger:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>',neutral:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>'};return t[e]||t.info}dismiss(e){const t=this.getGlobalState();if(!t)return!1;const n=t.toasts.get(e);if(!n)return!1;const i=n.getAttribute("data-position");return this.clearTimer(e),t.pausedTimers.delete(e),n.setAttribute("data-toast-visible","false"),this.hideToastElement(n),t.toasts.delete(e),i&&this.recalculateStackPositions(i),window.setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},fr.ANIMATION_DURATION),this.dispatchToastEvent("toast:dismiss",e),!0}recalculateStackPositions(e){const t=this.getGlobalState();if(!t)return;const n=[];t.toasts.forEach(i=>{i.getAttribute("data-position")===e&&i.getAttribute("data-toast-visible")==="true"&&n.push(i)}),n.forEach((i,s)=>{const a=s*fr.STACK_OFFSET;i.style.setProperty("--stack-offset",`${a}px`)})}dismissAll(){const e=this.getGlobalState();e&&e.toasts.forEach((t,n)=>{t.getAttribute("data-toast-visible")==="true"&&this.dismiss(n)})}success(e,t={}){return this.show("success",{message:e,...t})}error(e,t={}){return this.show("danger",{message:e,...t})}warning(e,t={}){return this.show("warning",{message:e,...t})}info(e,t={}){return this.show("info",{message:e,...t})}updateToastContent(e,t){const n=e.querySelector(`#${e.id}-title`),i=e.querySelector(`#${e.id}-message`),s=e.querySelector("[data-toast-actions]");n&&(t.title?(n.textContent=t.title,n.classList.remove("hidden"),e.setAttribute("data-has-title","true")):(n.classList.add("hidden"),e.removeAttribute("data-has-title"))),i&&t.message&&(i.textContent=t.message),s&&(t.actions?(s.innerHTML=t.actions,s.classList.remove("hidden")):s.classList.add("hidden"));const a=t.duration||fr.DEFAULT_TIMEOUT;e.setAttribute("data-timeout",String(a)),t.persistent===!0&&e.setAttribute("data-persistent","true"),a>0&&!t.persistent&&e.setAttribute("data-auto-hide","true")}setTimer(e,t){const n=this.getGlobalState();if(!n)return;this.clearTimer(e);const i=n.toasts.get(e);i&&i.setAttribute("data-toast-start-time",String(Date.now()));const s=window.setTimeout(()=>{this.dismiss(e)},t);n.timers.set(e,s)}clearTimer(e){const t=this.getGlobalState();if(!t)return;const n=t.timers.get(e);n&&(window.clearTimeout(n),t.timers.delete(e))}pauseTimer(e){const t=this.getGlobalState();if(!t)return;const n=t.timers.get(e),i=t.toasts.get(e);if(n&&i){const s=parseInt(i.getAttribute("data-timeout")||String(fr.DEFAULT_TIMEOUT)),a=parseInt(i.getAttribute("data-toast-start-time")||"0"),o=Date.now()-a,l=Math.max(0,s-o);this.clearTimer(e),t.pausedTimers.set(e,{remaining:l,startTime:Date.now()})}}resumeTimer(e){const t=this.getGlobalState();if(!t)return;const n=t.toasts.get(e),i=t.timers.get(e),s=t.pausedTimers.get(e);if(n&&i)n.getAttribute("data-persistent")==="true"||t.pausedTimers.delete(e);else if(n&&s){const a=n.getAttribute("data-persistent")==="true",o=n.getAttribute("data-auto-hide")==="true";!a&&o&&s.remaining>0&&(this.setTimer(e,s.remaining),t.pausedTimers.delete(e))}}dispatchToastEvent(e,t,n={}){const i=this.getGlobalState();if(!i)return;const s={id:t,toast:t,...n};T.dispatchCustomEvent(document.documentElement,e,s,{bubbles:!0,cancelable:!0});const a=i.toasts.get(t);if(a&&T.dispatchCustomEvent(a,e,s,{bubbles:!0,cancelable:!0}),typeof window.Livewire<"u"){const o=e.replace("toast:","toast");window.Livewire.dispatch(o,s)}}getToastState(e){const t=this.getGlobalState();if(!t)return null;const n=t.toasts.get(e);return n?{id:e,visible:n.getAttribute("data-toast-visible")==="true",open:n.matches(":popover-open")||!1,variant:n.getAttribute("data-variant"),position:n.getAttribute("data-position"),duration:parseInt(n.getAttribute("data-timeout")||"0"),persistent:n.getAttribute("data-persistent")==="true",autoHide:n.getAttribute("data-auto-hide")==="true",hasTitle:n.getAttribute("data-has-title")==="true",hasContent:n.getAttribute("data-has-content")==="true"}:null}onDestroy(){const e=this.getGlobalState();e&&(e.timers.forEach(t=>window.clearTimeout(t)),e.timers.clear(),e.pausedTimers.clear(),e.toasts.forEach(t=>{this.hideToastElement(t),t.setAttribute("data-toast-visible","false")}),e.toasts.clear())}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Mn.getInstance().init()}):Mn.getInstance().init();const lm=Mn.getInstance();window.ToastActions=lm,Mn.getInstance();class ws extends H{initializeElements(){b.findByDataAttribute("dropdown","true").forEach(e=>{this.initializeDropdown(e)}),b.findByDataAttribute("submenu","true").forEach(e=>{this.initializeDropdown(e)})}initializeDropdown(e){const t={isOpen:!1,focusedIndex:-1,menuItems:[],children:[]},n=b.findClosest(e,'[data-submenu="true"]');n&&n!==e&&(t.parent=n),this.setState(e,t),this.updateMenuItems(e),this.initializeSubmenus(e)}initializeSubmenus(e){const t=b.querySelectorAll('[data-submenu="true"]',e),n=this.getState(e);n&&(n.children=Array.from(t),this.setState(e,n)),t.forEach(i=>{this.hasState(i)||this.initializeDropdown(i)})}bindEventListeners(){T.handleDelegatedClick("[data-submenu-trigger], [data-dropdown-trigger], [data-menu-item], [data-menu-checkbox], [data-menu-radio], [data-dropdown-panel], [data-submenu-panel]",(t,n)=>{if(t.matches("[data-submenu-trigger]")){n.preventDefault(),n.stopPropagation();const i=b.findClosest(t,'[data-submenu="true"]');i&&!this.isDisabled(i)&&this.toggleSubmenu(i);return}if(t.matches("[data-dropdown-trigger]")){n.preventDefault(),n.stopPropagation();const i=b.findClosest(t,'[data-dropdown="true"]');i&&!this.isDisabled(i)&&this.toggleDropdown(i);return}if(t.matches("[data-menu-item]")){const i=b.findClosest(t,'[data-dropdown="true"]');i&&(t.dataset.keepOpen==="true"||this.closeDropdown(i));return}if(t.matches("[data-menu-checkbox], [data-menu-radio]")){if(n.stopPropagation(),!(t.dataset.keepOpen!=="false")){const s=b.findClosest(t,'[data-dropdown="true"]');s&&this.closeDropdown(s)}return}if(t.matches("[data-dropdown-panel], [data-submenu-panel]")){n.stopPropagation();return}}),T.addEventListener(document,"click",t=>{const n=t.target;n&&n instanceof Element&&(n.closest("[data-submenu-trigger], [data-dropdown-trigger], [data-menu-item], [data-menu-checkbox], [data-menu-radio], [data-dropdown-panel], [data-submenu-panel]")||this.closeAllDropdowns())});let e=null;T.addEventListener(document,"mouseenter",t=>{const n=b.findClosest(t.target,"[data-submenu-trigger]");if(n&&!this.isMobile()){e&&(clearTimeout(e),e=null);const i=b.findClosest(n,"[data-popover-trigger]");if(i){const s=i.getAttribute("data-popover-trigger"),a=s?document.getElementById(s):null;if(a&&!a.matches(":popover-open")){const o=b.findClosest(n,'[role="menu"]');o&&b.querySelectorAll("[data-submenu-trigger]",o).forEach(c=>{var d;if(c!==n){const f=c.getAttribute("data-popover-trigger");if(f){const h=document.getElementById(f);if(h&&h.matches(":popover-open")){const g=h.style.transition;h.style.transition="none",(d=h.hidePopover)==null||d.call(h),requestAnimationFrame(()=>{h.style.transition=g})}}}}),n.click()}}}},{capture:!0}),T.addEventListener(document,"mouseleave",t=>{const n=b.findClosest(t.target,"[data-submenu-trigger]");if(n&&!this.isMobile()){const i=b.findClosest(n,"[data-popover-trigger]");if(i){const s=i.getAttribute("data-popover-trigger"),a=s?document.getElementById(s):null;if(a&&a.matches(":popover-open")){const o=t.relatedTarget;if(o&&(b.findClosest(o,`#${s}`)||o.id===s))return;e=window.setTimeout(()=>{var d;if(a.matches(":hover"))return;const l=document.querySelector(":hover"),c=l?b.findClosest(l,"[data-submenu-trigger]"):null;(!c||c===n)&&((d=a.hidePopover)==null||d.call(a))},200)}}}},{capture:!0}),T.handleDelegatedKeydown('[data-dropdown="true"]',(t,n)=>{this.handleKeydown(t,n)})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"dropdown","true")&&(this.hasState(n)||this.initializeDropdown(n)),b.hasDataAttribute(n,"submenu","true")&&(this.hasState(n)||this.initializeDropdown(n)),b.findByDataAttribute("dropdown","true",n).forEach(a=>{this.hasState(a)||this.initializeDropdown(a)}),b.findByDataAttribute("submenu","true",n).forEach(a=>{this.hasState(a)||this.initializeDropdown(a)})}})})}toggleDropdown(e){const t=this.getState(e);t&&(t.isOpen?this.closeDropdown(e):this.openDropdown(e))}openDropdown(e){var s;const t=this.getState(e);if(!t||this.isDisabled(e))return;this.closeSiblingDropdowns(e),t.isOpen=!0,t.focusedIndex=-1,this.setState(e,t);const n=b.querySelector("[data-keys-popover]",e),i=b.querySelector("[data-dropdown-trigger]",e);n&&((s=n.showPopover)==null||s.call(n)),i&&i.setAttribute("aria-expanded","true"),this.updateMenuItems(e),this.dispatchDropdownEvent(e,"dropdown:open")}openSubmenu(e){var s;const t=this.getState(e);if(!t||this.isDisabled(e))return;t.isOpen=!0,t.focusedIndex=-1,this.closeSiblingSubmenus(e),this.setState(e,t);const n=b.querySelector("[data-keys-popover]",e),i=b.querySelector("[data-submenu-trigger]",e);if(n)try{(s=n.showPopover)==null||s.call(n)}catch{}i&&i.setAttribute("aria-expanded","true"),this.updateMenuItems(e),this.dispatchDropdownEvent(e,"submenu:open")}closeDropdown(e){var s;const t=this.getState(e);if(!t||!t.isOpen)return;this.closeChildSubmenus(e),t.isOpen=!1,t.focusedIndex=-1,this.setState(e,t);const n=b.querySelector("[data-keys-popover]",e),i=b.querySelector("[data-dropdown-trigger]",e);n&&((s=n.hidePopover)==null||s.call(n)),i&&i.setAttribute("aria-expanded","false"),this.dispatchDropdownEvent(e,"dropdown:close")}closeSubmenu(e){var s;const t=this.getState(e);if(!t||!t.isOpen)return;this.closeChildSubmenus(e),t.isOpen=!1,t.focusedIndex=-1,this.setState(e,t);const n=b.querySelector("[data-keys-popover]",e),i=b.querySelector("[data-submenu-trigger]",e);n&&((s=n.hidePopover)==null||s.call(n)),i&&i.setAttribute("aria-expanded","false"),this.dispatchDropdownEvent(e,"submenu:close")}closeAllDropdowns(){this.getAllStates().forEach((e,t)=>{e.isOpen&&(e.parent||this.closeDropdown(t))})}closeSiblingDropdowns(e){const t=this.getState(e);this.getAllStates().forEach((n,i)=>{if(i!==e&&n.isOpen){const s=(t==null?void 0:t.parent)===i,a=n.parent===e;!s&&!a&&this.closeDropdown(i)}})}closeSiblingSubmenus(e){const t=this.getState(e),n=t==null?void 0:t.parent;if(n){const i=this.getState(n);i==null||i.children.forEach(s=>{s!==e&&this.closeSubmenu(s)})}}closeChildSubmenus(e){const t=this.getState(e);t==null||t.children.forEach(n=>{this.closeSubmenu(n)})}toggleSubmenu(e){const t=this.getState(e);t&&(t.isOpen?this.closeSubmenu(e):this.openSubmenu(e))}isMobile(){return window.innerWidth<768||"ontouchstart"in window}handleKeydown(e,t){const n=this.getState(e);if(n)switch(t.key){case"Enter":case" ":if(!n.isOpen)t.preventDefault(),this.openDropdown(e);else if(n.focusedIndex>=0){t.preventDefault();const i=n.menuItems[n.focusedIndex];i&&i.click()}break;case"Escape":if(n.isOpen){t.preventDefault(),this.closeDropdown(e);const i=b.querySelector("[data-dropdown-trigger]",e);i&&i.focus()}break;case"ArrowDown":n.isOpen?(t.preventDefault(),this.navigateItems(e,1)):(t.preventDefault(),this.openDropdown(e));break;case"ArrowUp":n.isOpen&&(t.preventDefault(),this.navigateItems(e,-1));break;case"Tab":n.isOpen&&this.closeDropdown(e);break}}navigateItems(e,t){const n=this.getState(e);if(!n||!n.isOpen)return;const i=n.menuItems.length;i!==0&&(n.focusedIndex===-1?n.focusedIndex=t>0?0:i-1:(n.focusedIndex+=t,n.focusedIndex>=i?n.focusedIndex=0:n.focusedIndex<0&&(n.focusedIndex=i-1)),this.setState(e,n),this.updateItemFocus(e))}updateItemFocus(e){const t=this.getState(e);t&&t.menuItems.forEach((n,i)=>{i===t.focusedIndex?(n.classList.add("bg-neutral-100","dark:bg-neutral-800"),n.scrollIntoView({block:"nearest"})):n.classList.remove("bg-neutral-100","dark:bg-neutral-800")})}updateMenuItems(e){const t=this.getState(e);if(!t)return;const n=b.querySelectorAll("[data-menu-item], [data-menu-checkbox], [data-menu-radio], [data-submenu-trigger]",e);t.menuItems=Array.from(n).filter(i=>{const s=i;return!s.hasAttribute("disabled")&&s.offsetParent!==null}),this.setState(e,t)}isDisabled(e){return e.dataset.disabled==="true"}dispatchDropdownEvent(e,t,n=null){T.dispatchCustomEvent(e,t,{dropdown:e,...n},{bubbles:!0})}onDestroy(){}}ws.getInstance();class qn extends H{initializeElements(){b.findByDataAttribute("table","true").forEach(e=>{this.initializeTable(e)}),this.setupLivewireIntegration()}initializeTable(e){var i;if(this.hasState(e))return;const t={selectedRows:new Set,sortColumn:null,sortDirection:null,selectAllState:"none"};this.setState(e,t);const n=b.querySelector('[data-sorted="true"]',e);if(n){const s=n.getAttribute("data-sort-key")||((i=n.textContent)==null?void 0:i.trim())||"",a=n.getAttribute("data-direction");t.sortColumn=s,t.sortDirection=a}this.updateSelectionState(e)}bindEventListeners(){T.handleDelegatedClick('[data-sortable="true"]',(e,t)=>{t.preventDefault(),this.handleSort(e)}),T.handleDelegatedChange("[data-table-row-select]",e=>{this.handleRowSelection(e)}),T.handleDelegatedChange("[data-table-select-all]",e=>{this.handleSelectAll(e)}),T.handleDelegatedKeydown('[data-table="true"]',(e,t)=>{this.handleKeyboard(t)})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"table","true")&&this.initializeTable(n),b.findByDataAttribute("table","true",n).forEach(i=>{this.initializeTable(i)})}})})}setupLivewireIntegration(){typeof window.Livewire>"u"||T.addEventListener(document,"livewire:navigated",()=>{this.reinitialize()})}handleSort(e){var a;const t=b.findClosest(e,'[data-table="true"]');if(!t)return;const n=this.getState(t);if(!n)return;const i=e.getAttribute("data-sort-key")||((a=e.textContent)==null?void 0:a.trim())||"";let s="asc";n.sortColumn===i&&(n.sortDirection==="asc"?s="desc":n.sortDirection==="desc"&&(s=null)),n.sortColumn=s?i:null,n.sortDirection=s,this.updateSortUI(t,i,s),this.dispatchSortEvent(t,{column:i,direction:s||"asc",url:e.getAttribute("data-sort-url")||void 0,livewireMethod:e.getAttribute("data-sort-method")||void 0})}updateSortUI(e,t,n){if(b.querySelectorAll('[data-sortable="true"]',e).forEach(s=>{s.setAttribute("data-sorted","false"),s.removeAttribute("data-direction"),b.querySelectorAll(".table-sort-icon",s).forEach(o=>{o.setAttribute("data-icon","heroicon-o-chevron-up-down"),o.classList.remove("opacity-100"),o.classList.add("opacity-0","group-hover:opacity-100")})}),n){const s=e.querySelector(`[data-sort-key="${t}"]`);if(s){s.setAttribute("data-sorted","true"),s.setAttribute("data-direction",n);const a=b.querySelector(".table-sort-icon",s);if(a){const o=n==="asc"?"heroicon-o-chevron-up":"heroicon-o-chevron-down";a.setAttribute("data-icon",o),a.classList.remove("opacity-0","group-hover:opacity-100"),a.classList.add("opacity-100")}}}}handleRowSelection(e){const t=b.findClosest(e,'[data-table="true"]');if(!t)return;const n=this.getState(t);if(!n)return;const i=e.getAttribute("data-row-id");i&&(e.checked?n.selectedRows.add(i):n.selectedRows.delete(i),this.updateSelectionState(t),this.dispatchSelectionEvent(t,Array.from(n.selectedRows)))}handleSelectAll(e){const t=b.findClosest(e,'[data-table="true"]');if(!t)return;const n=this.getState(t);if(!n)return;const i=b.querySelectorAll("[data-table-row-select]",t);e.checked?i.forEach(s=>{s.checked=!0;const a=s.getAttribute("data-row-id");a&&n.selectedRows.add(a)}):i.forEach(s=>{s.checked=!1;const a=s.getAttribute("data-row-id");a&&n.selectedRows.delete(a)}),this.updateSelectionState(t),this.dispatchSelectionEvent(t,Array.from(n.selectedRows))}updateSelectionState(e){const t=this.getState(e);if(!t)return;const n=b.querySelectorAll("[data-table-row-select]",e),i=b.querySelector("[data-table-select-all]",e),s=n.length,a=t.selectedRows.size;a===0?(t.selectAllState="none",i&&(i.checked=!1,i.indeterminate=!1)):a===s?(t.selectAllState="all",i&&(i.checked=!0,i.indeterminate=!1)):(t.selectAllState="some",i&&(i.checked=!1,i.indeterminate=!0)),b.querySelectorAll("[data-table-row]",e).forEach(l=>{const c=l.getAttribute("data-row-id");c&&t.selectedRows.has(c)?(l.setAttribute("data-selected","true"),l.classList.add("table-row-selected")):(l.setAttribute("data-selected","false"),l.classList.remove("table-row-selected"))})}handleKeyboard(e){const t=e.target;e.key===" "&&t.matches('[data-sortable="true"]')&&(e.preventDefault(),this.handleSort(t)),e.key==="Enter"&&t.matches('[data-sortable="true"]')&&(e.preventDefault(),this.handleSort(t))}dispatchSortEvent(e,t){if(T.dispatchCustomEvent(e,"table:sort",t,{bubbles:!0,cancelable:!0}),t.livewireMethod&&window.Livewire){const n=e.getAttribute("wire:id");if(n){const i=window.Livewire.find(n);i&&i.call(t.livewireMethod,t.column,t.direction)}}}dispatchSelectionEvent(e,t){T.dispatchCustomEvent(e,"table:selection",{selectedIds:t},{bubbles:!0,cancelable:!0});const n=e.getAttribute("data-selection-method");if(n&&window.Livewire){const i=e.getAttribute("wire:id");if(i){const s=window.Livewire.find(i);s&&s.call(n,t)}}}reinitialize(){this.clearAllStates(),this.initializeElements()}getSelectedRows(e){const t=this.getState(e);return t?Array.from(t.selectedRows):[]}clearSelection(e){const t=this.getState(e);t&&(t.selectedRows.clear(),this.updateSelectionState(e),this.dispatchSelectionEvent(e,[]))}onDestroy(){}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{qn.getInstance().init()}):qn.getInstance().init(),window.TableActions=qn,qn.getInstance();class _n extends H{initializeElements(){b.querySelectorAll("[data-keys-timepicker]").forEach(e=>{this.initializeTimePicker(e)})}initializeTimePicker(e){if(console.log("🕒 Initializing TimePicker:",e),this.hasState(e)){console.log("🕒 TimePicker already initialized, skipping");return}const t=e.dataset.format||"24",n=e.dataset.showSeconds==="true",i=parseInt(e.dataset.step||"1"),s=e.dataset.minTime||null,a=e.dataset.maxTime||null,o=e.dataset.value||null;console.log("🕒 TimePicker config:",{format:t,showSeconds:n,step:i,minTime:s,maxTime:a,initialValue:o});const l=this.parseTime(o)||this.getCurrentTime(),c={isOpen:!1,format:t,showSeconds:n,hour:l.hour,minute:l.minute,second:l.second,period:l.period||"AM",step:i,minTime:s,maxTime:a,value:o};this.setState(e,c),this.updateDisplay(e),this.updateSelectedStates(e),this.updateClearButtonVisibility(e,o||""),console.log("🕒 TimePicker initialized successfully with state:",c)}bindEventListeners(){T.handleDelegatedClick("[data-timepicker-trigger]",(e,t)=>{console.log("🕒 TimePicker trigger clicked:",e);const n=b.findClosest(e,"[data-keys-timepicker]");if(n&&!this.isDisabled(n)){console.log("🕒 Native popover will handle toggle for:",n);const i=this.getState(n);i&&console.log("🕒 Current TimePicker state:",i)}else console.log("🕒 TimePicker trigger ignored - disabled or not found"),t.preventDefault()}),T.handleDelegatedClick("[data-timepicker-clear]",(e,t)=>{console.log("🕒 TimePicker clear button clicked:",e),t.preventDefault(),t.stopPropagation();const n=b.findClosest(e,"[data-keys-timepicker]");n&&(console.log("🕒 Clearing TimePicker value for:",n),this.clearTime(n))}),T.handleDelegatedClick("[data-timepicker-hour]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]"),i=parseInt(e.dataset.timepickerHour||"0");n&&this.setHour(n,i)}),T.handleDelegatedClick("[data-timepicker-minute]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]"),i=parseInt(e.dataset.timepickerMinute||"0");n&&this.setMinute(n,i)}),T.handleDelegatedClick("[data-timepicker-second]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]"),i=parseInt(e.dataset.timepickerSecond||"0");n&&this.setSecond(n,i)}),T.handleDelegatedClick("[data-timepicker-period]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]"),i=e.dataset.timepickerPeriod;n&&this.setPeriod(n,i)}),T.handleDelegatedClick("[data-timepicker-format]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]"),i=e.dataset.timepickerFormat;n&&this.setFormat(n,i)}),T.handleDelegatedClick("[data-timepicker-now]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]");n&&this.setToCurrentTime(n)}),T.handleDelegatedClick("[data-timepicker-apply]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]");n&&this.applyTime(n)}),T.handleDelegatedClick("[data-timepicker-cancel]",(e,t)=>{t.preventDefault();const n=b.findClosest(e,"[data-keys-timepicker]");n&&this.closeDropdown(n)}),T.addEventListener(document,"click",e=>{const t=e.target;t&&t instanceof Element&&(t.closest("[data-keys-timepicker]")||this.closeAllDropdowns())}),T.handleDelegatedKeydown("[data-keys-timepicker]",(e,t)=>{this.handleKeydown(e,t)})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;n.matches&&n.matches("[data-keys-timepicker]")&&this.initializeTimePicker(n),b.querySelectorAll("[data-keys-timepicker]",n).forEach(i=>{this.initializeTimePicker(i)})}})})}toggleDropdown(e){const t=this.getState(e);t&&(t.isOpen?this.closeDropdown(e):this.openDropdown(e))}openDropdown(e){const t=this.getState(e);if(!t||this.isDisabled(e))return;this.closeAllDropdowns(),t.isOpen=!0,this.setState(e,t);const n=b.querySelector("[data-timepicker-trigger]",e);n&&n.setAttribute("aria-expanded","true"),this.updateSelectedStates(e),this.scrollToSelectedOptions(e),this.dispatchTimePickerEvent(e,"timepicker:open")}closeDropdown(e){const t=this.getState(e);if(!t)return;t.isOpen=!1,this.setState(e,t);const n=b.querySelector("[data-timepicker-trigger]",e),i=b.querySelector("[data-popover]",e);if(n&&n.setAttribute("aria-expanded","false"),i&&"hidePopover"in i)try{i.hidePopover()}catch{console.log("Fallback: triggering click to close popover"),n&&n.click()}else n&&n.click();this.dispatchTimePickerEvent(e,"timepicker:close")}closeAllDropdowns(){this.getAllStates().forEach((e,t)=>{e.isOpen&&this.closeDropdown(t)})}setHour(e,t){const n=this.getState(e);n&&(n.hour=t,this.setState(e,n),this.updateSelectedStates(e),this.updatePreview(e))}setMinute(e,t){const n=this.getState(e);n&&(n.minute=t,this.setState(e,n),this.updateSelectedStates(e),this.updatePreview(e))}setSecond(e,t){const n=this.getState(e);n&&(n.second=t,this.setState(e,n),this.updateSelectedStates(e),this.updatePreview(e))}setPeriod(e,t){const n=this.getState(e);n&&(n.period=t,this.setState(e,n),this.updateSelectedStates(e),this.updatePreview(e))}convertHourBetweenFormats(e,t,n,i){if(t===n)return{hour:e,period:i};if(t==="24"&&n==="12")return e===0?{hour:12,period:"AM"}:e>=1&&e<=11?{hour:e,period:"AM"}:e===12?{hour:12,period:"PM"}:{hour:e-12,period:"PM"};if(t==="12"&&n==="24"){if(!i)throw new Error("Period (AM/PM) required for 12h to 24h conversion");return i==="AM"?e===12?{hour:0}:{hour:e}:e===12?{hour:12}:{hour:e+12}}return{hour:e,period:i}}setFormat(e,t){const n=this.getState(e);if(!n)return;const i=e.dataset.formatMode;if(i==="12"||i==="24"){console.warn(`TimePicker format is locked to ${i}h mode. Cannot switch to ${t}h.`);return}if(n.format!==t){const s=this.convertHourBetweenFormats(n.hour,n.format,t,n.period);n.hour=s.hour,s.period&&(n.period=s.period),n.format=t,this.setState(e,n),this.updateFormatButtons(e),this.updatePeriodSectionVisibility(e),this.updateGridLayout(e),this.updateHourOptions(e),this.updateSelectedStates(e),this.updateDisplay(e),this.updatePreview(e)}}setToCurrentTime(e){const t=this.getState(e);if(!t)return;const n=this.getCurrentTime();if(t.format==="12"){const i=this.convertHourBetweenFormats(n.hour,"24","12");t.hour=i.hour,t.period=i.period}else t.hour=n.hour;t.minute=n.minute,t.second=n.second,this.setState(e,t),this.updateSelectedStates(e),this.scrollToSelectedOptions(e),this.updatePreview(e)}applyTime(e){const t=this.getState(e);if(!t)return;const n=this.formatTimeValue(t);this.setValue(e,n),this.closeDropdown(e),this.dispatchTimePickerEvent(e,"timepicker:change",{value:n,state:{...t}})}clearTime(e){this.setValue(e,""),this.dispatchTimePickerEvent(e,"timepicker:change",{value:"",state:null})}handleKeydown(e,t){const n=this.getState(e);if(n)switch(t.key){case"Enter":case" ":n.isOpen?(t.preventDefault(),this.applyTime(e)):(t.preventDefault(),this.openDropdown(e));break;case"Escape":n.isOpen&&(t.preventDefault(),this.closeDropdown(e));break;case"ArrowUp":n.isOpen?t.preventDefault():(t.preventDefault(),this.incrementTime(e,"minute",1));break;case"ArrowDown":n.isOpen?t.preventDefault():(t.preventDefault(),this.incrementTime(e,"minute",-1));break;case"ArrowLeft":n.isOpen||(t.preventDefault(),this.incrementTime(e,"hour",-1));break;case"ArrowRight":n.isOpen||(t.preventDefault(),this.incrementTime(e,"hour",1));break}}incrementTime(e,t,n){const i=this.getState(e);if(i){switch(t){case"hour":i.format==="12"?(i.hour=i.hour+n,i.hour>12&&(i.hour=1),i.hour<1&&(i.hour=12)):(i.hour=i.hour+n,i.hour>23&&(i.hour=0),i.hour<0&&(i.hour=23));break;case"minute":i.minute=i.minute+n*i.step,i.minute>=60?i.minute=i.minute%60:i.minute<0&&(i.minute=60+i.minute%60,i.minute===60&&(i.minute=0));break;case"second":i.second=i.second+n,i.second>=60?i.second=0:i.second<0&&(i.second=59);break}this.setState(e,i),this.updateDisplay(e),this.dispatchTimePickerEvent(e,"timepicker:increment",{unit:t,direction:n,value:this.formatTimeValue(i)})}}updateDisplay(e){const t=this.getState(e);if(!t)return;const n=this.formatTimeValue(t),i=b.querySelector("[data-timepicker-display]",e);if(i)if(n)i.innerHTML=n;else{const s=e.dataset.placeholder||"Select time...";i.innerHTML=`<span class="text-muted timepicker-placeholder">${s}</span>`}n?e.dataset.hasValue="true":delete e.dataset.hasValue,this.updateClearButtonVisibility(e,n)}updatePreview(e){this.updateDisplay(e)}setValue(e,t){const n=b.querySelector("[data-timepicker-hidden-input]",e),i=b.querySelector("[data-timepicker-display]",e);if(n&&(n.value=t),i)if(t)i.innerHTML=t;else{const a=e.dataset.placeholder||"Select time...";i.innerHTML=`<span class="text-muted timepicker-placeholder">${a}</span>`}t?e.dataset.hasValue="true":delete e.dataset.hasValue,this.updateClearButtonVisibility(e,t);const s=this.getState(e);s&&(s.value=t,this.setState(e,s))}updateClearButtonVisibility(e,t){const n=b.querySelector("[data-timepicker-clear]",e);console.log("🕒 Updating clear button visibility:",{value:t,clearButton:!!n,disabled:e.dataset.disabled}),n&&(t&&!e.dataset.disabled?(n.classList.remove("opacity-0","pointer-events-none"),n.classList.add("pointer-events-auto"),console.log("🕒 Clear button shown")):(n.classList.add("opacity-0","pointer-events-none"),n.classList.remove("pointer-events-auto"),console.log("🕒 Clear button hidden")))}updateSelectedStates(e){const t=this.getState(e);if(!t)return;b.querySelectorAll(".selected",e).forEach(s=>s.classList.remove("selected"));const n=b.querySelector(`[data-timepicker-hour="${t.hour}"]`,e);n&&n.classList.add("selected");const i=b.querySelector(`[data-timepicker-minute="${t.minute}"]`,e);if(i&&i.classList.add("selected"),t.showSeconds){const s=e.querySelector(`[data-timepicker-second="${t.second}"]`);s&&s.classList.add("selected")}if(t.format==="12"){const s=e.querySelector(`[data-timepicker-period="${t.period}"]`);s&&s.classList.add("selected")}}updateFormatButtons(e){const t=this.getState(e);if(!t)return;b.querySelectorAll("[data-timepicker-format]",e).forEach(i=>{i.dataset.timepickerFormat===t.format?(i.classList.add("bg-brand","text-foreground-brand"),i.classList.remove("bg-surface","text-muted")):(i.classList.remove("bg-brand","text-foreground-brand"),i.classList.add("bg-surface","text-muted"))})}updateHourOptions(e){const t=this.getState(e);if(!t)return;const n=b.querySelector("[data-timepicker-hours]",e);if(!n)return;const i=t.format==="12"?Array.from({length:12},(s,a)=>a+1):Array.from({length:24},(s,a)=>a);n.innerHTML="",i.forEach(s=>{const a=document.createElement("button");a.type="button",a.dataset.timepickerHour=s.toString(),a.className="w-full px-3 py-2 text-sm text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 focus:bg-brand focus:text-foreground-brand [&.selected]:bg-brand [&.selected]:text-foreground-brand transition-colors",a.textContent=s.toString().padStart(2,"0"),n.appendChild(a)}),t.format==="12"&&(t.hour<1||t.hour>12)?(t.hour=Math.max(1,Math.min(12,t.hour)),this.setState(e,t),this.updateDisplay(e),this.updatePreview(e)):t.format==="24"&&(t.hour<0||t.hour>23)&&(t.hour=Math.max(0,Math.min(23,t.hour)),this.setState(e,t),this.updateDisplay(e),this.updatePreview(e))}updatePeriodSectionVisibility(e){const t=this.getState(e);if(!t)return;const n=b.querySelector("[data-timepicker-period-section]",e);n&&(n.style.display=t.format==="12"?"block":"none")}updateGridLayout(e){const t=this.getState(e);if(!t)return;const n=b.querySelector("[data-timepicker-grid]",e);if(!n)return;let i=2;t.showSeconds&&i++,t.format==="12"&&i++,n.style.gridTemplateColumns=`repeat(${i}, 1fr)`}scrollToSelectedOptions(e){b.querySelectorAll(".selected",e).forEach(n=>{n.scrollIntoView({block:"center",behavior:"smooth"})})}parseTime(e){var t;if(!e)return null;try{const n=[/^(\d{1,2}):(\d{2})(?::(\d{2}))?\s*(AM|PM)?$/i,/^(\d{1,2}):(\d{2})(?::(\d{2}))?$/];for(const i of n){const s=e.match(i);if(s){const a=parseInt(s[1]),o=parseInt(s[2]),l=parseInt(s[3]||"0"),c=(t=s[4])==null?void 0:t.toUpperCase();return{hour:a,minute:o,second:l,period:c}}}}catch{}return null}getCurrentTime(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}}formatTimeValue(e){const{hour:t,minute:n,second:i,period:s,format:a,showSeconds:o}=e;if(a==="12"){const l=t.toString(),c=n.toString().padStart(2,"0"),d=i.toString().padStart(2,"0");return o?`${l}:${c}:${d} ${s}`:`${l}:${c} ${s}`}else{const l=t.toString().padStart(2,"0"),c=n.toString().padStart(2,"0"),d=i.toString().padStart(2,"0");return o?`${l}:${c}:${d}`:`${l}:${c}`}}isDisabled(e){return e.dataset.disabled==="true"}dispatchTimePickerEvent(e,t,n=null){T.dispatchCustomEvent(e,t,{timepicker:e,...n},{bubbles:!0,cancelable:!0})}getTimePickerState(e){return this.getState(e)||null}setTime(e,t){const n=this.parseTime(t),i=this.getState(e);!n||!i||(i.hour=n.hour,i.minute=n.minute,i.second=n.second,n.period&&(i.period=n.period),this.setState(e,i),this.updateDisplay(e),this.updateSelectedStates(e),this.dispatchTimePickerEvent(e,"timepicker:change",{value:this.formatTimeValue(i),state:{...i}}))}onDestroy(){}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{_n.getInstance().init()}):_n.getInstance().init(),window.TimePickerActions=_n,_n.getInstance();class zn{static isLivewireAvailable(){return typeof window<"u"&&"Livewire"in window}static isLivewireEnabled(e){return e.dataset.livewireEnabled==="true"||e.dataset.livewireMode==="true"||!!e.dataset.wireModel||!!e.querySelector('[data-quill-input="true"][wire\\:model]')}static getLivewireComponent(e){if(!this.isLivewireAvailable())return null;const t=e.closest("[wire\\:id]");return t?window.Livewire.find(t.getAttribute("wire:id")):null}static getWireModelProperty(e){if(e.dataset.wireModel)return e.dataset.wireModel;if(e.dataset.livewireProperty)return e.dataset.livewireProperty;for(const n of e.attributes)if(n.name.startsWith("wire:model"))return n.value;const t=e.querySelector('[data-quill-input="true"]');if(t){for(const n of t.attributes)if(n.name.startsWith("wire:model"))return n.value}return null}static updateLivewireProperty(e,t){const n=this.getLivewireComponent(e),i=this.getWireModelProperty(e);if(!(!n||!i))try{n.set(i,t)}catch(s){console.warn("Failed to update Livewire property:",i,s)}}static formatValueForLivewire(e){return e||""}}class ks extends H{initializeElements(){this.processQuillEditors()}processQuillEditors(){b.findByDataAttribute("quill-editor","true").forEach(t=>this.initializeQuillEditor(t))}bindEventListeners(){}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"quill-editor","true")&&this.initializeQuillEditor(n),b.findByDataAttribute("quill-editor","true",n).forEach(s=>this.initializeQuillEditor(s))}})})}findHiddenInput(e){return b.querySelector('[data-quill-input="true"]',e)}initializeQuillEditor(e){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{this.initializeQuillEditor(e)});return}if(!b.getDataAttribute(e,"editorId")){console.warn("Editor missing editorId, skipping initialization");return}if(this.hasState(e))return;const n=b.querySelector('[data-quill-container="true"]',e),i=this.findHiddenInput(e),s=b.querySelector('[data-quill-live-region="true"]',e);if(!n)return;const a=b.getDataAttribute(n,"quillConfig");let o="";if(i&&i.value)o=i.value;else{const f=b.getDataAttribute(n,"quill-value");if(f)try{o=JSON.parse(f)}catch{o=f}}let l={theme:"snow",modules:{toolbar:[["bold","italic","underline"],[{header:[1,2,!1]}],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}};if(a)try{const f=JSON.parse(a);l={...l,...f}}catch{}let c;try{if(!window.Quill){console.error("Global Quill not available");return}c=new window.Quill(n,l)}catch(f){console.error("Quill initialization failed:",f);return}if(o)try{c.clipboard.dangerouslyPasteHTML(o)}catch(f){console.warn("Failed to set initial content:",f),c.setText(o)}zn.isLivewireEnabled(e);const d={quillInstance:c,containerElement:n,hiddenInput:i,config:l,liveRegion:s,lastAnnouncementTime:0};this.setState(e,d),this.setupContentSync(d),this.setupAccessibilityFeatures(d)}setupContentSync(e){const t=zn.isLivewireEnabled(e.containerElement);e.quillInstance.on("text-change",(n,i,s)=>{t?this.syncToLivewireWithState(e):this.syncQuillToInput(e)}),t?this.syncToLivewireWithState(e):this.syncQuillToInput(e)}syncQuillToInput(e){if(e.hiddenInput){const t=e.quillInstance.root.innerHTML,n=e.hiddenInput.value;t!==n&&(e.hiddenInput.value=t,this.dispatchLivewireInputEvent(e.hiddenInput,t))}}dispatchLivewireInputEvent(e,t){const n=new InputEvent("input",{bubbles:!0,cancelable:!0,inputType:"insertText",data:t});e.dispatchEvent(n);const i=new Event("change",{bubbles:!0,cancelable:!0});e.dispatchEvent(i)}getEditorContent(e){const t=this.getState(e);return t?t.quillInstance.root.innerHTML:""}setEditorContent(e,t){const n=this.getState(e);if(n){try{n.quillInstance.clipboard.dangerouslyPasteHTML(t)}catch(i){console.warn("Failed to set editor content:",i),n.quillInstance.setText(t)}this.syncQuillToInput(n)}}clearEditor(e){const t=this.getState(e);t&&(t.quillInstance.setText(""),this.syncQuillToInput(t))}focusEditor(e){const t=this.getState(e);t&&t.quillInstance.focus()}getQuillInstance(e){const t=this.getState(e);return t?t.quillInstance:null}setupAccessibilityFeatures(e){this.setupKeyboardNavigation(e),this.setupContentAnnouncements(e),this.setupToolbarAccessibility(e)}setupKeyboardNavigation(e){e.quillInstance.keyboard.addBinding({key:"F1",handler:()=>(this.announceKeyboardHelp(e),!1)}),e.containerElement.addEventListener("focus",()=>{e.liveRegion&&this.announceToLiveRegion(e,"Rich text editor focused. Press F1 for keyboard shortcuts.")})}setupContentAnnouncements(e){let t=null;const n=2e3;e.quillInstance.on("text-change",(i,s,a)=>{a==="user"&&(t&&clearTimeout(t),t=window.setTimeout(()=>{const o=e.quillInstance.getText().trim(),l=o?o.split(/\s+/).length:0;l>0&&this.announceToLiveRegion(e,`${l} words written`)},n))}),e.quillInstance.on("selection-change",(i,s,a)=>{if(i&&a==="user"){const o=e.quillInstance.getFormat(i);this.announceFormattingChanges(e,o)}})}setupToolbarAccessibility(e){const t=e.containerElement.querySelector(".ql-toolbar");if(!t)return;t.setAttribute("role","toolbar"),t.setAttribute("aria-label","Rich text editor toolbar");const n=t.querySelectorAll("button");n.forEach((i,s)=>{this.enhanceButtonAccessibility(i),i.setAttribute("tabindex",s===0?"0":"-1")}),t.addEventListener("keydown",i=>{this.handleToolbarKeyboard(i,n)})}enhanceButtonAccessibility(e){const t={"ql-bold":"Bold","ql-italic":"Italic","ql-underline":"Underline","ql-strike":"Strikethrough","ql-link":"Insert link","ql-clean":"Remove formatting",'ql-list[value="ordered"]':"Numbered list",'ql-list[value="bullet"]':"Bullet list",'ql-header[value="1"]':"Heading 1",'ql-header[value="2"]':"Heading 2"};for(const[n,i]of Object.entries(t))if(e.classList.contains(n.split("[")[0])||e.matches(`[${n.split("[")[1]}`)){e.setAttribute("aria-label",i),e.setAttribute("title",i);break}}handleToolbarKeyboard(e,t){const n=Array.from(t).findIndex(s=>s===document.activeElement);if(n===-1)return;let i=n;switch(e.key){case"ArrowLeft":case"ArrowUp":i=n>0?n-1:t.length-1,e.preventDefault();break;case"ArrowRight":case"ArrowDown":i=n<t.length-1?n+1:0,e.preventDefault();break;case"Home":i=0,e.preventDefault();break;case"End":i=t.length-1,e.preventDefault();break;default:return}t[n].setAttribute("tabindex","-1"),t[i].setAttribute("tabindex","0"),t[i].focus()}announceToLiveRegion(e,t){if(!e.liveRegion)return;const n=Date.now();n-e.lastAnnouncementTime<1e3||(e.liveRegion.textContent=t,e.lastAnnouncementTime=n,setTimeout(()=>{e.liveRegion&&(e.liveRegion.textContent="")},3e3))}announceFormattingChanges(e,t){const n=Object.keys(t).filter(i=>t[i]);if(n.length>0){const i=n.map(s=>{switch(s){case"bold":return"bold";case"italic":return"italic";case"underline":return"underlined";case"strike":return"strikethrough";case"header":return`heading ${t[s]}`;case"list":return`${t[s]} list`;default:return s}});this.announceToLiveRegion(e,`Formatting: ${i.join(", ")}`)}}announceKeyboardHelp(e){this.announceToLiveRegion(e,"Keyboard shortcuts: Ctrl+B for bold, Ctrl+I for italic, Ctrl+U for underline, Ctrl+K for link. Use arrow keys to navigate toolbar buttons.")}syncToLivewireWithState(e){const t=e.quillInstance.root.innerHTML,n=zn.formatValueForLivewire(t);zn.updateLivewireProperty(e.containerElement,n)}reinitializeAfterMorph(e){b.querySelector('[data-quill-container="true"]',e)&&!this.hasState(e)&&this.initializeQuillEditor(e)}manualSync(){b.querySelectorAll('[data-quill-container="true"]').forEach(t=>{if(zn.isLivewireEnabled(t)){const n=window.Quill.find(t);if(n){const i=n.root.innerHTML,s=zn.formatValueForLivewire(i);zn.updateLivewireProperty(t,s)}}})}onDestroy(){this.stateManager.forEach(e=>{e.quillInstance.off("text-change")})}}ks.getInstance();class Rn extends H{initializeElements(){b.querySelectorAll("[data-keys-date-picker]").forEach(e=>{this.initializeDatePicker(e)})}initializeDatePicker(e){if(this.hasState(e))return;const t=e.dataset.keysDatePickerConfig;let n={};try{n=t?JSON.parse(t):{}}catch(s){console.error("Failed to parse date picker config:",s)}const i={selectedDate:n.selectedDate||null,startDate:n.startDate||null,endDate:n.endDate||null,format:n.format||"Y-m-d",displayFormat:n.displayFormat||n.format||"Y-m-d",isRange:n.isRange||!1,closeOnSelect:n.closeOnSelect!==!1,isInline:e.dataset.inline==="true",isDisabled:e.dataset.disabled==="true"};this.setState(e,i),this.setupCalendarEventListeners(e)}bindEventListeners(){T.handleDelegatedClick("[data-date-picker-clear]",(e,t)=>{t.preventDefault(),t.stopPropagation();const n=b.findClosest(e,"[data-keys-date-picker]");n&&!this.isDisabled(n)&&this.clearDate(n)}),T.handleDelegatedClick("[data-quick-selector]",(e,t)=>{var s;t.preventDefault();const n=b.findClosest(e,"[data-keys-date-picker]"),i=n?b.querySelector('[data-keys-calendar="true"]',n):null;if(i&&((s=window.KeysUI)!=null&&s.CalendarCore)){const a=e.dataset.quickSelector;a&&i.dispatchEvent(new CustomEvent("quickSelector:clicked",{detail:{value:a},bubbles:!0}))}}),T.handleDelegatedInput("[data-date-picker-input]",e=>{if(!e.readOnly){const t=b.findClosest(e,"[data-keys-date-picker]");t&&!this.isDisabled(t)&&this.handleManualInput(t,e.value)}})}setupCalendarEventListeners(e){const t=b.querySelector('[data-keys-calendar="true"]',e);t&&(t.addEventListener("calendar:dateSelected",n=>{n.stopPropagation();const{selectedDate:i,formattedDate:s}=n.detail;this.handleDateSelected(e,i,s)}),t.addEventListener("calendar:rangeSelected",n=>{n.stopPropagation();const{startDate:i,endDate:s,formattedRange:a}=n.detail;this.handleRangeSelected(e,i,s,a)}),t.addEventListener("calendar:cleared",n=>{n.stopPropagation(),this.handleCalendarCleared(e)}))}handleDateSelected(e,t,n){const i=this.getState(e);i&&(i.selectedDate=t,this.setState(e,i),this.updateDisplay(e,t?this.formatDateForDisplay(t,i.displayFormat):null),this.updateHiddenInput(e,t?ye.formatDateForSubmission(t,i.format):""),i.closeOnSelect&&!i.isInline&&!i.isRange&&this.closePopover(e),this.dispatchDatePickerEvent(e,"datepicker:change",{value:t,formatted:n}))}handleRangeSelected(e,t,n,i){const s=this.getState(e);if(!s)return;s.startDate=t,s.endDate=n,this.setState(e,s);const a=ye.formatRangeForDisplay(t,n,s.displayFormat);this.updateDisplay(e,a);const o=ye.formatRangeForSubmission(t,n,s.format);this.updateHiddenInput(e,o||""),s.closeOnSelect&&t&&n&&!s.isInline&&this.closePopover(e),this.dispatchDatePickerEvent(e,"datepicker:change",{startDate:t,endDate:n,formatted:i})}handleCalendarCleared(e){this.clearDate(e)}clearDate(e){var i;const t=this.getState(e);if(!t)return;t.selectedDate=null,t.startDate=null,t.endDate=null,this.setState(e,t),this.updateDisplay(e,null),this.updateHiddenInput(e,"");const n=b.querySelector('[data-keys-calendar="true"]',e);if(n&&((i=window.KeysUI)!=null&&i.CalendarCore))try{const s=window.KeysUI.CalendarCore;t.isRange?s.setSelectedRange(n,null,null):s.setSelectedDate(n,null)}catch{}t.isInline||this.closePopover(e),this.dispatchDatePickerEvent(e,"datepicker:cleared")}updateDisplay(e,t){const n=b.querySelector("[data-date-picker-display]",e);if(n)if(t)n.innerHTML=t;else{const i=e.dataset.placeholder||"Select date...";n.innerHTML=`<span class="text-muted date-picker-placeholder">${i}</span>`}}updateHiddenInput(e,t){const n=b.querySelector("[data-date-picker-value]",e);n&&(n.value=t)}closePopover(e){setTimeout(()=>{const t=b.findClosest(e,"[data-keys-popover]")||b.querySelector("[data-keys-popover]",e);if(t&&"hidePopover"in t)try{t.hidePopover()}catch{}},150)}handleManualInput(e,t){var s;const n=this.getState(e);if(!n)return;const i=ye.parseInputDate(t,n.displayFormat);if(i){const a=ye.formatDateString(i);this.updateDisplay(e,this.formatDateForDisplay(a,n.displayFormat));const o=b.querySelector('[data-keys-calendar="true"]',e);if(o&&((s=window.KeysUI)!=null&&s.CalendarCore))try{window.KeysUI.CalendarCore.setSelectedDate(o,a)}catch(l){console.warn("Calendar core not available or failed:",l)}}}isDisabled(e){const t=this.getState(e);return t?t.isDisabled:!1}dispatchDatePickerEvent(e,t,n=null){T.dispatchCustomEvent(e,t,{datePicker:e,...n},{bubbles:!0,cancelable:!0})}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;b.hasDataAttribute(n,"keys-date-picker","true")&&this.initializeDatePicker(n),b.findByDataAttribute("keys-date-picker","true",n).forEach(i=>{this.initializeDatePicker(i)})}})})}formatDateForDisplay(e,t){try{const n=new Date(e+"T00:00:00");return isNaN(n.getTime())?e:ye.formatDateForDisplay(e,t)||e}catch(n){return console.warn("Date formatting error:",n),e}}onDestroy(){}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Rn.getInstance().init()}):Rn.getInstance().init(),window.DatePickerActions=Rn,Rn.getInstance();class Ss extends H{constructor(){super(...arguments),this.cleanupFunctions=[]}bindEventListeners(){this.cleanupFunctions.push(T.handleDelegatedClick('[data-add-to-cart="true"]',(e,t)=>this.handleAddToCart(e,t))),this.cleanupFunctions.push(T.handleDelegatedClick(".qty-decrease",(e,t)=>this.handleQuantityChange(e,t,"decrease"))),this.cleanupFunctions.push(T.handleDelegatedClick(".qty-increase",(e,t)=>this.handleQuantityChange(e,t,"increase"))),this.cleanupFunctions.push(T.handleDelegatedInput(".qty-input",(e,t)=>this.handleQuantityInput(e,t))),this.cleanupFunctions.push(T.handleDelegatedKeydown(".qty-input",(e,t)=>this.handleQuantityKeydown(e,t)))}initializeElements(){b.findByDataAttribute("add-to-cart","true").forEach(t=>this.initializeButton(t))}initializeButton(e){const t=this.extractStateFromButton(e);if(t){const n=b.querySelector(".button-text",e);n&&(t.originalText=n.textContent||""),this.setState(e,t),this.updateButtonState(e),this.updateQuantityControls(e)}}extractStateFromButton(e){const t=b.getDataAttribute(e,"productId");return t?{productId:t,variantId:b.getDataAttribute(e,"variantId"),quantity:parseInt(b.getDataAttribute(e,"quantity")||"1"),maxQuantity:parseInt(b.getDataAttribute(e,"maxQuantity")||"99"),stockLevel:b.getDataAttribute(e,"stockLevel")?parseInt(b.getDataAttribute(e,"stockLevel")):void 0,price:b.getDataAttribute(e,"price"),ajaxUrl:b.getDataAttribute(e,"ajaxUrl")||"/cart/add",inCart:b.getDataAttribute(e,"inCart")==="true",isProcessing:!1}:(console.warn("AddToCart button missing required data-product-id attribute"),null)}async handleAddToCart(e,t){if(t.preventDefault(),b.isDisabled(e))return;const n=this.getState(e);if(!n||n.isProcessing)return;const i=this.getQuantityInput(e);if(i&&(n.quantity=parseInt(i.value)||1),!this.validateQuantity(n.quantity,n)){this.showError(e,"Invalid quantity");return}n.isProcessing=!0,this.setState(e,n),this.setButtonState(e,"adding");try{const s=await this.sendCartRequest(n);if(s.success)n.inCart=s.inCart??!0,n.isProcessing=!1,s.stockLevel!==void 0&&(n.stockLevel=s.stockLevel,b.setDataAttribute(e,"stockLevel",s.stockLevel.toString())),this.setState(e,n),this.setButtonState(e,"added"),this.dispatchCartEvent(e,"cart:added",{productId:n.productId,variantId:n.variantId,quantity:n.quantity,cartCount:s.cartCount}),setTimeout(()=>{var a;(a=this.getState(e))!=null&&a.inCart&&this.setButtonState(e,"default")},2e3);else throw new Error(s.error||s.message||"Failed to add to cart")}catch(s){n.isProcessing=!1,this.setState(e,n),this.setButtonState(e,"default"),this.showError(e,s instanceof Error?s.message:"An error occurred")}this.updateQuantityControls(e)}handleQuantityChange(e,t,n){t.preventDefault();const i=b.getDataAttribute(e,"target");if(!i)return;const s=b.getElementById(i);if(!s)return;const a=b.findClosest(e,".add-to-cart-wrapper"),o=a?b.querySelector('[data-add-to-cart="true"]',a):null;if(!o)return;const l=this.getState(o);if(!l)return;const c=parseInt(s.value)||1;let d=c;n==="increase"?d=Math.min(c+1,l.maxQuantity):d=Math.max(c-1,1),d!==c&&(s.value=d.toString(),l.quantity=d,this.setState(o,l),this.dispatchCartEvent(o,"cart:quantity-changed",{productId:l.productId,quantity:d,previousQuantity:c})),this.updateQuantityControls(o)}handleQuantityInput(e,t){const n=b.findClosest(e,".add-to-cart-wrapper"),i=n?b.querySelector('[data-add-to-cart="true"]',n):null;if(!i)return;const s=this.getState(i);if(!s)return;let a=parseInt(e.value)||1;a=Math.max(1,Math.min(a,s.maxQuantity)),e.value!==a.toString()&&(e.value=a.toString()),s.quantity=a,this.setState(i,s),this.updateQuantityControls(i)}handleQuantityKeydown(e,t){[8,9,27,13,35,36,37,39,38,40].includes(t.keyCode)||t.ctrlKey&&[65,67,86,88].includes(t.keyCode)||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}validateQuantity(e,t){return!(e<1||e>t.maxQuantity||t.stockLevel!==void 0&&e>t.stockLevel)}async sendCartRequest(e){var s;const t=new FormData;t.append("product_id",e.productId),t.append("quantity",e.quantity.toString()),e.variantId&&t.append("variant_id",e.variantId);const n=(s=b.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content");n&&t.append("_token",n);const i=await fetch(e.ajaxUrl,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);return await i.json()}setButtonState(e,t){b.removeClasses(e,["adding","added"]),t!=="default"&&b.addClass(e,t);const n=b.querySelector(".button-text",e);if(n){const i=this.getState(e);switch(t){case"adding":const s=b.getDataAttribute(e,"labelToggle");s&&(n.textContent=s);break;case"added":const a=b.getDataAttribute(e,"labelSuccess");a&&(n.textContent=a);break;case"default":i!=null&&i.originalText&&(n.textContent=i.originalText);break}}}updateButtonState(e){const t=this.getState(e);t&&(t.stockLevel!==void 0&&t.stockLevel<=0?(b.toggleAttribute(e,"disabled","true"),b.addClasses(e,["cursor-not-allowed","opacity-50"])):(b.toggleAttribute(e,"disabled"),b.removeClasses(e,["cursor-not-allowed","opacity-50"])))}updateQuantityControls(e){const t=this.getState(e);if(!t)return;const n=b.findClosest(e,".add-to-cart-wrapper");if(!n)return;const i=b.querySelector(".qty-decrease",n);i&&b.toggleAttribute(i,"disabled",t.quantity<=1?"true":void 0);const s=b.querySelector(".qty-increase",n);if(s){const o=t.quantity>=t.maxQuantity||t.stockLevel!==void 0&&t.quantity>=t.stockLevel;b.toggleAttribute(s,"disabled",o?"true":void 0)}const a=this.getQuantityInput(e);a&&(a.max=t.maxQuantity.toString(),t.stockLevel!==void 0&&(a.max=Math.min(t.maxQuantity,t.stockLevel).toString()))}getQuantityInput(e){const t=b.findClosest(e,".add-to-cart-wrapper");return t?b.querySelector(".qty-input",t):null}showError(e,t){this.dispatchCartEvent(e,"cart:error",{message:t}),console.error("Add to Cart Error:",t)}dispatchCartEvent(e,t,n){T.dispatchCustomEvent(e,t,n)}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{t instanceof Element&&b.findByDataAttribute("add-to-cart","true",t).forEach(i=>this.initializeButton(i))})})}destroy(){this.cleanupFunctions.forEach(e=>e()),this.cleanupFunctions=[],super.destroy()}}if(typeof document<"u"){const r=()=>{Ss.getInstance().init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r()}class ri extends H{constructor(){super(),this.cleanupFunctions=[],this.currentModal=null}bindEventListeners(){this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-trigger]",(e,t)=>this.handleThumbnailClick(e,t))),this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-close]",(e,t)=>this.handleCloseClick(e,t))),this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-prev]",(e,t)=>this.handlePrevClick(e,t))),this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-next]",(e,t)=>this.handleNextClick(e,t))),this.cleanupFunctions.push(T.addEventListener(document,"keydown",e=>{this.handleKeydown(e)})),this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-modal]",(e,t)=>this.handleModalBackgroundClick(e,t))),this.cleanupFunctions.push(T.handleDelegatedClick("[data-lightbox-trigger]",(e,t)=>this.handleTriggerClick(e,t)))}initializeElements(){console.log("[Lightbox] Initializing lightbox elements...");const e=b.findByDataAttribute("file-upload-zone");console.log("[Lightbox] Found file upload zones:",e.length),e.forEach(i=>{if(i.getAttribute("data-lightbox")==="true"){const a=i.parentElement;a&&(console.log("[Lightbox] Initializing lightbox for upload zone"),this.initializeLightboxForUpload(a))}});const t=b.findByDataAttribute("lightbox-image");console.log("[Lightbox] Found standalone images:",t.length),t.forEach(i=>{console.log("[Lightbox] Initializing lightbox for image:",i),this.initializeLightboxForImage(i)});const n=b.findByDataAttribute("gallery");console.log("[Lightbox] Found gallery containers:",n.length),n.forEach(i=>{const s=i.getAttribute("data-lightbox")==="true";console.log("[Lightbox] Gallery has lightbox enabled:",s,i),s&&(console.log("[Lightbox] Initializing lightbox for gallery"),this.initializeLightboxForGallery(i))}),console.log("[Lightbox] Initialization complete")}initializeLightboxForUpload(e){const t=e.getAttribute("data-file-upload-id")||e.id||"upload-"+Date.now();this.setState(e,{currentImageIndex:0,images:[],isOpen:!1,elementId:t})}initializeLightboxForImage(e){const t=e.id||"image-"+Date.now(),n=e.closest("[data-lightbox-container]")||e,i=e.querySelector("img")||e;if(i&&i.tagName==="IMG"){const s=this.extractImageData(i,t);this.setState(n,{currentImageIndex:0,images:[s],isOpen:!1,elementId:t})}}initializeLightboxForGallery(e){const t=e.getAttribute("data-gallery-id")||e.id||"gallery-"+Date.now(),n=[];e.querySelectorAll("[data-gallery-image]").forEach((s,a)=>{const o=s.querySelector("img")||s;o&&o.tagName==="IMG"&&n.push(this.extractImageData(o,`${t}-${a}`,a))}),this.setState(e,{currentImageIndex:0,images:n,isOpen:!1,elementId:t})}getFilenameFromSrc(e){try{return new URL(e).pathname.split("/").pop()||"image"}catch{return e.split("/").pop()||"image"}}extractImageData(e,t,n){return{id:t,src:e.src,alt:e.alt||(n!==void 0?`Gallery image ${n+1}`:"Image"),fileName:e.getAttribute("data-filename")||this.getFilenameFromSrc(e.src),fileSize:e.getAttribute("data-filesize")||"Unknown size",fileType:e.getAttribute("data-filetype")||"image"}}handleTriggerClick(e,t){console.log("[Lightbox] Trigger clicked:",e),t.preventDefault(),t.stopPropagation();const n=e.closest(".file-upload-wrapper")||e.closest("[data-gallery]")||e.closest("[data-lightbox-container]")||e.closest("[data-keys-file-upload]");if(!n){console.warn("[Lightbox] No container found for trigger:",e);return}console.log("[Lightbox] Found container:",n);const i=this.getState(n);if(!i){console.warn("[Lightbox] No state found for container");return}console.log("[Lightbox] State:",i);const s=e.getAttribute("data-lightbox-trigger");if(!s){console.warn("[Lightbox] No image ID on trigger");return}const a=i.images.findIndex(o=>o.id===s);if(a===-1){console.warn("[Lightbox] Image not found in state:",s);return}console.log("[Lightbox] Opening lightbox at index:",a),this.openLightbox(n,a)}handleThumbnailClick(e,t){t.preventDefault(),t.stopPropagation();const n=this.findLightboxContainer(e);if(!n)return;const i=this.getState(n);if(!i)return;let s=0;const a=e.getAttribute("data-lightbox-trigger");a&&(s=i.images.findIndex(l=>l.id===a));const o=e.getAttribute("data-gallery-image");o!==null&&(s=parseInt(o,10)),e.hasAttribute("data-lightbox-image")&&(s=0),!(s===-1||s>=i.images.length)&&this.openLightbox(n,s)}handleCloseClick(e,t){t.preventDefault(),this.closeLightbox()}handlePrevClick(e,t){t.preventDefault(),this.navigateToPrevious()}handleNextClick(e,t){t.preventDefault(),this.navigateToNext()}handleKeydown(e){if(!(!this.currentModal||!this.currentModal.open))switch(e.key){case"Escape":e.preventDefault(),this.closeLightbox();break;case"ArrowLeft":e.preventDefault(),this.navigateToPrevious();break;case"ArrowRight":e.preventDefault(),this.navigateToNext();break}}handleModalBackgroundClick(e,t){t.target===e&&this.closeLightbox()}openLightbox(e,t){const n=this.getState(e);if(!n||!n.images.length)return;n.currentImageIndex=t,n.isOpen=!0,this.setState(e,n);const i=this.getOrCreateLightboxModal(e);this.currentModal=i,this.updateModalContent(i,n),i.showModal(),T.dispatchCustomEvent(e,"lightbox:open",{imageIndex:t,image:n.images[t]})}closeLightbox(){if(!this.currentModal)return;const e=this.findContainerElementFromModal(this.currentModal);if(e){const t=this.getState(e);t&&(t.isOpen=!1,this.setState(e,t)),T.dispatchCustomEvent(e,"lightbox:close",{})}this.currentModal.close(),this.currentModal=null}navigateToPrevious(){if(!this.currentModal)return;const e=this.findContainerElementFromModal(this.currentModal);if(!e)return;const t=this.getState(e);if(!t||!t.images.length)return;const n=t.currentImageIndex>0?t.currentImageIndex-1:t.images.length-1;t.currentImageIndex=n,this.setState(e,t),this.updateModalContent(this.currentModal,t),T.dispatchCustomEvent(e,"lightbox:navigate",{direction:"previous",imageIndex:n,image:t.images[n]})}navigateToNext(){if(!this.currentModal)return;const e=this.findContainerElementFromModal(this.currentModal);if(!e)return;const t=this.getState(e);if(!t||!t.images.length)return;const n=t.currentImageIndex<t.images.length-1?t.currentImageIndex+1:0;t.currentImageIndex=n,this.setState(e,t),this.updateModalContent(this.currentModal,t),T.dispatchCustomEvent(e,"lightbox:navigate",{direction:"next",imageIndex:n,image:t.images[n]})}getOrCreateLightboxModal(e){const n=this.getElementId(e)+"-lightbox-modal";let i=document.getElementById(n);return i||(i=this.createLightboxModal(n),document.body.appendChild(i)),i}getElementId(e){const t=e.getAttribute("data-file-upload-id");if(t)return t;const n=e.getAttribute("data-gallery-id");return n||e.id||"lightbox-"+Date.now()}createLightboxModal(e){const t=b.createElement("dialog",{attributes:{id:e,"data-lightbox-modal":"true","data-modal":"true",class:"lightbox-modal p-0 m-0 w-full h-full max-w-none max-h-none bg-black/90 backdrop:bg-black/50"}});return t.innerHTML=`
            <div class="lightbox-content relative w-full h-full flex items-center justify-center p-8">
                <!-- Close button -->
                <button
                    type="button"
                    class="lightbox-close absolute top-4 right-4 z-20 w-10 h-10 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all duration-200 flex items-center justify-center"
                    data-lightbox-close="true"
                    aria-label="Close lightbox"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>

                <!-- Previous button -->
                <button
                    type="button"
                    class="lightbox-nav lightbox-prev absolute left-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all duration-200 flex items-center justify-center"
                    data-lightbox-prev="true"
                    aria-label="Previous image"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                </button>

                <!-- Next button -->
                <button
                    type="button"
                    class="lightbox-nav lightbox-next absolute right-4 top-1/2 -translate-y-1/2 z-20 w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full transition-all duration-200 flex items-center justify-center"
                    data-lightbox-next="true"
                    aria-label="Next image"
                >
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>

                <!-- Image container -->
                <div class="lightbox-image-container flex-1 flex items-center justify-center">
                    <img
                        class="lightbox-image max-w-full max-h-full object-contain"
                        src=""
                        alt=""
                        data-lightbox-image="true"
                    />
                </div>

                <!-- Image info -->
                <div class="lightbox-info absolute bottom-4 left-4 right-4 z-20 bg-black/70 text-white p-4 rounded-lg">
                    <h3 class="lightbox-title text-lg font-semibold mb-1" data-lightbox-title="true"></h3>
                    <div class="lightbox-meta text-sm text-white/80 flex items-center gap-4">
                        <span data-lightbox-size="true"></span>
                        <span data-lightbox-counter="true"></span>
                    </div>
                </div>
            </div>
        `,t}updateModalContent(e,t){const n=t.images[t.currentImageIndex];if(!n)return;const i=e.querySelector("[data-lightbox-image]");i&&(i.src=n.src,i.alt=n.alt);const s=e.querySelector("[data-lightbox-title]");s&&(s.textContent=n.fileName);const a=e.querySelector("[data-lightbox-size]");a&&(a.textContent=n.fileSize);const o=e.querySelector("[data-lightbox-counter]");o&&(o.textContent=`${t.currentImageIndex+1} of ${t.images.length}`);const l=e.querySelector("[data-lightbox-prev]"),c=e.querySelector("[data-lightbox-next]");if(l&&c){const d=t.images.length>1;l.style.display=d?"flex":"none",c.style.display=d?"flex":"none"}}findLightboxContainer(e){const t=b.findClosest(e,"[data-file-upload-id]");if(t)return t;const n=b.findClosest(e,"[data-gallery]");if(n)return n;const i=b.findClosest(e,"[data-lightbox-container]");return i||(e.hasAttribute("data-lightbox-image")?e:null)}findContainerElementFromModal(e){const n=e.id.replace("-lightbox-modal","");let i=document.querySelector(`[data-file-upload-id="${n}"]`);return i||(i=document.querySelector(`[data-gallery-id="${n}"]`),i)||(i=document.getElementById(n),i)?i:null}addImage(e,t){const n=this.getState(e);n&&(n.images.push(t),this.setState(e,n))}addImages(e,t){const n=this.getState(e);n&&(n.images.push(...t),this.setState(e,n))}setImages(e,t){const n=this.getState(e);n&&(n.images=t,this.setState(e,n))}removeImage(e,t){const n=this.getState(e);if(!n)return;const i=n.images.findIndex(s=>s.id===t);i!==-1&&(n.images.splice(i,1),n.currentImageIndex>=n.images.length&&(n.currentImageIndex=Math.max(0,n.images.length-1)),this.setState(e,n),n.images.length===0&&n.isOpen&&this.closeLightbox())}destroy(){this.cleanupFunctions.forEach(e=>e()),this.cleanupFunctions=[],this.currentModal&&(this.currentModal.close(),this.currentModal=null),super.destroy()}}class bo extends H{constructor(){super(),this.lightboxActions=ri.getInstance(),this.init()}initializeElements(){b.findByDataAttribute("gallery","true").forEach(e=>{this.initializeGallery(e)})}bindEventListeners(){T.handleDelegatedKeydown('[data-gallery="true"]',(e,t)=>{const n=e.dataset.galleryId;n&&this.handleKeyboardNavigation(t,n,e)})}extractImageData(e){const t=[];return e.querySelectorAll("[data-gallery-slide]").forEach((i,s)=>{const a=i.querySelector("img");a&&t.push({id:i.getAttribute("data-gallery-slide")||`img-${s}`,src:a.src,alt:a.alt||`Image ${s+1}`,caption:a.getAttribute("data-caption"),thumbnail:a.src,title:a.getAttribute("data-title"),description:a.getAttribute("data-description")})}),t}initializeGallery(e){const t=e.dataset.galleryId;if(!t)return;const n=parseInt(e.dataset.totalImages||"0"),i=this.extractImageData(e);this.setState(e,{currentIndex:0,isAutoplayActive:e.dataset.autoplay==="true",autoplayInterval:null,touchStartX:0,touchEndX:0,isDragging:!1,totalImages:n,images:i}),this.setupGalleryEventListeners(e,t),e.dataset.autoplay==="true"&&this.startAutoplay(t,e),this.updateAccessibility(e,t),this.initializeImageErrorHandling(e),this.preloadAdjacentImages(e,0)}setupGalleryEventListeners(e,t){const n=e.querySelector('[data-gallery-action="prev"]'),i=e.querySelector('[data-gallery-action="next"]');n&&T.addEventListener(n,"click",()=>{this.navigateToImage(t,e,"prev")}),i&&T.addEventListener(i,"click",()=>{this.navigateToImage(t,e,"next")}),e.querySelectorAll("[data-gallery-thumbnail]").forEach((o,l)=>{T.addEventListener(o,"click",()=>{this.goToImage(t,e,l)}),T.addEventListener(o,"keydown",c=>{const d=c;(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),this.goToImage(t,e,l))})});const a=e.querySelector('[data-gallery-action="toggle-autoplay"]');a&&T.addEventListener(a,"click",()=>{this.toggleAutoplay(t,e)}),this.setupTouchEvents(e,t),T.addEventListener(e,"mouseenter",()=>{this.pauseAutoplayOnHover(t)}),T.addEventListener(e,"mouseleave",()=>{this.resumeAutoplayOnHover(t,e)})}setupTouchEvents(e,t){const n=e.querySelector(".gallery-scroll-container");n&&(T.addEventListener(n,"scroll",()=>{this.updateCurrentIndexFromScroll(e,n)}),T.addEventListener(n,"touchstart",i=>{const s=i,a=this.getState(e);a&&(a.touchStartX=s.touches[0].clientX,this.setState(e,a))}),T.addEventListener(n,"touchmove",i=>{const s=i,a=this.getState(e);if(!a||!s.touches[0])return;const o=s.touches[0].clientX,l=s.touches[0].clientY;a.touchStartY||(a.touchStartY=l);const c=Math.abs(o-a.touchStartX),d=Math.abs(l-a.touchStartY);c>10&&c>d&&i.preventDefault(),this.setState(e,a)}))}updateCurrentIndexFromScroll(e,t){const n=t.querySelectorAll(".gallery-slide");if(n.length===0)return;const i=t.getBoundingClientRect(),s=i.left+i.width/2;let a=0,o=1/0;n.forEach((c,d)=>{const f=c.getBoundingClientRect(),h=f.left+f.width/2,g=Math.abs(h-s);g<o&&(o=g,a=d)});const l=this.getState(e);l&&l.currentIndex!==a&&(l.currentIndex=a,this.setState(e,l),this.updateThumbnails(e,a),this.updateCounter(e,a))}handleKeyboardNavigation(e,t,n){switch(e.key){case"ArrowLeft":e.preventDefault(),this.navigateToImage(t,n,"prev");break;case"ArrowRight":e.preventDefault(),this.navigateToImage(t,n,"next");break;case"Home":e.preventDefault(),this.goToImage(t,n,0);break;case"End":e.preventDefault();const i=this.getState(n);i&&this.goToImage(t,n,i.totalImages-1);break;case"Escape":e.preventDefault(),this.handleEscapeKey(t,n);break;case" ":case"Spacebar":e.preventDefault(),this.toggleAutoplay(t,n);break;case"Enter":const s=e.target;if(s.hasAttribute("data-gallery-thumbnail")){e.preventDefault();const a=parseInt(s.getAttribute("data-gallery-thumbnail")||"0");this.goToImage(t,n,a)}break}}handleEscapeKey(e,t){const n=t.dataset.lightbox==="true",i=this.getState(t);n?this.closeLightbox(t):i!=null&&i.isAutoplayActive&&this.pauseAutoplay(e,t),this.announceAction(t,"Gallery navigation closed")}closeLightbox(e){const t=this.lightboxActions.getState(e);t&&t.isOpen&&(this.emitGalleryEvent(e,"gallery:lightboxClose",{}),this.announceAction(e,"Lightbox closed"))}announceAction(e,t){const n=e.querySelector("[data-gallery-live]");n&&(n.textContent=t,setTimeout(()=>{n.textContent===t&&(n.textContent="")},1e3))}navigateToImage(e,t,n){const i=this.getState(t);if(!i)return;const s=parseInt(t.dataset.totalImages||"0"),a=t.dataset.loop==="true";let o=i.currentIndex;n==="next"?(o=i.currentIndex+1,o>=s&&(o=a?0:s-1)):(o=i.currentIndex-1,o<0&&(o=a?s-1:0)),this.goToImage(e,t,o)}goToImage(e,t,n){const i=this.getState(t);if(!i)return;const s=parseInt(t.dataset.totalImages||"0");n<0||n>=s||(i.currentIndex=n,this.setState(t,i),this.updateImageDisplay(t,n),this.updateThumbnails(t,n),this.updateCounter(t,n),this.updateImageDetails(t,n),this.updateNavigationButtons(t,n,s),this.updateAccessibility(t,e),this.announceImageChange(t,n,s),this.preloadAdjacentImages(t,n),this.emitGalleryEvent(t,"gallery:imageChanged",{currentIndex:n,galleryId:e}))}updateImageDisplay(e,t){const n=e.querySelector(".gallery-scroll-container");if(!n)return;const s=n.offsetWidth*t;n.scrollTo({left:s,behavior:"smooth"}),n.querySelectorAll(".gallery-slide").forEach((o,l)=>{const c=o;l===t?(c.classList.add("active"),c.setAttribute("aria-current","true")):(c.classList.remove("active"),c.removeAttribute("aria-current"))})}updateThumbnails(e,t){e.querySelectorAll(".gallery-thumbnail").forEach((i,s)=>{const a=i;s===t?(a.classList.add("active","border-brand-500"),a.classList.remove("border-transparent"),a.setAttribute("aria-current","true")):(a.classList.remove("active","border-brand-500"),a.classList.add("border-transparent"),a.removeAttribute("aria-current"))})}updateCounter(e,t){const n=e.querySelector("[data-gallery-current]");n&&(n.textContent=(t+1).toString())}updateImageDetails(e,t){e.querySelector("[data-gallery-title]"),e.querySelector("[data-gallery-description]")}updateNavigationButtons(e,t,n){const i=e.querySelector('[data-gallery-action="prev"]'),s=e.querySelector('[data-gallery-action="next"]'),a=e.dataset.loop==="true";i&&(i.disabled=!a&&t===0),s&&(s.disabled=!a&&t===n-1)}startAutoplay(e,t){const n=this.getState(t);if(!n)return;const i=parseInt(t.dataset.autoplayDelay||"3000");n.autoplayInterval=window.setInterval(()=>{this.navigateToImageWithScroll(e,t,"next")},i),n.isAutoplayActive=!0,this.setState(t,n),this.updateAutoplayButton(t,!0)}navigateToImageWithScroll(e,t,n){const i=this.getState(t);if(!i)return;const s=parseInt(t.dataset.totalImages||"0"),a=t.dataset.loop==="true";let o=i.currentIndex;n==="next"?(o=i.currentIndex+1,o>=s&&(o=a?0:s-1)):(o=i.currentIndex-1,o<0&&(o=a?s-1:0)),this.goToImage(e,t,o)}pauseAutoplay(e,t){const n=this.getState(t);n&&(n.autoplayInterval&&(clearInterval(n.autoplayInterval),n.autoplayInterval=null),n.isAutoplayActive=!1,this.setState(t,n),this.updateAutoplayButton(t,!1))}toggleAutoplay(e,t){const n=this.getState(t);n&&(n.isAutoplayActive?this.pauseAutoplay(e,t):this.startAutoplay(e,t))}updateAutoplayButton(e,t){const n=e.querySelector(".gallery-autoplay-toggle");if(n){n.setAttribute("aria-pressed",t.toString()),n.setAttribute("aria-label",t?"Pause autoplay":"Resume autoplay");const i=n.querySelector(".button-icon-default"),s=n.querySelector(".button-icon-toggle");i&&s&&(t?(i.classList.remove("opacity-0"),i.classList.add("opacity-100"),s.classList.remove("opacity-100"),s.classList.add("opacity-0")):(i.classList.remove("opacity-100"),i.classList.add("opacity-0"),s.classList.remove("opacity-0"),s.classList.add("opacity-100")))}}pauseAutoplayOnHover(e){const t=document.querySelector(`[data-gallery-id="${e}"]`);if(!t)return;const n=this.getState(t);!(n!=null&&n.isAutoplayActive)||!n.autoplayInterval||(clearInterval(n.autoplayInterval),n.autoplayInterval=null,this.setState(t,n))}resumeAutoplayOnHover(e,t){const n=this.getState(t);if(!(n!=null&&n.isAutoplayActive)||n.autoplayInterval)return;const i=parseInt(t.dataset.autoplayDelay||"3000");n.autoplayInterval=window.setInterval(()=>{this.navigateToImage(e,t,"next")},i),this.setState(t,n)}updateAccessibility(e,t){const n=this.getState(e);if(!n)return;const i=parseInt(e.dataset.totalImages||"0"),s=e.querySelector(`[data-gallery-slide="${n.currentIndex}"]`);s&&(s.setAttribute("aria-current","true"),s.setAttribute("aria-label",`Image ${n.currentIndex+1} of ${i}`)),e.querySelectorAll("[data-gallery-slide]").forEach((o,l)=>{l!==n.currentIndex&&o.removeAttribute("aria-current")})}emitGalleryEvent(e,t,n){const i=new CustomEvent(t,{detail:n,bubbles:!0});e.dispatchEvent(i)}announceImageChange(e,t,n){const i=e.querySelector("[data-gallery-live]");if(i){const a=e.querySelectorAll("[data-gallery-slide]")[t],o=a==null?void 0:a.querySelector("img"),c=`Showing ${(o==null?void 0:o.getAttribute("alt"))||`Image ${t+1}`}, image ${t+1} of ${n}`;i.textContent=c,setTimeout(()=>{i.textContent===c&&(i.textContent="")},1e3)}}initializeImageErrorHandling(e){e.querySelectorAll(".gallery-slide img").forEach(i=>{const s=i;s.complete||this.setImageLoadingState(s,!0),s.addEventListener("load",()=>{this.setImageLoadingState(s,!1),this.setImageErrorState(s,!1)}),s.addEventListener("error",()=>{this.setImageLoadingState(s,!1),this.setImageErrorState(s,!0),this.handleImageError(s,e),console.warn(`Failed to load gallery image: ${s.src}`)})}),e.querySelectorAll(".gallery-thumbnail img").forEach(i=>{const s=i;s.addEventListener("error",()=>{this.setThumbnailErrorState(s,!0),console.warn(`Failed to load gallery thumbnail: ${s.src}`)})})}setImageLoadingState(e,t){const n=e.closest(".gallery-slide");n&&(t?(n.classList.add("gallery-image-loading"),n.setAttribute("aria-busy","true")):(n.classList.remove("gallery-image-loading"),n.removeAttribute("aria-busy")))}setImageErrorState(e,t){const n=e.closest(".gallery-slide");if(n)if(t)n.classList.add("gallery-image-error"),n.setAttribute("aria-label","Image failed to load"),n.querySelector(".gallery-error-placeholder")||this.createImageErrorPlaceholder(n);else{n.classList.remove("gallery-image-error"),n.removeAttribute("aria-label");const i=n.querySelector(".gallery-error-placeholder");i&&i.remove()}}setThumbnailErrorState(e,t){const n=e.closest(".gallery-thumbnail");n&&t&&(n.classList.add("gallery-thumbnail-error"),e.style.display="none",n.querySelector(".gallery-thumbnail-error-placeholder")||this.createThumbnailErrorPlaceholder(n))}createImageErrorPlaceholder(e){const t=document.createElement("div");t.className="gallery-error-placeholder absolute inset-0 flex items-center justify-center bg-surface border border-border rounded-lg",t.innerHTML=`
            <div class="text-center">
                <div class="w-16 h-16 mx-auto mb-3 text-muted opacity-50">
                    <svg xmlns="http:
                        <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                </div>
                <p class="text-sm text-muted">Image failed to load</p>
            </div>
        `,e.appendChild(t)}createThumbnailErrorPlaceholder(e){const t=document.createElement("div");t.className="gallery-thumbnail-error-placeholder absolute inset-0 flex items-center justify-center bg-surface border border-border rounded text-muted",t.innerHTML=`
            <svg xmlns="http:
                <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
            </svg>
        `,e.appendChild(t)}preloadAdjacentImages(e,t){const n=parseInt(e.dataset.totalImages||"0"),i=e.dataset.loop==="true",s=[],a=t-1;a>=0?s.push(a):i&&n>1&&s.push(n-1);const o=t+1;o<n?s.push(o):i&&n>1&&s.push(0),s.forEach(l=>{const c=e.querySelector(`[data-gallery-slide="${l}"]`);if(c){const d=c.querySelector("img");if(d&&d.src&&!d.complete){const f=new Image;f.src=d.src,f.onerror=()=>{console.warn(`Failed to preload image: ${f.src}`)}}}})}handleImageError(e,t){const n=parseInt(e.dataset.retryCount||"0");n<2?(e.dataset.retryCount=(n+1).toString(),setTimeout(()=>{const s=e.src;e.src="",e.src=s+"?retry="+n},1e3*(n+1))):(this.checkGalleryHealth(t),this.announceAction(t,"Image failed to load"))}checkGalleryHealth(e){const t=e.querySelectorAll(".gallery-slide img").length;e.querySelectorAll(".gallery-image-error").length>t/2&&this.setGalleryErrorState(e,!0)}setGalleryErrorState(e,t){t?(e.classList.add("gallery-has-errors"),this.announceAction(e,"Gallery has loading issues. Some images may not be available.")):e.classList.remove("gallery-has-errors")}cleanup(e){const t=document.querySelector(`[data-gallery-id="${e}"]`);if(!t)return;const n=this.getState(t);n!=null&&n.autoplayInterval&&clearInterval(n.autoplayInterval),this.removeState(t)}}class xs extends H{initializeElements(){}bindEventListeners(){}onDestroy(){}}xs.getInstance();class yo extends H{constructor(){super(...arguments),this.failedUrls=new Set,this.DEFAULT_MAX_RETRIES=2,this.RETRY_DELAY=1e3}bindEventListeners(){}setupDynamicObserver(){this.createDynamicObserver(e=>{e.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const n=t;n.hasAttribute("data-keys-image")&&this.initializeImage(n),n.querySelectorAll('[data-keys-image="true"]').forEach(s=>{this.initializeImage(s)})}})})}initializeElements(){b.querySelectorAll('[data-keys-image="true"]').forEach(t=>{this.initializeImage(t)})}initializeImage(e){const t=e.querySelector("img"),n=e.querySelector('[data-image-fallback="true"]');if(!t)return;const i=e.getAttribute("data-fallback-icon")||"heroicon-o-photo",s=e.getAttribute("data-fallback-text")||"Image placeholder",a=parseInt(e.getAttribute("data-retry-attempts")||"2",10),o=e.hasAttribute("data-lightbox"),l={element:e,img:t,fallbackContainer:n,fallbackIcon:i,fallbackText:s,retryCount:0,maxRetries:Math.max(0,Math.min(a,5)),isLoading:!1,hasFailed:!1,hasLightbox:o};this.setState(e,l),this.setupImageErrorHandling(l),t.complete&&!t.naturalWidth&&this.handleImageError(l)}setupImageErrorHandling(e){e.img&&(T.addEventListener(e.img,"error",()=>{this.handleImageError(e)}),T.addEventListener(e.img,"load",()=>{this.handleImageLoad(e)}),e.img.loading==="lazy"&&this.setupLazyLoadingSupport(e))}handleImageError(e){if(!e.img||e.hasFailed)return;const t=e.img.src;if(this.failedUrls.add(t),e.retryCount<e.maxRetries&&!this.isKnownFailedUrl(t)){this.retryImageLoad(e);return}e.hasFailed=!0,this.showFallback(e)}handleImageLoad(e){if(!e.img)return;const t=e.img.src;this.failedUrls.delete(t),e.hasFailed=!1,e.retryCount=0,e.isLoading=!1,this.showImage(e)}retryImageLoad(e){!e.img||e.retryCount>=e.maxRetries||(e.retryCount++,e.isLoading=!0,e.element.setAttribute("data-image-loading","true"),setTimeout(()=>{if(!e.img||e.hasFailed)return;const t=e.img.src;e.img.src="",requestAnimationFrame(()=>{e.img&&(e.img.src=t)})},this.RETRY_DELAY*e.retryCount))}showFallback(e){e.img&&(e.img.style.display="none",e.fallbackContainer&&(e.fallbackContainer.style.display="flex"),e.element.setAttribute("data-fallback-active","true"),e.element.removeAttribute("data-image-active"),e.element.removeAttribute("data-image-loading"),e.hasLightbox&&this.disableLightbox(e),this.updateAccessibility(e,"fallback"),this.dispatchImageEvent(e.element,"fallback",{fallbackIcon:e.fallbackIcon,fallbackText:e.fallbackText,originalSrc:e.img.src}))}showImage(e){e.img&&(e.img.style.display="block",e.fallbackContainer&&(e.fallbackContainer.style.display="none"),e.element.setAttribute("data-image-active","true"),e.element.removeAttribute("data-fallback-active"),e.element.removeAttribute("data-image-loading"),e.hasLightbox&&this.enableLightbox(e),this.updateAccessibility(e,"image"),this.dispatchImageEvent(e.element,"imageLoad",{src:e.img.src}))}setupLazyLoadingSupport(e){if(!e.img||!("IntersectionObserver"in window))return;const t=new IntersectionObserver(n=>{n.forEach(i=>{i.isIntersecting&&t.unobserve(i.target)})},{rootMargin:"50px"});t.observe(e.img)}updateAccessibility(e,t){var i;const n=(i=e.img)==null?void 0:i.getAttribute("alt");t==="fallback"?(e.element.setAttribute("aria-label",e.fallbackText),e.img&&(e.img.setAttribute("alt",""),e.img.setAttribute("aria-hidden","true"))):t==="image"&&n&&(e.element.removeAttribute("aria-label"),e.img&&(e.img.setAttribute("alt",n),e.img.removeAttribute("aria-hidden")))}disableLightbox(e){e.element.removeAttribute("role"),e.element.removeAttribute("tabindex"),e.element.style.cursor="default",e.element.getAttribute("data-lightbox-trigger")&&e.element.setAttribute("data-lightbox-disabled","true")}enableLightbox(e){e.hasLightbox&&(e.element.setAttribute("role","button"),e.element.setAttribute("tabindex","0"),e.element.style.cursor="pointer",e.element.removeAttribute("data-lightbox-disabled"))}isKnownFailedUrl(e){return this.failedUrls.has(e)}dispatchImageEvent(e,t,n={}){const i=new CustomEvent(`image:${t}`,{detail:{element:e,...n},bubbles:!0});e.dispatchEvent(i)}triggerFallback(e){const t=this.getState(e);t&&!t.hasFailed&&this.handleImageError(t)}retryImage(e){const t=this.getState(e);t&&t.hasFailed&&t.img&&(t.hasFailed=!1,t.retryCount=0,this.handleImageLoad(t))}hasImageFailed(e){const t=this.getState(e);return t?t.hasFailed:!1}clearFailedUrlsCache(){this.failedUrls.clear()}isImageLoading(e){const t=this.getState(e);return t?t.isLoading:!1}reloadImage(e,t){const n=this.getState(e);if(n&&n.img)if(t)n.img.src=t;else{const i=n.img.src;n.img.src="",requestAnimationFrame(()=>{n.img&&(n.img.src=i)})}}}class vo extends H{constructor(){super(...arguments),this.chartStates=new Map,this.outsideClickHandlers=new WeakMap}bindEventListeners(){}initializeElements(){b.querySelectorAll('[data-keys-chart="true"]').forEach(t=>{this.initializeChart(t)})}initializeChart(e){const t=e.getAttribute("data-interactive")==="true",n=e.getAttribute("data-animated")==="true",i=Array.from(e.querySelectorAll('[data-chart-item="true"]')),s={element:e,isInteractive:t,isAnimated:n,dataItems:i,activeClickedItem:void 0,tooltipPinned:!1};this.chartStates.set(e,s),t&&i.length>0&&this.setupInteractiveEvents(s),this.setupKeyboardNavigation(s),this.setupOutsideClickHandler(s),n&&this.triggerAnimations(s)}setupInteractiveEvents(e){e.dataItems.forEach((t,n)=>{t.addEventListener("mouseenter",i=>{const s=i.target;(!e.tooltipPinned||e.activeClickedItem===s)&&this.showTooltip(e,s)}),t.addEventListener("mouseleave",()=>{e.tooltipPinned||this.hideTooltip(e)}),t.addEventListener("click",i=>{this.handleDataItemClick(e,i.target)})})}setupKeyboardNavigation(e){if(!e.isInteractive||e.dataItems.length===0)return;const t=e.dataItems[0];if(t){t.setAttribute("tabindex","0"),t.setAttribute("role","button");const n=t.getAttribute("data-label")||"",i=t.getAttribute("data-value")||"";t.setAttribute("aria-label",`${n}: ${i}`)}e.dataItems.forEach((n,i)=>{if(!n.getAttribute("aria-label")){const a=n.getAttribute("data-label")||"",o=n.getAttribute("data-value")||"";n.setAttribute("aria-label",`${a}: ${o}`)}n.addEventListener("keydown",a=>{this.handleKeyboardNavigation(e,a,i)})})}setupOutsideClickHandler(e){const t=n=>{const i=n.target;e.tooltipPinned&&!e.element.contains(i)&&(this.hideTooltip(e),e.tooltipPinned=!1,e.activeClickedItem=void 0)};this.outsideClickHandlers.set(e.element,t),document.addEventListener("click",t)}destroyChart(e){const t=this.outsideClickHandlers.get(e);t&&(document.removeEventListener("click",t),this.outsideClickHandlers.delete(e)),this.chartStates.delete(e)}handleKeyboardNavigation(e,t,n){let i=-1;switch(t.key){case"ArrowRight":case"ArrowDown":i=(n+1)%e.dataItems.length;break;case"ArrowLeft":case"ArrowUp":i=n===0?e.dataItems.length-1:n-1;break;case"Home":i=0;break;case"End":i=e.dataItems.length-1;break;case"Enter":case" ":this.handleDataItemClick(e,t.target),t.preventDefault();return}i!==-1&&(t.preventDefault(),this.focusDataItem(e,i))}focusDataItem(e,t){e.dataItems.forEach(i=>{i.setAttribute("tabindex","-1")});const n=e.dataItems[t];n&&(n.setAttribute("tabindex","0"),n.focus())}showTooltip(e,t){const n=this.extractItemData(t);if(!n)return;let i=e.element.querySelector("[data-chart-tooltip]");i||(i=this.createTooltip(e));const s=t.hasAttribute("data-chart-pie-slice");let a;if(s){const o=t.getAttribute("data-percentage")||"0";a=`${n.label}: ${this.formatTooltipValue(n.value)} (${o}%)`}else a=`${n.label}: ${this.formatTooltipValue(n.value)}`;i.textContent=a,this.positionTooltip(i,t),i.style.opacity="1",i.style.pointerEvents="none"}hideTooltip(e){const t=e.element.querySelector("[data-chart-tooltip]");t&&(t.style.opacity="0")}createTooltip(e){const t=document.createElement("div");return t.setAttribute("data-chart-tooltip","true"),t.className="chart-tooltip absolute px-2 py-1 text-xs font-medium pointer-events-none opacity-0 transition-opacity duration-200",e.element.appendChild(t),t}positionTooltip(e,t){var o;const n=t.getBoundingClientRect(),i=((o=e.offsetParent)==null?void 0:o.getBoundingClientRect())||{left:0,top:0},s=n.left-i.left+n.width/2-e.offsetWidth/2,a=n.top-i.top-e.offsetHeight-8;e.style.left=`${Math.max(0,s)}px`,e.style.top=`${Math.max(0,a)}px`}formatTooltipValue(e){const t=parseFloat(e);return isNaN(t)?e:t.toLocaleString()}extractItemData(e){const t=e.getAttribute("data-index"),n=e.getAttribute("data-value"),i=e.getAttribute("data-label");return t===null||n===null||i===null?null:{index:parseInt(t),value:n,label:i}}handleDataItemClick(e,t){var s;const n=this.extractItemData(t);if(!n)return;e.activeClickedItem===t&&e.tooltipPinned?(this.hideTooltip(e),e.tooltipPinned=!1,e.activeClickedItem=void 0):(this.showTooltip(e,t),e.tooltipPinned=!0,e.activeClickedItem=t),t.blur();const i=new CustomEvent("chart:item:click",{detail:{...n,element:t,chart:e.element},bubbles:!0,cancelable:!0});if(e.element.dispatchEvent(i),"Livewire"in window){const a=e.element.closest("[wire\\:id]");if(a){const o=a.getAttribute("wire:id");o&&((s=window.Livewire.find(o))==null||s.$dispatch("chart-item-clicked",{index:n.index,value:n.value,label:n.label}))}}}triggerAnimations(e){const i=e.dataItems.length*100+800;setTimeout(()=>{const s=new CustomEvent("chart:animation:complete",{detail:{chart:e.element},bubbles:!0});e.element.dispatchEvent(s)},i)}refreshChart(e){const t=this.chartStates.get(e);t&&(t.dataItems=Array.from(e.querySelectorAll('[data-chart-item="true"]')),t.isInteractive&&this.setupInteractiveEvents(t),t.isAnimated&&this.triggerAnimations(t))}updateChartData(e,t){const n=new CustomEvent("chart:data:update",{detail:{chart:e,data:t},bubbles:!0});e.dispatchEvent(n)}}class Mu extends H{bindEventListeners(){document.addEventListener("input",e=>{const t=e.target;t.matches("[data-color-input]")&&this.handleColorInput(e),t.matches("[data-text-input]")&&this.handleTextInput(e)}),document.addEventListener("blur",e=>{e.target.matches("[data-text-input]")&&this.handleTextBlur(e)},!0),document.addEventListener("keydown",e=>{e.target.matches("[data-text-input]")&&this.handleKeydown(e)})}initializeElements(){b.querySelectorAll('[data-keys-color-picker="true"]').forEach(t=>{this.initializeColorPicker(t)})}initializeColorPicker(e){const t=b.querySelector("[data-color-input]",e),n=b.querySelector("[data-text-input]",e);if(!t||!n){console.warn("ColorPicker: Required input elements not found");return}const i={colorInput:t,textInput:n,isUpdating:!1};this.setState(e,i)}handleColorInput(e){const t=e.target,n=t.closest('[data-keys-color-picker="true"]');if(!n)return;const i=this.getState(n);if(!i||i.isUpdating)return;const s=t.value.toUpperCase();i.isUpdating=!0,i.textInput.value=s,this.dispatchChangeEvent(i.colorInput),i.isUpdating=!1}handleTextInput(e){const t=e.target,n=t.closest('[data-keys-color-picker="true"]');if(!n)return;const i=this.getState(n);if(!i||i.isUpdating)return;const s=t.value;this.isValidHexColor(s)&&(i.isUpdating=!0,i.colorInput.value=s.toUpperCase(),i.isUpdating=!1)}handleTextBlur(e){const t=e.target,n=t.closest('[data-keys-color-picker="true"]');if(!n)return;const i=this.getState(n);if(!i)return;let s=t.value.trim();s.length>0&&!s.startsWith("#")&&(s="#"+s),this.isValidHexColor(s)?(s=s.toUpperCase(),i.isUpdating=!0,i.textInput.value=s,i.colorInput.value=s,this.dispatchChangeEvent(i.colorInput),i.isUpdating=!1):s!==""&&(i.isUpdating=!0,i.textInput.value=i.colorInput.value,i.isUpdating=!1)}handleKeydown(e){const n=e.target.closest('[data-keys-color-picker="true"]');if(!n)return;const i=this.getState(n);i&&e.key==="Enter"&&(e.preventDefault(),i.colorInput.focus(),i.colorInput.click())}isValidHexColor(e){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(e)}dispatchChangeEvent(e){const t=new Event("change",{bubbles:!0});e.dispatchEvent(t)}onDestroy(){}}class As extends H{constructor(){super(...arguments),this.sidebars=new Map}initializeElements(){b.querySelectorAll('[data-keys-sidebar="true"]').forEach(t=>{const n=t.id,i=document.querySelector(`[data-sidebar-overlay][data-sidebar-target="${n}"]`),s=Array.from(document.querySelectorAll(`[data-sidebar-toggle="${n}"]`));t.querySelectorAll("details[data-keys-sidebar-section]").forEach(o=>{const l=o;l.hasAttribute("open")||(l.dataset.originallyCollapsed="true")}),this.sidebars.set(n,{sidebar:t,overlay:i,toggleButtons:s})}),this.updateAllToggleIcons()}bindEventListeners(){document.addEventListener("click",e=>{const n=e.target.closest("[data-sidebar-toggle]");if(n){const i=n.dataset.sidebarToggle;i&&this.toggleSidebar(i)}}),document.addEventListener("click",e=>{const t=e.target;if(t.matches("[data-sidebar-overlay]")){const n=t.dataset.sidebarTarget;n&&this.closeSidebar(n)}}),document.addEventListener("keydown",e=>{e.key==="Escape"&&this.closeAllSidebars()}),window.addEventListener("resize",()=>{this.updateAllToggleIcons()}),document.addEventListener("sidebar:toggle",e=>{const{sidebarId:t}=e.detail;t&&this.toggleSidebar(t)}),document.addEventListener("sidebar:open",e=>{const{sidebarId:t}=e.detail;t&&this.openSidebar(t)}),document.addEventListener("sidebar:close",e=>{const{sidebarId:t}=e.detail;t&&this.closeSidebar(t)})}toggleSidebar(e){const t=this.sidebars.get(e);if(!t){console.error(`[SidebarActions] Sidebar not found: ${e}`);return}const{sidebar:n}=t;n.dataset.collapsed==="true"?this.openSidebar(e):this.closeSidebar(e)}openSidebar(e){const t=this.sidebars.get(e);if(!t){console.error(`[SidebarActions] Sidebar not found: ${e}`);return}const{sidebar:n,overlay:i,toggleButtons:s}=t;n.dataset.collapsed="false",n.classList.remove("sidebar-collapsed"),n.querySelectorAll("details[data-keys-sidebar-section]").forEach(o=>{const l=o;l.dataset.originallyCollapsed==="true"&&l.removeAttribute("open")}),i&&(i.classList.remove("opacity-0","pointer-events-none"),i.classList.add("opacity-100")),this.updateToggleIcons(s,e),n.dispatchEvent(new CustomEvent("sidebar:opened",{detail:{sidebarId:e}})),console.log(`[SidebarActions] Opened sidebar: ${e}`)}closeSidebar(e){const t=this.sidebars.get(e);if(!t){console.error(`[SidebarActions] Sidebar not found: ${e}`);return}const{sidebar:n,overlay:i,toggleButtons:s}=t;n.dataset.collapsed="true",n.classList.add("sidebar-collapsed"),n.querySelectorAll("details[data-keys-sidebar-section]").forEach(o=>{o.setAttribute("open","")}),i&&(i.classList.remove("opacity-100"),i.classList.add("opacity-0","pointer-events-none")),this.updateToggleIcons(s,e),n.dispatchEvent(new CustomEvent("sidebar:closed",{detail:{sidebarId:e}})),console.log(`[SidebarActions] Closed sidebar: ${e}`)}closeAllSidebars(){this.sidebars.forEach((e,t)=>{this.closeSidebar(t)})}updateAllToggleIcons(){this.sidebars.forEach(({toggleButtons:e},t)=>{this.updateToggleIcons(e,t)})}updateToggleIcons(e,t){const n=window.innerWidth<1024,i=this.sidebars.get(t);if(!i)return;const{sidebar:s}=i,a=s.dataset.collapsed==="true";e.forEach(o=>{const l=o.dataset.mobileIcon||"heroicon-o-x-mark",c=o.dataset.desktopIcon||"heroicon-o-chevron-up-down",d=o.querySelector("[data-icon]");if(!d)return;const f=d.querySelector("svg");if(!f)return;const h=n&&!a?l:c;d.setAttribute("data-icon-name",h),this.updateIconSvg(f,h)})}updateIconSvg(e,t){const i={"heroicon-o-x-mark":"M6 18L18 6M6 6l12 12","heroicon-o-chevron-up-down":"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}[t];if(!i)return;e.innerHTML="";const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("d",i),e.appendChild(s)}onDestroy(){this.sidebars.clear()}}As.getInstance();const te={container:'[data-keys-file-upload="true"]:not([data-initialized="true"])',fileInput:".file-input",emptyState:".upload-empty-state",fileState:".upload-file-state",fileName:".file-name",fileSize:".file-size",previewImage:".file-preview-image",fileIcon:".file-icon",changeButton:".file-change-btn",removeButton:".file-remove",uploadProgress:".upload-progress",progressBar:".upload-progress-bar",singleFilePreview:".single-file-preview",multipleFilesPreview:".multiple-files-preview",fileSummary:".file-summary",fileCount:".file-count",fileTotalSize:".file-total-size",addMoreFilesBtn:".file-add-more-btn",addMoreFilesContainer:".add-more-files"},$e={initialized:"data-initialized",dragDrop:"data-drag-drop",disabled:"data-disabled",livewire:"data-livewire",accept:"data-accept",maxSize:"data-max-size",maxSizeFormatted:"data-max-size-formatted",invalid:"data-invalid",multiple:"data-multiple",maxFiles:"data-max-files"},Bn={fileRemoved:"File removed",uploadFailed:"Upload failed. Please try again.",fileTypeError:r=>`File type not allowed. Accepted: ${r}`,fileSizeError:r=>`File too large. Maximum size: ${r}`,invalidFile:"Invalid file",maxFilesError:r=>`Maximum ${r} file(s) allowed`,filesRemoved:r=>`${r} file(s) removed`},pr=new Map,ii=ri.getInstance(),wo=()=>typeof window.Livewire<"u";function qu(){const r=document.querySelectorAll(te.container),e=wo();r.forEach((t,n)=>{const i=t,s=i.closest(".file-upload-wrapper");if(!s)return;const a=i.querySelector(te.fileInput);a&&(cm(s,a,e),um(i,a),dm(s,a),hm(s,a),pm(s,a,e),ii.setState(s,{currentImageIndex:0,images:[],isOpen:!1,elementId:s.id||`upload-${Date.now()}`}),i.setAttribute($e.initialized,"true"))})}function cm(r,e,t){const n=r.getAttribute($e.multiple)==="true";e.addEventListener("change",()=>{const i=r.hasAttribute("data-adding-more"),s=pr.get(r)||[];if(e.files&&e.files.length>0)if(n){const a=i&&s.length>0;zu(r,e,Array.from(e.files),t,a),r.removeAttribute("data-adding-more")}else _u(r,e,e.files[0],t);else Es(r)})}function um(r,e){const t=r.getAttribute($e.dragDrop)==="true",n=r.getAttribute($e.disabled)==="true";if(!t||n)return;["dragenter","dragover","dragleave","drop"].forEach(s=>r.addEventListener(s,bm)),["dragenter","dragover"].forEach(s=>{r.addEventListener(s,()=>{r.classList.add("dragover")})}),["dragleave","drop"].forEach(s=>{r.addEventListener(s,()=>{r.classList.remove("dragover")})}),r.addEventListener("drop",s=>{var l;const a=(l=s.dataTransfer)==null?void 0:l.files,o=r.getAttribute($e.multiple)==="true";a&&a.length>0&&(o?zu(r,e,Array.from(a)):_u(r,e,a[0],wo()))})}function dm(r,e){const t=r.querySelector(te.changeButton);t&&t.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),e.disabled||e.click()});const n=r.querySelector(te.emptyState);n&&n.addEventListener("click",s=>{s.target.closest(te.fileInput)||r.hasAttribute("data-is-removing")||e.disabled||e.click()});const i=r.querySelector(te.addMoreFilesBtn);i&&i.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),e.disabled||(r.setAttribute("data-adding-more","true"),e.click())}),r.addEventListener("click",s=>{const o=s.target.closest("[data-remove-file]");if(o){s.preventDefault(),s.stopPropagation();const l=parseInt(o.getAttribute("data-remove-file")||"0");fm(r,e,l)}})}function hm(r,e){const t=r.querySelector(te.removeButton);t&&t.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),r.setAttribute("data-is-removing","true"),e.value="",Es(r),Ts(r),si(r,Bn.fileRemoved),setTimeout(()=>{r.removeAttribute("data-is-removing")},150),r.getAttribute($e.livewire)==="true"&&e.dispatchEvent(new Event("change",{bubbles:!0}))})}function fm(r,e,t){const n=pr.get(r)||[];if(t<0||t>=n.length)return;const i=`preview-${t}-`,s=ii.getState(r);s&&s.images&&s.images.filter(o=>o.id.startsWith(i)).forEach(o=>{ii.removeImage(r,o.id)}),n.splice(t,1),n.length===0?(pr.delete(r),e.value="",Es(r),si(r,Bn.fileRemoved)):(pr.set(r,n),Ru(e,n),Pu(r,n),si(r,`File removed. ${n.length} file(s) remaining`))}function pm(r,e,t){const n=r.getAttribute($e.livewire)==="true";!t||!n||(e.addEventListener("livewire-upload-start",()=>{e.setAttribute("data-livewire-upload-started","true"),Pn(r,!0),So(r,0)}),e.addEventListener("livewire-upload-progress",i=>{var a;const s=i;(a=s.detail)!=null&&a.progress&&So(r,s.detail.progress)}),e.addEventListener("livewire-upload-finish",()=>{e.removeAttribute("data-livewire-upload-started"),Pn(r,!1),e.files&&e.files.length>0&&ko(r,e.files[0])}),e.addEventListener("livewire-upload-error",i=>{var a;Cs(r,((a=i.detail)==null?void 0:a.message)||Bn.uploadFailed),Pn(r,!1)}),e.addEventListener("livewire-upload-cancel",()=>{Pn(r,!1),Ts(r)}))}function _u(r,e,t,n){const i=Bu(r,t);if(!i.valid){Cs(r,i.error||Bn.invalidFile);return}Ts(r);const s=r.getAttribute($e.livewire)==="true",a=n&&typeof window.Livewire<"u";s&&a?(Pn(r,!0),So(r,0),setTimeout(()=>{e.hasAttribute("data-livewire-upload-started")||(Pn(r,!1),ko(r,t))},500)):ko(r,t)}function zu(r,e,t,n,i=!1){const s=r.getAttribute($e.maxFiles),a=pr.get(r)||[];let o=i?[...a]:[];for(const l of t){const c=Bu(r,l);if(!c.valid){Cs(r,c.error||Bn.invalidFile);continue}if(s&&o.length>=parseInt(s)){Cs(r);break}o.push(l)}if(o.length===0){Es(r);return}pr.set(r,o),Ru(e,o),Ts(r),Pu(r,o)}function Ru(r,e){const t=new DataTransfer;e.forEach(n=>t.items.add(n)),r.files=t.files}function Bu(r,e){const t=r.getAttribute($e.accept),n=r.getAttribute($e.maxSize),i=r.getAttribute($e.maxSizeFormatted);if(t&&t!=="*"){const s=t.split(",").map(o=>o.trim());if(!s.some(o=>o.startsWith(".")?e.name.toLowerCase().endsWith(o.toLowerCase()):o.includes("*")?e.type.startsWith(o.split("/")[0]+"/"):e.type===o))return{valid:!1,error:Bn.fileTypeError(s.join(", "))}}return n&&e.size>parseInt(n)?{valid:!1,error:Bn.fileSizeError(i||"10MB")}:{valid:!0}}function Es(r){const e=r.querySelector(te.emptyState),t=r.querySelector(te.fileState);ve(e,!0),ve(t,!1),Pn(r,!1),r.classList.remove("dragover")}function ko(r,e){const t=r.querySelector(te.emptyState),n=r.querySelector(te.fileState),i=r.querySelector(te.singleFilePreview),s=r.querySelector(te.multipleFilesPreview),a=r.querySelector(te.fileSummary),o=r.querySelector(te.addMoreFilesContainer);ve(t,!1),ve(n,!0),ve(i,!0),ve(s,!1),ve(a,!1),ve(o,!1),mm(r,e),si(r,`File selected: ${e.name}`)}function Pu(r,e){const t=r.querySelector(te.emptyState),n=r.querySelector(te.fileState),i=r.querySelector(te.singleFilePreview),s=r.querySelector(te.multipleFilesPreview),a=r.querySelector(te.fileSummary),o=r.querySelector(te.fileCount),l=r.querySelector(te.fileTotalSize),c=r.querySelector(te.addMoreFilesContainer);if(ve(t,!1),ve(n,!0),ve(i,!1),ve(s,!0),ve(a,!0),ve(c,!0),o&&(o.textContent=e.length.toString()),l){const d=e.reduce((f,h)=>f+h.size,0);l.textContent=$n(d)}s&&(s.innerHTML="",e.forEach((d,f)=>{const h=gm(r,d,f);s.appendChild(h)})),si(r,`${e.length} file(s) selected`)}function gm(r,e,t){const n=document.createElement("div");n.className="file-card relative p-3 rounded-lg border-2 border-border bg-surface hover:border-brand transition-colors",n.setAttribute("data-file-index",t.toString());const i=document.createElement("div");i.className="mb-2 relative";const s=document.createElement("img");s.className="hidden w-full h-24 object-cover rounded",s.alt=e.name;const a=document.createElement("div");if(a.className="flex items-center justify-center w-full h-24 bg-surface border border-border rounded",a.innerHTML=`<svg class="w-8 h-8 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
    </svg>`,i.appendChild(s),i.appendChild(a),e.type.startsWith("image/")){const f=new FileReader;f.onload=h=>{var g;if((g=h.target)!=null&&g.result){const m=h.target.result;s.src=m,s.classList.remove("hidden"),a.classList.add("hidden");const y=`preview-${t}-${Date.now()}`;s.setAttribute("data-lightbox-trigger",y),s.setAttribute("data-filename",e.name),s.setAttribute("data-filetype","image"),s.setAttribute("data-filesize",$n(e.size)),s.style.cursor="pointer",s.setAttribute("role","button"),s.setAttribute("tabindex","0"),s.setAttribute("aria-label",`View ${e.name} in lightbox`),ii.addImage(r,{id:y,src:m,alt:e.name,fileName:e.name,fileSize:$n(e.size),fileType:e.type})}},f.readAsDataURL(e)}const o=document.createElement("div");o.className="space-y-1";const l=document.createElement("div");l.className="text-sm font-medium text-foreground truncate",l.textContent=e.name,l.title=e.name;const c=document.createElement("div");c.className="text-xs text-muted",c.textContent=$n(e.size),o.appendChild(l),o.appendChild(c);const d=document.createElement("button");return d.type="button",d.className="absolute top-2 right-2 w-6 h-6 flex items-center justify-center rounded-full bg-danger text-white hover:bg-danger-hover transition-colors",d.setAttribute("data-remove-file",t.toString()),d.innerHTML=`<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>`,n.appendChild(i),n.appendChild(o),n.appendChild(d),n}function mm(r,e){const t=r.querySelector(te.fileName),n=r.querySelector(te.fileSize),i=r.querySelector(te.previewImage),s=r.querySelector(te.fileIcon);if(t&&(t.textContent=e.name),n&&(n.textContent=$n(e.size)),e.type.startsWith("image/")){const a=new FileReader;a.onload=o=>{var l;if(i&&((l=o.target)!=null&&l.result)){const c=o.target.result;i.src=c;const d="preview-"+Date.now();i.setAttribute("data-lightbox-trigger",d),i.setAttribute("data-filename",e.name),i.setAttribute("data-filetype","image"),i.setAttribute("data-filesize",$n(e.size)),i.style.cursor="pointer",i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("aria-label",`View ${e.name} in lightbox`);const f=i.closest(".file-upload-wrapper");f&&ii.addImage(f,{id:d,src:c,alt:e.name,fileName:e.name,fileSize:$n(e.size),fileType:e.type}),ve(i,!0),ve(s,!1)}},a.readAsDataURL(e)}else ve(i,!1),ve(s,!0)}function Pn(r,e){const t=r.querySelector(te.uploadProgress);ve(t,e)}function Cs(r,e){r.setAttribute($e.invalid,"true")}function Ts(r){r.removeAttribute($e.invalid)}function $n(r){if(r===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,n)).toFixed(2))+" "+t[n]}function ve(r,e){r&&r.classList.toggle("hidden",!e)}function So(r,e){const t=r.querySelector(te.progressBar);t&&(t.style.width=`${e}%`)}function bm(r){r.preventDefault(),r.stopPropagation()}function si(r,e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,r.appendChild(t),setTimeout(()=>{r.contains(t)&&r.removeChild(t)},1e3)}document.addEventListener("DOMContentLoaded",qu),wo()&&document.addEventListener("livewire:navigated",qu);var $u=typeof global=="object"&&global&&global.Object===Object&&global,ym=typeof self=="object"&&self&&self.Object===Object&&self,It=$u||ym||Function("return this")(),mn=It.Symbol,Fu=Object.prototype,vm=Fu.hasOwnProperty,wm=Fu.toString,ai=mn?mn.toStringTag:void 0;function km(r){var e=vm.call(r,ai),t=r[ai];try{r[ai]=void 0;var n=!0}catch{}var i=wm.call(r);return n&&(e?r[ai]=t:delete r[ai]),i}var Sm=Object.prototype,xm=Sm.toString;function Am(r){return xm.call(r)}var Em="[object Null]",Cm="[object Undefined]",ju=mn?mn.toStringTag:void 0;function gr(r){return r==null?r===void 0?Cm:Em:ju&&ju in Object(r)?km(r):Am(r)}function Jt(r){return r!=null&&typeof r=="object"}var Fn=Array.isArray;function bn(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function Hu(r){return r}var Tm="[object AsyncFunction]",Lm="[object Function]",Dm="[object GeneratorFunction]",Im="[object Proxy]";function xo(r){if(!bn(r))return!1;var e=gr(r);return e==Lm||e==Dm||e==Tm||e==Im}var Ao=It["__core-js_shared__"],Uu=function(){var r=/[^.]+$/.exec(Ao&&Ao.keys&&Ao.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Nm(r){return!!Uu&&Uu in r}var Om=Function.prototype,Mm=Om.toString;function jn(r){if(r!=null){try{return Mm.call(r)}catch{}try{return r+""}catch{}}return""}var qm=/[\\^$.*+?()[\]{}|]/g,_m=/^\[object .+?Constructor\]$/,zm=Function.prototype,Rm=Object.prototype,Bm=zm.toString,Pm=Rm.hasOwnProperty,$m=RegExp("^"+Bm.call(Pm).replace(qm,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fm(r){if(!bn(r)||Nm(r))return!1;var e=xo(r)?$m:_m;return e.test(jn(r))}function jm(r,e){return r==null?void 0:r[e]}function Hn(r,e){var t=jm(r,e);return Fm(t)?t:void 0}var Eo=Hn(It,"WeakMap"),Vu=Object.create,Hm=function(){function r(){}return function(e){if(!bn(e))return{};if(Vu)return Vu(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();function Um(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Vm(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Ym=800,Gm=16,Km=Date.now;function Wm(r){var e=0,t=0;return function(){var n=Km(),i=Gm-(n-t);if(t=n,i>0){if(++e>=Ym)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function Qm(r){return function(){return r}}var Ls=function(){try{var r=Hn(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Zm=Ls?function(r,e){return Ls(r,"toString",{configurable:!0,enumerable:!1,value:Qm(e),writable:!0})}:Hu,Xm=Wm(Zm);function Jm(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var eb=9007199254740991,tb=/^(?:0|[1-9]\d*)$/;function Yu(r,e){var t=typeof r;return e=e??eb,!!e&&(t=="number"||t!="symbol"&&tb.test(r))&&r>-1&&r%1==0&&r<e}function Co(r,e,t){e=="__proto__"&&Ls?Ls(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function oi(r,e){return r===e||r!==r&&e!==e}var nb=Object.prototype,rb=nb.hasOwnProperty;function Gu(r,e,t){var n=r[e];(!(rb.call(r,e)&&oi(n,t))||t===void 0&&!(e in r))&&Co(r,e,t)}function ib(r,e,t,n){var i=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=r[o]),i?Co(t,o,l):Gu(t,o,l)}return t}var Ku=Math.max;function sb(r,e,t){return e=Ku(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=Ku(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=t(a),Um(r,this,o)}}function ab(r,e){return Xm(sb(r,e,Hu),r+"")}var ob=9007199254740991;function Wu(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ob}function Ds(r){return r!=null&&Wu(r.length)&&!xo(r)}function lb(r,e,t){if(!bn(t))return!1;var n=typeof e;return(n=="number"?Ds(t)&&Yu(e,t.length):n=="string"&&e in t)?oi(t[e],r):!1}function cb(r){return ab(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,a&&lb(t[0],t[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var o=t[n];o&&r(e,o,n,s)}return e})}var ub=Object.prototype;function To(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||ub;return r===t}function db(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var hb="[object Arguments]";function Qu(r){return Jt(r)&&gr(r)==hb}var Zu=Object.prototype,fb=Zu.hasOwnProperty,pb=Zu.propertyIsEnumerable,Lo=Qu(function(){return arguments}())?Qu:function(r){return Jt(r)&&fb.call(r,"callee")&&!pb.call(r,"callee")};function gb(){return!1}var Xu=typeof $=="object"&&$&&!$.nodeType&&$,Ju=Xu&&typeof module=="object"&&module&&!module.nodeType&&module,mb=Ju&&Ju.exports===Xu,ed=mb?It.Buffer:void 0,bb=ed?ed.isBuffer:void 0,li=bb||gb,yb="[object Arguments]",vb="[object Array]",wb="[object Boolean]",kb="[object Date]",Sb="[object Error]",xb="[object Function]",Ab="[object Map]",Eb="[object Number]",Cb="[object Object]",Tb="[object RegExp]",Lb="[object Set]",Db="[object String]",Ib="[object WeakMap]",Nb="[object ArrayBuffer]",Ob="[object DataView]",Mb="[object Float32Array]",qb="[object Float64Array]",_b="[object Int8Array]",zb="[object Int16Array]",Rb="[object Int32Array]",Bb="[object Uint8Array]",Pb="[object Uint8ClampedArray]",$b="[object Uint16Array]",Fb="[object Uint32Array]",ce={};ce[Mb]=ce[qb]=ce[_b]=ce[zb]=ce[Rb]=ce[Bb]=ce[Pb]=ce[$b]=ce[Fb]=!0,ce[yb]=ce[vb]=ce[Nb]=ce[wb]=ce[Ob]=ce[kb]=ce[Sb]=ce[xb]=ce[Ab]=ce[Eb]=ce[Cb]=ce[Tb]=ce[Lb]=ce[Db]=ce[Ib]=!1;function jb(r){return Jt(r)&&Wu(r.length)&&!!ce[gr(r)]}function Do(r){return function(e){return r(e)}}var td=typeof $=="object"&&$&&!$.nodeType&&$,ci=td&&typeof module=="object"&&module&&!module.nodeType&&module,Hb=ci&&ci.exports===td,Io=Hb&&$u.process,mr=function(){try{var r=ci&&ci.require&&ci.require("util").types;return r||Io&&Io.binding&&Io.binding("util")}catch{}}(),nd=mr&&mr.isTypedArray,No=nd?Do(nd):jb,Ub=Object.prototype,Vb=Ub.hasOwnProperty;function rd(r,e){var t=Fn(r),n=!t&&Lo(r),i=!t&&!n&&li(r),s=!t&&!n&&!i&&No(r),a=t||n||i||s,o=a?db(r.length,String):[],l=o.length;for(var c in r)(e||Vb.call(r,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Yu(c,l)))&&o.push(c);return o}function id(r,e){return function(t){return r(e(t))}}var Yb=id(Object.keys,Object),Gb=Object.prototype,Kb=Gb.hasOwnProperty;function Wb(r){if(!To(r))return Yb(r);var e=[];for(var t in Object(r))Kb.call(r,t)&&t!="constructor"&&e.push(t);return e}function Qb(r){return Ds(r)?rd(r):Wb(r)}function Zb(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Xb=Object.prototype,Jb=Xb.hasOwnProperty;function ey(r){if(!bn(r))return Zb(r);var e=To(r),t=[];for(var n in r)n=="constructor"&&(e||!Jb.call(r,n))||t.push(n);return t}function sd(r){return Ds(r)?rd(r,!0):ey(r)}var ui=Hn(Object,"create");function ty(){this.__data__=ui?ui(null):{},this.size=0}function ny(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var ry="__lodash_hash_undefined__",iy=Object.prototype,sy=iy.hasOwnProperty;function ay(r){var e=this.__data__;if(ui){var t=e[r];return t===ry?void 0:t}return sy.call(e,r)?e[r]:void 0}var oy=Object.prototype,ly=oy.hasOwnProperty;function cy(r){var e=this.__data__;return ui?e[r]!==void 0:ly.call(e,r)}var uy="__lodash_hash_undefined__";function dy(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=ui&&e===void 0?uy:e,this}function Un(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Un.prototype.clear=ty,Un.prototype.delete=ny,Un.prototype.get=ay,Un.prototype.has=cy,Un.prototype.set=dy;function hy(){this.__data__=[],this.size=0}function Is(r,e){for(var t=r.length;t--;)if(oi(r[t][0],e))return t;return-1}var fy=Array.prototype,py=fy.splice;function gy(r){var e=this.__data__,t=Is(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():py.call(e,t,1),--this.size,!0}function my(r){var e=this.__data__,t=Is(e,r);return t<0?void 0:e[t][1]}function by(r){return Is(this.__data__,r)>-1}function yy(r,e){var t=this.__data__,n=Is(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function en(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}en.prototype.clear=hy,en.prototype.delete=gy,en.prototype.get=my,en.prototype.has=by,en.prototype.set=yy;var di=Hn(It,"Map");function vy(){this.size=0,this.__data__={hash:new Un,map:new(di||en),string:new Un}}function wy(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ns(r,e){var t=r.__data__;return wy(e)?t[typeof e=="string"?"string":"hash"]:t.map}function ky(r){var e=Ns(this,r).delete(r);return this.size-=e?1:0,e}function Sy(r){return Ns(this,r).get(r)}function xy(r){return Ns(this,r).has(r)}function Ay(r,e){var t=Ns(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Vn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Vn.prototype.clear=vy,Vn.prototype.delete=ky,Vn.prototype.get=Sy,Vn.prototype.has=xy,Vn.prototype.set=Ay;function Ey(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var ad=id(Object.getPrototypeOf,Object),Cy="[object Object]",Ty=Function.prototype,Ly=Object.prototype,od=Ty.toString,Dy=Ly.hasOwnProperty,Iy=od.call(Object);function Ny(r){if(!Jt(r)||gr(r)!=Cy)return!1;var e=ad(r);if(e===null)return!0;var t=Dy.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&od.call(t)==Iy}function Oy(){this.__data__=new en,this.size=0}function My(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function qy(r){return this.__data__.get(r)}function _y(r){return this.__data__.has(r)}var zy=200;function Ry(r,e){var t=this.__data__;if(t instanceof en){var n=t.__data__;if(!di||n.length<zy-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Vn(n)}return t.set(r,e),this.size=t.size,this}function Nt(r){var e=this.__data__=new en(r);this.size=e.size}Nt.prototype.clear=Oy,Nt.prototype.delete=My,Nt.prototype.get=qy,Nt.prototype.has=_y,Nt.prototype.set=Ry;var ld=typeof $=="object"&&$&&!$.nodeType&&$,cd=ld&&typeof module=="object"&&module&&!module.nodeType&&module,By=cd&&cd.exports===ld,ud=By?It.Buffer:void 0,dd=ud?ud.allocUnsafe:void 0;function hd(r,e){if(e)return r.slice();var t=r.length,n=dd?dd(t):new r.constructor(t);return r.copy(n),n}function Py(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var a=r[t];e(a,t,r)&&(s[i++]=a)}return s}function $y(){return[]}var Fy=Object.prototype,jy=Fy.propertyIsEnumerable,fd=Object.getOwnPropertySymbols,Hy=fd?function(r){return r==null?[]:(r=Object(r),Py(fd(r),function(e){return jy.call(r,e)}))}:$y;function Uy(r,e,t){var n=e(r);return Fn(r)?n:Ey(n,t(r))}function Oo(r){return Uy(r,Qb,Hy)}var Mo=Hn(It,"DataView"),qo=Hn(It,"Promise"),_o=Hn(It,"Set"),pd="[object Map]",Vy="[object Object]",gd="[object Promise]",md="[object Set]",bd="[object WeakMap]",yd="[object DataView]",Yy=jn(Mo),Gy=jn(di),Ky=jn(qo),Wy=jn(_o),Qy=jn(Eo),dt=gr;(Mo&&dt(new Mo(new ArrayBuffer(1)))!=yd||di&&dt(new di)!=pd||qo&&dt(qo.resolve())!=gd||_o&&dt(new _o)!=md||Eo&&dt(new Eo)!=bd)&&(dt=function(r){var e=gr(r),t=e==Vy?r.constructor:void 0,n=t?jn(t):"";if(n)switch(n){case Yy:return yd;case Gy:return pd;case Ky:return gd;case Wy:return md;case Qy:return bd}return e});var Zy=Object.prototype,Xy=Zy.hasOwnProperty;function Jy(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&Xy.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var Os=It.Uint8Array;function zo(r){var e=new r.constructor(r.byteLength);return new Os(e).set(new Os(r)),e}function ev(r,e){var t=zo(r.buffer);return new r.constructor(t,r.byteOffset,r.byteLength)}var tv=/\w*$/;function nv(r){var e=new r.constructor(r.source,tv.exec(r));return e.lastIndex=r.lastIndex,e}var vd=mn?mn.prototype:void 0,wd=vd?vd.valueOf:void 0;function rv(r){return wd?Object(wd.call(r)):{}}function kd(r,e){var t=e?zo(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var iv="[object Boolean]",sv="[object Date]",av="[object Map]",ov="[object Number]",lv="[object RegExp]",cv="[object Set]",uv="[object String]",dv="[object Symbol]",hv="[object ArrayBuffer]",fv="[object DataView]",pv="[object Float32Array]",gv="[object Float64Array]",mv="[object Int8Array]",bv="[object Int16Array]",yv="[object Int32Array]",vv="[object Uint8Array]",wv="[object Uint8ClampedArray]",kv="[object Uint16Array]",Sv="[object Uint32Array]";function xv(r,e,t){var n=r.constructor;switch(e){case hv:return zo(r);case iv:case sv:return new n(+r);case fv:return ev(r);case pv:case gv:case mv:case bv:case yv:case vv:case wv:case kv:case Sv:return kd(r,t);case av:return new n;case ov:case uv:return new n(r);case lv:return nv(r);case cv:return new n;case dv:return rv(r)}}function Sd(r){return typeof r.constructor=="function"&&!To(r)?Hm(ad(r)):{}}var Av="[object Map]";function Ev(r){return Jt(r)&&dt(r)==Av}var xd=mr&&mr.isMap,Cv=xd?Do(xd):Ev,Tv="[object Set]";function Lv(r){return Jt(r)&&dt(r)==Tv}var Ad=mr&&mr.isSet,Dv=Ad?Do(Ad):Lv,Iv=1,Ed="[object Arguments]",Nv="[object Array]",Ov="[object Boolean]",Mv="[object Date]",qv="[object Error]",Cd="[object Function]",_v="[object GeneratorFunction]",zv="[object Map]",Rv="[object Number]",Td="[object Object]",Bv="[object RegExp]",Pv="[object Set]",$v="[object String]",Fv="[object Symbol]",jv="[object WeakMap]",Hv="[object ArrayBuffer]",Uv="[object DataView]",Vv="[object Float32Array]",Yv="[object Float64Array]",Gv="[object Int8Array]",Kv="[object Int16Array]",Wv="[object Int32Array]",Qv="[object Uint8Array]",Zv="[object Uint8ClampedArray]",Xv="[object Uint16Array]",Jv="[object Uint32Array]",se={};se[Ed]=se[Nv]=se[Hv]=se[Uv]=se[Ov]=se[Mv]=se[Vv]=se[Yv]=se[Gv]=se[Kv]=se[Wv]=se[zv]=se[Rv]=se[Td]=se[Bv]=se[Pv]=se[$v]=se[Fv]=se[Qv]=se[Zv]=se[Xv]=se[Jv]=!0,se[qv]=se[Cd]=se[jv]=!1;function Ms(r,e,t,n,i,s){var a,o=e&Iv;if(a!==void 0)return a;if(!bn(r))return r;var l=Fn(r);if(l)a=Jy(r);else{var c=dt(r),d=c==Cd||c==_v;if(li(r))return hd(r,o);if(c==Td||c==Ed||d&&!i)a=d?{}:Sd(r);else{if(!se[c])return i?r:{};a=xv(r,c,o)}}s||(s=new Nt);var f=s.get(r);if(f)return f;s.set(r,a),Dv(r)?r.forEach(function(m){a.add(Ms(m,e,t,m,r,s))}):Cv(r)&&r.forEach(function(m,y){a.set(y,Ms(m,e,t,y,r,s))});var h=Oo,g=l?void 0:h(r);return Jm(g||r,function(m,y){g&&(y=m,m=r[y]),Gu(a,y,Ms(m,e,t,y,r,s))}),a}var e1=1,t1=4;function br(r){return Ms(r,e1|t1)}var n1="__lodash_hash_undefined__";function r1(r){return this.__data__.set(r,n1),this}function i1(r){return this.__data__.has(r)}function qs(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Vn;++e<t;)this.add(r[e])}qs.prototype.add=qs.prototype.push=r1,qs.prototype.has=i1;function s1(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function a1(r,e){return r.has(e)}var o1=1,l1=2;function Ld(r,e,t,n,i,s){var a=t&o1,o=r.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(r),d=s.get(e);if(c&&d)return c==e&&d==r;var f=-1,h=!0,g=t&l1?new qs:void 0;for(s.set(r,e),s.set(e,r);++f<o;){var m=r[f],y=e[f];if(n)var k=a?n(y,m,f,e,r,s):n(m,y,f,r,e,s);if(k!==void 0){if(k)continue;h=!1;break}if(g){if(!s1(e,function(w,x){if(!a1(g,x)&&(m===w||i(m,w,t,n,s)))return g.push(x)})){h=!1;break}}else if(!(m===y||i(m,y,t,n,s))){h=!1;break}}return s.delete(r),s.delete(e),h}function c1(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function u1(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var d1=1,h1=2,f1="[object Boolean]",p1="[object Date]",g1="[object Error]",m1="[object Map]",b1="[object Number]",y1="[object RegExp]",v1="[object Set]",w1="[object String]",k1="[object Symbol]",S1="[object ArrayBuffer]",x1="[object DataView]",Dd=mn?mn.prototype:void 0,Ro=Dd?Dd.valueOf:void 0;function A1(r,e,t,n,i,s,a){switch(t){case x1:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case S1:return!(r.byteLength!=e.byteLength||!s(new Os(r),new Os(e)));case f1:case p1:case b1:return oi(+r,+e);case g1:return r.name==e.name&&r.message==e.message;case y1:case w1:return r==e+"";case m1:var o=c1;case v1:var l=n&d1;if(o||(o=u1),r.size!=e.size&&!l)return!1;var c=a.get(r);if(c)return c==e;n|=h1,a.set(r,e);var d=Ld(o(r),o(e),n,i,s,a);return a.delete(r),d;case k1:if(Ro)return Ro.call(r)==Ro.call(e)}return!1}var E1=1,C1=Object.prototype,T1=C1.hasOwnProperty;function L1(r,e,t,n,i,s){var a=t&E1,o=Oo(r),l=o.length,c=Oo(e),d=c.length;if(l!=d&&!a)return!1;for(var f=l;f--;){var h=o[f];if(!(a?h in e:T1.call(e,h)))return!1}var g=s.get(r),m=s.get(e);if(g&&m)return g==e&&m==r;var y=!0;s.set(r,e),s.set(e,r);for(var k=a;++f<l;){h=o[f];var w=r[h],x=e[h];if(n)var E=a?n(x,w,h,e,r,s):n(w,x,h,r,e,s);if(!(E===void 0?w===x||i(w,x,t,n,s):E)){y=!1;break}k||(k=h=="constructor")}if(y&&!k){var C=r.constructor,I=e.constructor;C!=I&&"constructor"in r&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof I=="function"&&I instanceof I)&&(y=!1)}return s.delete(r),s.delete(e),y}var D1=1,Id="[object Arguments]",Nd="[object Array]",_s="[object Object]",I1=Object.prototype,Od=I1.hasOwnProperty;function N1(r,e,t,n,i,s){var a=Fn(r),o=Fn(e),l=a?Nd:dt(r),c=o?Nd:dt(e);l=l==Id?_s:l,c=c==Id?_s:c;var d=l==_s,f=c==_s,h=l==c;if(h&&li(r)){if(!li(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new Nt),a||No(r)?Ld(r,e,t,n,i,s):A1(r,e,l,t,n,i,s);if(!(t&D1)){var g=d&&Od.call(r,"__wrapped__"),m=f&&Od.call(e,"__wrapped__");if(g||m){var y=g?r.value():r,k=m?e.value():e;return s||(s=new Nt),i(y,k,t,n,s)}}return h?(s||(s=new Nt),L1(r,e,t,n,i,s)):!1}function Md(r,e,t,n,i){return r===e?!0:r==null||e==null||!Jt(r)&&!Jt(e)?r!==r&&e!==e:N1(r,e,t,n,Md,i)}function O1(r){return function(e,t,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[++i];if(t(s[l],l,s)===!1)break}return e}}var M1=O1();function Bo(r,e,t){(t!==void 0&&!oi(r[e],t)||t===void 0&&!(e in r))&&Co(r,e,t)}function q1(r){return Jt(r)&&Ds(r)}function Po(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function _1(r){return ib(r,sd(r))}function z1(r,e,t,n,i,s,a){var o=Po(r,t),l=Po(e,t),c=a.get(l);if(c){Bo(r,t,c);return}var d=s?s(o,l,t+"",r,e,a):void 0,f=d===void 0;if(f){var h=Fn(l),g=!h&&li(l),m=!h&&!g&&No(l);d=l,h||g||m?Fn(o)?d=o:q1(o)?d=Vm(o):g?(f=!1,d=hd(l,!0)):m?(f=!1,d=kd(l,!0)):d=[]:Ny(l)||Lo(l)?(d=o,Lo(o)?d=_1(o):(!bn(o)||xo(o))&&(d=Sd(l))):f=!1}f&&(a.set(l,d),i(d,l,n,s,a),a.delete(l)),Bo(r,t,d)}function qd(r,e,t,n,i){r!==e&&M1(e,function(s,a){if(i||(i=new Nt),bn(s))z1(r,e,a,t,qd,n,i);else{var o=n?n(Po(r,a),s,a+"",r,e,i):void 0;o===void 0&&(o=s),Bo(r,a,o)}},sd)}function $o(r,e){return Md(r,e)}var yn=cb(function(r,e,t){qd(r,e,t)}),P=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(P||{});class Ot{constructor(e,t,n={}){this.attrName=e,this.keyName=t;const i=P.TYPE&P.ATTRIBUTE;this.scope=n.scope!=null?n.scope&P.LEVEL|i:P.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class yr extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const _d=class Iu{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let n=null;try{n=e.parentNode}catch{return null}return this.find(n,t)}return null}create(e,t,n){const i=this.query(t);if(i==null)throw new yr(`Unable to create ${t} blot`);const s=i,a=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:s.create(n),o=new s(e,a,n);return Iu.blots.set(o.domNode,o),o}find(e,t=!1){return Iu.find(e,t)}query(e,t=P.ANY){let n;return typeof e=="string"?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:typeof e=="number"?e&P.LEVEL&P.BLOCK?n=this.types.block:e&P.LEVEL&P.INLINE&&(n=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(i=>(n=this.classes[i],!!n)),n=n||this.tags[e.tagName]),n==null?null:"scope"in n&&t&P.LEVEL&n.scope&&t&P.TYPE&n.scope?n:null}register(...e){return e.map(t=>{const n="blotName"in t,i="attrName"in t;if(!n&&!i)throw new yr("Invalid definition");if(n&&t.blotName==="abstract")throw new yr("Cannot register abstract class");const s=n?t.blotName:i?t.attrName:void 0;return this.types[s]=t,i?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):n&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(a=>a.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(a=>{(this.tags[a]==null||t.className==null)&&(this.tags[a]=t)}))),t})}};_d.blots=new WeakMap;let vr=_d;function zd(r,e){return(r.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}class R1 extends Ot{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){zd(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const t=(zd(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}}const ht=R1;function Fo(r){const e=r.split("-"),t=e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return e[0]+t}class B1 extends Ot{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Fo(this.keyName)]=t,!0):!1}remove(e){e.style[Fo(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const t=e.style[Fo(this.keyName)];return this.canAdd(e,t)?t:""}}const vn=B1;class P1{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=vr.find(this.domNode);if(e==null)return;const t=Ot.keys(this.domNode),n=ht.keys(this.domNode),i=vn.keys(this.domNode);t.concat(n).concat(i).forEach(s=>{const a=e.scroll.query(s,P.ATTRIBUTE);a instanceof Ot&&(this.attributes[a.attrName]=a)})}copy(e){Object.keys(this.attributes).forEach(t=>{const n=this.attributes[t].value(this.domNode);e.format(t,n)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}}const zs=P1,Rd=class{constructor(e,t){this.scroll=e,this.domNode=t,vr.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new yr("Blot definition missing tagName");let t,n;return Array.isArray(this.tagName)?(typeof e=="string"?(n=e.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof e=="number"&&(n=e),typeof n=="number"?t=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?t=document.createElement(n):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),vr.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,n,i){const s=this.isolate(e,t);if(this.scroll.query(n,P.BLOT)!=null&&i)s.wrap(n,i);else if(this.scroll.query(n,P.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);s.wrap(a),a.format(n,i)}}insertAt(e,t,n){const i=n==null?this.scroll.create("text",t):this.scroll.create(t,n),s=this.split(e);this.parent.insertBefore(i,s||void 0)}isolate(e,t){const n=this.split(e);if(n==null)throw new Error("Attempt to isolate at end");return n.split(t),n}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new yr(`Cannot wrap ${e}`);return n.appendChild(this),n}};Rd.blotName="abstract";let Bd=Rd;const Pd=class extends Bd{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Pd.scope=P.INLINE_BLOT;const Te=Pd;class $1{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const t=e.slice(1);this.append(...t)}}at(e){const t=this.iterator();let n=t();for(;n&&e>0;)e-=1,n=t();return n}contains(e){const t=this.iterator();let n=t();for(;n;){if(n===e)return!0;n=t()}return!1}indexOf(e){const t=this.iterator();let n=t(),i=0;for(;n;){if(n===e)return i;i+=1,n=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,n=this.head;for(;n!=null;){if(n===e)return t;t+=n.length(),n=n.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){const n=this.iterator();let i=n();for(;i;){const s=i.length();if(e<s||t&&e===s&&(i.next==null||i.next.length()!==0))return[i,e];e-=s,i=n()}return[null,0]}forEach(e){const t=this.iterator();let n=t();for(;n;)e(n),n=t()}forEachAt(e,t,n){if(t<=0)return;const[i,s]=this.find(e);let a=e-s;const o=this.iterator(i);let l=o();for(;l&&a<e+t;){const c=l.length();e>a?n(l,e-a,Math.min(t,a+c-e)):n(l,0,Math.min(c,e+t-a)),a+=c,l=o()}}map(e){return this.reduce((t,n)=>(t.push(e(n)),t),[])}reduce(e,t){const n=this.iterator();let i=n();for(;i;)t=e(t,i),i=n();return t}}function $d(r,e){const t=e.find(r);if(t)return t;try{return e.create(r)}catch{const n=e.create(P.INLINE);return Array.from(r.childNodes).forEach(i=>{n.domNode.appendChild(i)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}const Fd=class Nn extends Bd{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Nn.uiClass&&this.uiNode.classList.add(Nn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new $1,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const t=$d(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof yr)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(n,i,s)=>{n.deleteAt(i,s)})}descendant(e,t=0){const[n,i]=this.children.find(t);return e.blotName==null&&e(n)||e.blotName!=null&&n instanceof e?[n,i]:n instanceof Nn?n.descendant(e,i):[null,-1]}descendants(e,t=0,n=Number.MAX_VALUE){let i=[],s=n;return this.children.forEachAt(t,n,(a,o,l)=>{(e.blotName==null&&e(a)||e.blotName!=null&&a instanceof e)&&i.push(a),a instanceof Nn&&(i=i.concat(a.descendants(e,o,s))),s-=l}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(n=>t instanceof n)||(t.statics.scope===P.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof Nn?t.unwrap():t.remove())})}formatAt(e,t,n,i){this.children.forEachAt(e,t,(s,a,o)=>{s.formatAt(a,o,n,i)})}insertAt(e,t,n){const[i,s]=this.children.find(e);if(i)i.insertAt(s,t,n);else{const a=n==null?this.scroll.create("text",t):this.scroll.create(t,n);this.appendChild(a)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let n=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(n=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(e.domNode,n),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(n=>{e.insertBefore(n,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){const[n,i]=this.children.find(e,t),s=[[this,e]];return n instanceof Nn?s.concat(n.path(i,t)):(n!=null&&s.push([n,i]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,t){const n=typeof e=="string"?this.scroll.create(e,t):e;return n instanceof Nn&&this.moveChildren(n),super.replaceWith(n)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(i,s,a)=>{const o=i.split(s,t);o!=null&&n.appendChild(o)}),n}splitAfter(e){const t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){const n=[],i=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(n.push(...s.addedNodes),i.push(...s.removedNodes))}),i.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(s);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),n.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,a)=>s===a?0:s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let a=null;s.nextSibling!=null&&(a=this.scroll.find(s.nextSibling));const o=$d(s,this.scroll);(o.next!==a||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,a||void 0))}),this.enforceAllowedChildren()}};Fd.uiClass="";const ft=Fd;function F1(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}const wr=class ni extends ft{static create(e){return super.create(e)}static formats(e,t){const n=t.query(ni.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new zs(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(n=>{n instanceof ni||(n=n.wrap(ni.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(e,P.INLINE);if(n==null)return;n instanceof Ot?this.attributes.attribute(n,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,i){this.formats()[n]!=null||this.scroll.query(n,P.ATTRIBUTE)?this.isolate(e,t).format(n,i):super.formatAt(e,t,n,i)}optimize(e){super.optimize(e);const t=this.formats();if(Object.keys(t).length===0)return this.unwrap();const n=this.next;n instanceof ni&&n.prev===this&&F1(t,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(e,t){const n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(e,t){const n=super.wrap(e,t);return n instanceof ni&&this.attributes.move(n),n}};wr.allowedChildren=[wr,Te],wr.blotName="inline",wr.scope=P.INLINE_BLOT,wr.tagName="SPAN";const jo=wr,kr=class Nu extends ft{static create(e){return super.create(e)}static formats(e,t){const n=t.query(Nu.blotName);if(!(n!=null&&e.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new zs(this.domNode)}format(e,t){const n=this.scroll.query(e,P.BLOCK);n!=null&&(n instanceof Ot?this.attributes.attribute(n,t):e===this.statics.blotName&&!t?this.replaceWith(Nu.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){const e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,i){this.scroll.query(n,P.BLOCK)!=null?this.format(n,i):super.formatAt(e,t,n,i)}insertAt(e,t,n){if(n==null||this.scroll.query(t,P.INLINE)!=null)super.insertAt(e,t,n);else{const i=this.split(e);if(i!=null){const s=this.scroll.create(t,n);i.parent.insertBefore(s,i)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){const n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};kr.blotName="block",kr.scope=P.BLOCK_BLOT,kr.tagName="P",kr.allowedChildren=[jo,kr,Te];const hi=kr,Ho=class extends ft{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,n,i){super.formatAt(e,t,n,i),this.enforceAllowedChildren()}insertAt(e,t,n){super.insertAt(e,t,n),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Ho.blotName="container",Ho.scope=P.BLOCK_BLOT;const Rs=Ho;class j1 extends Te{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,n,i){e===0&&t===this.length()?this.format(n,i):super.formatAt(e,t,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Ge=j1,H1={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},U1=100,Sr=class extends ft{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,H1),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){const n=this.registry.find(e,t);return n?n.scroll===this?n:t?this.find(n.scroll.domNode.parentNode,!0):null:null}query(e,t=P.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(e,t)}formatAt(e,t,n,i){this.update(),super.formatAt(e,t,n,i)}insertAt(e,t,n){this.update(),super.insertAt(e,t,n)}optimize(e=[],t={}){super.optimize(t);const n=t.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());const s=(l,c=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(n.has(l.domNode)||n.set(l.domNode,[]),c&&s(l.parent))},a=l=>{n.has(l.domNode)&&(l instanceof ft&&l.children.forEach(a),n.delete(l.domNode),l.optimize(t))};let o=e;for(let l=0;o.length>0;l+=1){if(l>=U1)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(c=>{const d=this.find(c.target,!0);d!=null&&(d.domNode===c.target&&(c.type==="childList"?(s(this.find(c.previousSibling,!1)),Array.from(c.addedNodes).forEach(f=>{const h=this.find(f,!1);s(h,!1),h instanceof ft&&h.children.forEach(g=>{s(g,!1)})})):c.type==="attributes"&&s(d.prev)),s(d))}),this.children.forEach(a),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)e.push(i.pop())}}update(e,t={}){e=e||this.observer.takeRecords();const n=new WeakMap;e.map(i=>{const s=this.find(i.target,!0);return s==null?null:n.has(s.domNode)?(n.get(s.domNode).push(i),null):(n.set(s.domNode,[i]),s)}).forEach(i=>{i!=null&&i!==this&&n.has(i.domNode)&&i.update(n.get(i.domNode)||[],t)}),t.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),t),this.optimize(e,t)}};Sr.blotName="scroll",Sr.defaultChild=hi,Sr.allowedChildren=[hi,Rs],Sr.scope=P.BLOCK_BLOT,Sr.tagName="DIV";const Uo=Sr,Vo=class am extends Te{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,n){n==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof am&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(e,t){e.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Vo.blotName="text",Vo.scope=P.INLINE_BLOT;const Bs=Vo,V1=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ot,AttributorStore:zs,BlockBlot:hi,ClassAttributor:ht,ContainerBlot:Rs,EmbedBlot:Ge,InlineBlot:jo,LeafBlot:Te,ParentBlot:ft,Registry:vr,Scope:P,ScrollBlot:Uo,StyleAttributor:vn,TextBlot:Bs},Symbol.toStringTag,{value:"Module"}));var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yo={exports:{}},Ke=-1,ze=1,we=0;function fi(r,e,t,n,i){if(r===e)return r?[[we,r]]:[];if(t!=null){var s=e0(r,e,t);if(s)return s}var a=Go(r,e),o=r.substring(0,a);r=r.substring(a),e=e.substring(a),a=Ps(r,e);var l=r.substring(r.length-a);r=r.substring(0,r.length-a),e=e.substring(0,e.length-a);var c=Y1(r,e);return o&&c.unshift([we,o]),l&&c.push([we,l]),Ko(c,i),n&&W1(c),c}function Y1(r,e){var t;if(!r)return[[ze,e]];if(!e)return[[Ke,r]];var n=r.length>e.length?r:e,i=r.length>e.length?e:r,s=n.indexOf(i);if(s!==-1)return t=[[ze,n.substring(0,s)],[we,i],[ze,n.substring(s+i.length)]],r.length>e.length&&(t[0][0]=t[2][0]=Ke),t;if(i.length===1)return[[Ke,r],[ze,e]];var a=K1(r,e);if(a){var o=a[0],l=a[1],c=a[2],d=a[3],f=a[4],h=fi(o,c),g=fi(l,d);return h.concat([[we,f]],g)}return G1(r,e)}function G1(r,e){for(var t=r.length,n=e.length,i=Math.ceil((t+n)/2),s=i,a=2*i,o=new Array(a),l=new Array(a),c=0;c<a;c++)o[c]=-1,l[c]=-1;o[s+1]=0,l[s+1]=0;for(var d=t-n,f=d%2!==0,h=0,g=0,m=0,y=0,k=0;k<i;k++){for(var w=-k+h;w<=k-g;w+=2){var x=s+w,E;w===-k||w!==k&&o[x-1]<o[x+1]?E=o[x+1]:E=o[x-1]+1;for(var C=E-w;E<t&&C<n&&r.charAt(E)===e.charAt(C);)E++,C++;if(o[x]=E,E>t)g+=2;else if(C>n)h+=2;else if(f){var I=s+d-w;if(I>=0&&I<a&&l[I]!==-1){var M=t-l[I];if(E>=M)return Hd(r,e,E,C)}}}for(var O=-k+m;O<=k-y;O+=2){var I=s+O,M;O===-k||O!==k&&l[I-1]<l[I+1]?M=l[I+1]:M=l[I-1]+1;for(var S=M-O;M<t&&S<n&&r.charAt(t-M-1)===e.charAt(n-S-1);)M++,S++;if(l[I]=M,M>t)y+=2;else if(S>n)m+=2;else if(!f){var x=s+d-O;if(x>=0&&x<a&&o[x]!==-1){var E=o[x],C=s+E-x;if(M=t-M,E>=M)return Hd(r,e,E,C)}}}}return[[Ke,r],[ze,e]]}function Hd(r,e,t,n){var i=r.substring(0,t),s=e.substring(0,n),a=r.substring(t),o=e.substring(n),l=fi(i,s),c=fi(a,o);return l.concat(c)}function Go(r,e){if(!r||!e||r.charAt(0)!==e.charAt(0))return 0;for(var t=0,n=Math.min(r.length,e.length),i=n,s=0;t<i;)r.substring(s,i)==e.substring(s,i)?(t=i,s=t):n=i,i=Math.floor((n-t)/2+t);return Kd(r.charCodeAt(i-1))&&i--,i}function Ud(r,e){var t=r.length,n=e.length;if(t==0||n==0)return 0;t>n?r=r.substring(t-n):t<n&&(e=e.substring(0,t));var i=Math.min(t,n);if(r==e)return i;for(var s=0,a=1;;){var o=r.substring(i-a),l=e.indexOf(o);if(l==-1)return s;a+=l,(l==0||r.substring(i-a)==e.substring(0,a))&&(s=a,a++)}}function Ps(r,e){if(!r||!e||r.slice(-1)!==e.slice(-1))return 0;for(var t=0,n=Math.min(r.length,e.length),i=n,s=0;t<i;)r.substring(r.length-i,r.length-s)==e.substring(e.length-i,e.length-s)?(t=i,s=t):n=i,i=Math.floor((n-t)/2+t);return Wd(r.charCodeAt(r.length-i))&&i--,i}function K1(r,e){var t=r.length>e.length?r:e,n=r.length>e.length?e:r;if(t.length<4||n.length*2<t.length)return null;function i(g,m,y){for(var k=g.substring(y,y+Math.floor(g.length/4)),w=-1,x="",E,C,I,M;(w=m.indexOf(k,w+1))!==-1;){var O=Go(g.substring(y),m.substring(w)),S=Ps(g.substring(0,y),m.substring(0,w));x.length<S+O&&(x=m.substring(w-S,w)+m.substring(w,w+O),E=g.substring(0,y-S),C=g.substring(y+O),I=m.substring(0,w-S),M=m.substring(w+O))}return x.length*2>=g.length?[E,C,I,M,x]:null}var s=i(t,n,Math.ceil(t.length/4)),a=i(t,n,Math.ceil(t.length/2)),o;if(!s&&!a)return null;a?s?o=s[4].length>a[4].length?s:a:o=a:o=s;var l,c,d,f;r.length>e.length?(l=o[0],c=o[1],d=o[2],f=o[3]):(d=o[0],f=o[1],l=o[2],c=o[3]);var h=o[4];return[l,c,d,f,h]}function W1(r){for(var e=!1,t=[],n=0,i=null,s=0,a=0,o=0,l=0,c=0;s<r.length;)r[s][0]==we?(t[n++]=s,a=l,o=c,l=0,c=0,i=r[s][1]):(r[s][0]==ze?l+=r[s][1].length:c+=r[s][1].length,i&&i.length<=Math.max(a,o)&&i.length<=Math.max(l,c)&&(r.splice(t[n-1],0,[Ke,i]),r[t[n-1]+1][0]=ze,n--,n--,s=n>0?t[n-1]:-1,a=0,o=0,l=0,c=0,i=null,e=!0)),s++;for(e&&Ko(r),X1(r),s=1;s<r.length;){if(r[s-1][0]==Ke&&r[s][0]==ze){var d=r[s-1][1],f=r[s][1],h=Ud(d,f),g=Ud(f,d);h>=g?(h>=d.length/2||h>=f.length/2)&&(r.splice(s,0,[we,f.substring(0,h)]),r[s-1][1]=d.substring(0,d.length-h),r[s+1][1]=f.substring(h),s++):(g>=d.length/2||g>=f.length/2)&&(r.splice(s,0,[we,d.substring(0,g)]),r[s-1][0]=ze,r[s-1][1]=f.substring(0,f.length-g),r[s+1][0]=Ke,r[s+1][1]=d.substring(g),s++),s++}s++}}var Vd=/[^a-zA-Z0-9]/,Yd=/\s/,Gd=/[\r\n]/,Q1=/\n\r?\n$/,Z1=/^\r?\n\r?\n/;function X1(r){function e(g,m){if(!g||!m)return 6;var y=g.charAt(g.length-1),k=m.charAt(0),w=y.match(Vd),x=k.match(Vd),E=w&&y.match(Yd),C=x&&k.match(Yd),I=E&&y.match(Gd),M=C&&k.match(Gd),O=I&&g.match(Q1),S=M&&m.match(Z1);return O||S?5:I||M?4:w&&!E&&C?3:E||C?2:w||x?1:0}for(var t=1;t<r.length-1;){if(r[t-1][0]==we&&r[t+1][0]==we){var n=r[t-1][1],i=r[t][1],s=r[t+1][1],a=Ps(n,i);if(a){var o=i.substring(i.length-a);n=n.substring(0,n.length-a),i=o+i.substring(0,i.length-a),s=o+s}for(var l=n,c=i,d=s,f=e(n,i)+e(i,s);i.charAt(0)===s.charAt(0);){n+=i.charAt(0),i=i.substring(1)+s.charAt(0),s=s.substring(1);var h=e(n,i)+e(i,s);h>=f&&(f=h,l=n,c=i,d=s)}r[t-1][1]!=l&&(l?r[t-1][1]=l:(r.splice(t-1,1),t--),r[t][1]=c,d?r[t+1][1]=d:(r.splice(t+1,1),t--))}t++}}function Ko(r,e){r.push([we,""]);for(var t=0,n=0,i=0,s="",a="",o;t<r.length;){if(t<r.length-1&&!r[t][1]){r.splice(t,1);continue}switch(r[t][0]){case ze:i++,a+=r[t][1],t++;break;case Ke:n++,s+=r[t][1],t++;break;case we:var l=t-i-n-1;if(e){if(l>=0&&Zd(r[l][1])){var c=r[l][1].slice(-1);if(r[l][1]=r[l][1].slice(0,-1),s=c+s,a=c+a,!r[l][1]){r.splice(l,1),t--;var d=l-1;r[d]&&r[d][0]===ze&&(i++,a=r[d][1]+a,d--),r[d]&&r[d][0]===Ke&&(n++,s=r[d][1]+s,d--),l=d}}if(Qd(r[t][1])){var c=r[t][1].charAt(0);r[t][1]=r[t][1].slice(1),s+=c,a+=c}}if(t<r.length-1&&!r[t][1]){r.splice(t,1);break}if(s.length>0||a.length>0){s.length>0&&a.length>0&&(o=Go(a,s),o!==0&&(l>=0?r[l][1]+=a.substring(0,o):(r.splice(0,0,[we,a.substring(0,o)]),t++),a=a.substring(o),s=s.substring(o)),o=Ps(a,s),o!==0&&(r[t][1]=a.substring(a.length-o)+r[t][1],a=a.substring(0,a.length-o),s=s.substring(0,s.length-o)));var f=i+n;s.length===0&&a.length===0?(r.splice(t-f,f),t=t-f):s.length===0?(r.splice(t-f,f,[ze,a]),t=t-f+1):a.length===0?(r.splice(t-f,f,[Ke,s]),t=t-f+1):(r.splice(t-f,f,[Ke,s],[ze,a]),t=t-f+2)}t!==0&&r[t-1][0]===we?(r[t-1][1]+=r[t][1],r.splice(t,1)):t++,i=0,n=0,s="",a="";break}}r[r.length-1][1]===""&&r.pop();var h=!1;for(t=1;t<r.length-1;)r[t-1][0]===we&&r[t+1][0]===we&&(r[t][1].substring(r[t][1].length-r[t-1][1].length)===r[t-1][1]?(r[t][1]=r[t-1][1]+r[t][1].substring(0,r[t][1].length-r[t-1][1].length),r[t+1][1]=r[t-1][1]+r[t+1][1],r.splice(t-1,1),h=!0):r[t][1].substring(0,r[t+1][1].length)==r[t+1][1]&&(r[t-1][1]+=r[t+1][1],r[t][1]=r[t][1].substring(r[t+1][1].length)+r[t+1][1],r.splice(t+1,1),h=!0)),t++;h&&Ko(r,e)}function Kd(r){return r>=55296&&r<=56319}function Wd(r){return r>=56320&&r<=57343}function Qd(r){return Wd(r.charCodeAt(0))}function Zd(r){return Kd(r.charCodeAt(r.length-1))}function J1(r){for(var e=[],t=0;t<r.length;t++)r[t][1].length>0&&e.push(r[t]);return e}function Wo(r,e,t,n){return Zd(r)||Qd(n)?null:J1([[we,r],[Ke,e],[ze,t],[we,n]])}function e0(r,e,t){var n=typeof t=="number"?{index:t,length:0}:t.oldRange,i=typeof t=="number"?null:t.newRange,s=r.length,a=e.length;if(n.length===0&&(i===null||i.length===0)){var o=n.index,l=r.slice(0,o),c=r.slice(o),d=i?i.index:null;e:{var f=o+a-s;if(d!==null&&d!==f||f<0||f>a)break e;var h=e.slice(0,f),g=e.slice(f);if(g!==c)break e;var m=Math.min(o,f),y=l.slice(0,m),k=h.slice(0,m);if(y!==k)break e;var w=l.slice(m),x=h.slice(m);return Wo(y,w,x,c)}e:{if(d!==null&&d!==o)break e;var E=o,h=e.slice(0,E),g=e.slice(E);if(h!==l)break e;var C=Math.min(s-E,a-E),I=c.slice(c.length-C),M=g.slice(g.length-C);if(I!==M)break e;var w=c.slice(0,c.length-C),x=g.slice(0,g.length-C);return Wo(l,w,x,I)}}if(n.length>0&&i&&i.length===0)e:{var y=r.slice(0,n.index),I=r.slice(n.index+n.length),m=y.length,C=I.length;if(a<m+C)break e;var k=e.slice(0,m),M=e.slice(a-C);if(y!==k||I!==M)break e;var w=r.slice(m,s-C),x=e.slice(m,a-C);return Wo(y,w,x,I)}return null}function $s(r,e,t,n){return fi(r,e,t,n,!0)}$s.INSERT=ze,$s.DELETE=Ke,$s.EQUAL=we;var t0=$s,Fs={exports:{}};Fs.exports,function(r,e){var t=200,n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",a="[object Array]",o="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",f="[object GeneratorFunction]",h="[object Map]",g="[object Number]",m="[object Object]",y="[object Promise]",k="[object RegExp]",w="[object Set]",x="[object String]",E="[object Symbol]",C="[object WeakMap]",I="[object ArrayBuffer]",M="[object DataView]",O="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",_="[object Int16Array]",N="[object Int32Array]",G="[object Uint8Array]",me="[object Uint8ClampedArray]",le="[object Uint16Array]",Je="[object Uint32Array]",Ue=/[\\^$.*+?()[\]{}|]/g,Ui=/\w*$/,Ut=/^\[object .+?Constructor\]$/,Vt=/^(?:0|[1-9]\d*)$/,Y={};Y[s]=Y[a]=Y[I]=Y[M]=Y[o]=Y[l]=Y[O]=Y[S]=Y[A]=Y[_]=Y[N]=Y[h]=Y[g]=Y[m]=Y[k]=Y[w]=Y[x]=Y[E]=Y[G]=Y[me]=Y[le]=Y[Je]=!0,Y[c]=Y[d]=Y[C]=!1;var Yt=typeof wn=="object"&&wn&&wn.Object===Object&&wn,Gt=typeof self=="object"&&self&&self.Object===Object&&self,Et=Yt||Gt||Function("return this")(),$a=e&&!e.nodeType&&e,ie=$a&&!0&&r&&!r.nodeType&&r,Fa=ie&&ie.exports===$a;function jc(u,p){return u.set(p[0],p[1]),u}function Ct(u,p){return u.add(p),u}function ja(u,p){for(var v=-1,L=u?u.length:0;++v<L&&p(u[v],v,u)!==!1;);return u}function Ha(u,p){for(var v=-1,L=p.length,U=u.length;++v<L;)u[U+v]=p[v];return u}function Vi(u,p,v,L){for(var U=-1,F=u?u.length:0;++U<F;)v=p(v,u[U],U,u);return v}function Yi(u,p){for(var v=-1,L=Array(u);++v<u;)L[v]=p(v);return L}function Ua(u,p){return u==null?void 0:u[p]}function Gi(u){var p=!1;if(u!=null&&typeof u.toString!="function")try{p=!!(u+"")}catch{}return p}function Va(u){var p=-1,v=Array(u.size);return u.forEach(function(L,U){v[++p]=[U,L]}),v}function Ki(u,p){return function(v){return u(p(v))}}function Ya(u){var p=-1,v=Array(u.size);return u.forEach(function(L){v[++p]=L}),v}var Hc=Array.prototype,Uc=Function.prototype,Vr=Object.prototype,Wi=Et["__core-js_shared__"],Ga=function(){var u=/[^.]+$/.exec(Wi&&Wi.keys&&Wi.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Ka=Uc.toString,Kt=Vr.hasOwnProperty,Yr=Vr.toString,Vc=RegExp("^"+Ka.call(Kt).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ar=Fa?Et.Buffer:void 0,Gr=Et.Symbol,Qi=Et.Uint8Array,ut=Ki(Object.getPrototypeOf,Object),Wa=Object.create,Qa=Vr.propertyIsEnumerable,Yc=Hc.splice,Zi=Object.getOwnPropertySymbols,Kr=ar?ar.isBuffer:void 0,Za=Ki(Object.keys,Object),Wr=Lt(Et,"DataView"),or=Lt(Et,"Map"),Tt=Lt(Et,"Promise"),Qr=Lt(Et,"Set"),Xi=Lt(Et,"WeakMap"),lr=Lt(Object,"create"),Ji=Pe(Wr),cr=Pe(or),es=Pe(Tt),ts=Pe(Qr),ns=Pe(Xi),Dn=Gr?Gr.prototype:void 0,Xa=Dn?Dn.valueOf:void 0;function cn(u){var p=-1,v=u?u.length:0;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function Gc(){this.__data__=lr?lr(null):{}}function Kc(u){return this.has(u)&&delete this.__data__[u]}function Wc(u){var p=this.__data__;if(lr){var v=p[u];return v===n?void 0:v}return Kt.call(p,u)?p[u]:void 0}function Ja(u){var p=this.__data__;return lr?p[u]!==void 0:Kt.call(p,u)}function rs(u,p){var v=this.__data__;return v[u]=lr&&p===void 0?n:p,this}cn.prototype.clear=Gc,cn.prototype.delete=Kc,cn.prototype.get=Wc,cn.prototype.has=Ja,cn.prototype.set=rs;function Ee(u){var p=-1,v=u?u.length:0;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function Qc(){this.__data__=[]}function Zc(u){var p=this.__data__,v=Xr(p,u);if(v<0)return!1;var L=p.length-1;return v==L?p.pop():Yc.call(p,v,1),!0}function Xc(u){var p=this.__data__,v=Xr(p,u);return v<0?void 0:p[v][1]}function Jc(u){return Xr(this.__data__,u)>-1}function eu(u,p){var v=this.__data__,L=Xr(v,u);return L<0?v.push([u,p]):v[L][1]=p,this}Ee.prototype.clear=Qc,Ee.prototype.delete=Zc,Ee.prototype.get=Xc,Ee.prototype.has=Jc,Ee.prototype.set=eu;function Me(u){var p=-1,v=u?u.length:0;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function tu(){this.__data__={hash:new cn,map:new(or||Ee),string:new cn}}function nu(u){return dr(this,u).delete(u)}function ru(u){return dr(this,u).get(u)}function iu(u){return dr(this,u).has(u)}function su(u,p){return dr(this,u).set(u,p),this}Me.prototype.clear=tu,Me.prototype.delete=nu,Me.prototype.get=ru,Me.prototype.has=iu,Me.prototype.set=su;function Ve(u){this.__data__=new Ee(u)}function au(){this.__data__=new Ee}function ou(u){return this.__data__.delete(u)}function lu(u){return this.__data__.get(u)}function cu(u){return this.__data__.has(u)}function uu(u,p){var v=this.__data__;if(v instanceof Ee){var L=v.__data__;if(!or||L.length<t-1)return L.push([u,p]),this;v=this.__data__=new Me(L)}return v.set(u,p),this}Ve.prototype.clear=au,Ve.prototype.delete=ou,Ve.prototype.get=lu,Ve.prototype.has=cu,Ve.prototype.set=uu;function Zr(u,p){var v=os(u)||ei(u)?Yi(u.length,String):[],L=v.length,U=!!L;for(var F in u)Kt.call(u,F)&&!(U&&(F=="length"||Au(F,L)))&&v.push(F);return v}function eo(u,p,v){var L=u[p];(!(Kt.call(u,p)&&so(L,v))||v===void 0&&!(p in u))&&(u[p]=v)}function Xr(u,p){for(var v=u.length;v--;)if(so(u[v][0],p))return v;return-1}function Wt(u,p){return u&&as(p,cs(p),u)}function is(u,p,v,L,U,F,X){var Z;if(L&&(Z=F?L(u,U,F,X):L(u)),Z!==void 0)return Z;if(!Zt(u))return u;var be=os(u);if(be){if(Z=Su(u),!p)return vu(u,Z)}else{var ee=dn(u),qe=ee==d||ee==f;if(ao(u))return Jr(u,p);if(ee==m||ee==s||qe&&!F){if(Gi(u))return F?u:{};if(Z=Qt(qe?{}:u),!p)return wu(u,Wt(Z,u))}else{if(!Y[ee])return F?u:{};Z=xu(u,ee,is,p)}}X||(X=new Ve);var Ye=X.get(u);if(Ye)return Ye;if(X.set(u,Z),!be)var Se=v?ku(u):cs(u);return ja(Se||u,function(_e,Ce){Se&&(Ce=_e,_e=u[Ce]),eo(Z,Ce,is(_e,p,v,L,Ce,u,X))}),Z}function du(u){return Zt(u)?Wa(u):{}}function hu(u,p,v){var L=p(u);return os(u)?L:Ha(L,v(u))}function fu(u){return Yr.call(u)}function pu(u){if(!Zt(u)||Cu(u))return!1;var p=ls(u)||Gi(u)?Vc:Ut;return p.test(Pe(u))}function gu(u){if(!ro(u))return Za(u);var p=[];for(var v in Object(u))Kt.call(u,v)&&v!="constructor"&&p.push(v);return p}function Jr(u,p){if(p)return u.slice();var v=new u.constructor(u.length);return u.copy(v),v}function ss(u){var p=new u.constructor(u.byteLength);return new Qi(p).set(new Qi(u)),p}function ur(u,p){var v=p?ss(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.byteLength)}function to(u,p,v){var L=p?v(Va(u),!0):Va(u);return Vi(L,jc,new u.constructor)}function no(u){var p=new u.constructor(u.source,Ui.exec(u));return p.lastIndex=u.lastIndex,p}function mu(u,p,v){var L=p?v(Ya(u),!0):Ya(u);return Vi(L,Ct,new u.constructor)}function bu(u){return Xa?Object(Xa.call(u)):{}}function yu(u,p){var v=p?ss(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.length)}function vu(u,p){var v=-1,L=u.length;for(p||(p=Array(L));++v<L;)p[v]=u[v];return p}function as(u,p,v,L){v||(v={});for(var U=-1,F=p.length;++U<F;){var X=p[U],Z=void 0;eo(v,X,Z===void 0?u[X]:Z)}return v}function wu(u,p){return as(u,un(u),p)}function ku(u){return hu(u,cs,un)}function dr(u,p){var v=u.__data__;return Eu(p)?v[typeof p=="string"?"string":"hash"]:v.map}function Lt(u,p){var v=Ua(u,p);return pu(v)?v:void 0}var un=Zi?Ki(Zi,Object):Lu,dn=fu;(Wr&&dn(new Wr(new ArrayBuffer(1)))!=M||or&&dn(new or)!=h||Tt&&dn(Tt.resolve())!=y||Qr&&dn(new Qr)!=w||Xi&&dn(new Xi)!=C)&&(dn=function(u){var p=Yr.call(u),v=p==m?u.constructor:void 0,L=v?Pe(v):void 0;if(L)switch(L){case Ji:return M;case cr:return h;case es:return y;case ts:return w;case ns:return C}return p});function Su(u){var p=u.length,v=u.constructor(p);return p&&typeof u[0]=="string"&&Kt.call(u,"index")&&(v.index=u.index,v.input=u.input),v}function Qt(u){return typeof u.constructor=="function"&&!ro(u)?du(ut(u)):{}}function xu(u,p,v,L){var U=u.constructor;switch(p){case I:return ss(u);case o:case l:return new U(+u);case M:return ur(u,L);case O:case S:case A:case _:case N:case G:case me:case le:case Je:return yu(u,L);case h:return to(u,L,v);case g:case x:return new U(u);case k:return no(u);case w:return mu(u,L,v);case E:return bu(u)}}function Au(u,p){return p=p??i,!!p&&(typeof u=="number"||Vt.test(u))&&u>-1&&u%1==0&&u<p}function Eu(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function Cu(u){return!!Ga&&Ga in u}function ro(u){var p=u&&u.constructor,v=typeof p=="function"&&p.prototype||Vr;return u===v}function Pe(u){if(u!=null){try{return Ka.call(u)}catch{}try{return u+""}catch{}}return""}function io(u){return is(u,!0,!0)}function so(u,p){return u===p||u!==u&&p!==p}function ei(u){return Tu(u)&&Kt.call(u,"callee")&&(!Qa.call(u,"callee")||Yr.call(u)==s)}var os=Array.isArray;function ti(u){return u!=null&&oo(u.length)&&!ls(u)}function Tu(u){return lo(u)&&ti(u)}var ao=Kr||Du;function ls(u){var p=Zt(u)?Yr.call(u):"";return p==d||p==f}function oo(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=i}function Zt(u){var p=typeof u;return!!u&&(p=="object"||p=="function")}function lo(u){return!!u&&typeof u=="object"}function cs(u){return ti(u)?Zr(u):gu(u)}function Lu(){return[]}function Du(){return!1}r.exports=io}(Fs,Fs.exports);var Xd=Fs.exports,js={exports:{}};js.exports,function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",f="[object Date]",h="[object Error]",g="[object Function]",m="[object GeneratorFunction]",y="[object Map]",k="[object Number]",w="[object Null]",x="[object Object]",E="[object Promise]",C="[object Proxy]",I="[object RegExp]",M="[object Set]",O="[object String]",S="[object Symbol]",A="[object Undefined]",_="[object WeakMap]",N="[object ArrayBuffer]",G="[object DataView]",me="[object Float32Array]",le="[object Float64Array]",Je="[object Int8Array]",Ue="[object Int16Array]",Ui="[object Int32Array]",Ut="[object Uint8Array]",Vt="[object Uint8ClampedArray]",Y="[object Uint16Array]",Yt="[object Uint32Array]",Gt=/[\\^$.*+?()[\]{}|]/g,Et=/^\[object .+?Constructor\]$/,$a=/^(?:0|[1-9]\d*)$/,ie={};ie[me]=ie[le]=ie[Je]=ie[Ue]=ie[Ui]=ie[Ut]=ie[Vt]=ie[Y]=ie[Yt]=!0,ie[o]=ie[l]=ie[N]=ie[d]=ie[G]=ie[f]=ie[h]=ie[g]=ie[y]=ie[k]=ie[x]=ie[I]=ie[M]=ie[O]=ie[_]=!1;var Fa=typeof wn=="object"&&wn&&wn.Object===Object&&wn,jc=typeof self=="object"&&self&&self.Object===Object&&self,Ct=Fa||jc||Function("return this")(),ja=e&&!e.nodeType&&e,Ha=ja&&!0&&r&&!r.nodeType&&r,Vi=Ha&&Ha.exports===ja,Yi=Vi&&Fa.process,Ua=function(){try{return Yi&&Yi.binding&&Yi.binding("util")}catch{}}(),Gi=Ua&&Ua.isTypedArray;function Va(u,p){for(var v=-1,L=u==null?0:u.length,U=0,F=[];++v<L;){var X=u[v];p(X,v,u)&&(F[U++]=X)}return F}function Ki(u,p){for(var v=-1,L=p.length,U=u.length;++v<L;)u[U+v]=p[v];return u}function Ya(u,p){for(var v=-1,L=u==null?0:u.length;++v<L;)if(p(u[v],v,u))return!0;return!1}function Hc(u,p){for(var v=-1,L=Array(u);++v<u;)L[v]=p(v);return L}function Uc(u){return function(p){return u(p)}}function Vr(u,p){return u.has(p)}function Wi(u,p){return u==null?void 0:u[p]}function Ga(u){var p=-1,v=Array(u.size);return u.forEach(function(L,U){v[++p]=[U,L]}),v}function Ka(u,p){return function(v){return u(p(v))}}function Kt(u){var p=-1,v=Array(u.size);return u.forEach(function(L){v[++p]=L}),v}var Yr=Array.prototype,Vc=Function.prototype,ar=Object.prototype,Gr=Ct["__core-js_shared__"],Qi=Vc.toString,ut=ar.hasOwnProperty,Wa=function(){var u=/[^.]+$/.exec(Gr&&Gr.keys&&Gr.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Qa=ar.toString,Yc=RegExp("^"+Qi.call(ut).replace(Gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zi=Vi?Ct.Buffer:void 0,Kr=Ct.Symbol,Za=Ct.Uint8Array,Wr=ar.propertyIsEnumerable,or=Yr.splice,Tt=Kr?Kr.toStringTag:void 0,Qr=Object.getOwnPropertySymbols,Xi=Zi?Zi.isBuffer:void 0,lr=Ka(Object.keys,Object),Ji=un(Ct,"DataView"),cr=un(Ct,"Map"),es=un(Ct,"Promise"),ts=un(Ct,"Set"),ns=un(Ct,"WeakMap"),Dn=un(Object,"create"),Xa=Pe(Ji),cn=Pe(cr),Gc=Pe(es),Kc=Pe(ts),Wc=Pe(ns),Ja=Kr?Kr.prototype:void 0,rs=Ja?Ja.valueOf:void 0;function Ee(u){var p=-1,v=u==null?0:u.length;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function Qc(){this.__data__=Dn?Dn(null):{},this.size=0}function Zc(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p}function Xc(u){var p=this.__data__;if(Dn){var v=p[u];return v===n?void 0:v}return ut.call(p,u)?p[u]:void 0}function Jc(u){var p=this.__data__;return Dn?p[u]!==void 0:ut.call(p,u)}function eu(u,p){var v=this.__data__;return this.size+=this.has(u)?0:1,v[u]=Dn&&p===void 0?n:p,this}Ee.prototype.clear=Qc,Ee.prototype.delete=Zc,Ee.prototype.get=Xc,Ee.prototype.has=Jc,Ee.prototype.set=eu;function Me(u){var p=-1,v=u==null?0:u.length;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function tu(){this.__data__=[],this.size=0}function nu(u){var p=this.__data__,v=Jr(p,u);if(v<0)return!1;var L=p.length-1;return v==L?p.pop():or.call(p,v,1),--this.size,!0}function ru(u){var p=this.__data__,v=Jr(p,u);return v<0?void 0:p[v][1]}function iu(u){return Jr(this.__data__,u)>-1}function su(u,p){var v=this.__data__,L=Jr(v,u);return L<0?(++this.size,v.push([u,p])):v[L][1]=p,this}Me.prototype.clear=tu,Me.prototype.delete=nu,Me.prototype.get=ru,Me.prototype.has=iu,Me.prototype.set=su;function Ve(u){var p=-1,v=u==null?0:u.length;for(this.clear();++p<v;){var L=u[p];this.set(L[0],L[1])}}function au(){this.size=0,this.__data__={hash:new Ee,map:new(cr||Me),string:new Ee}}function ou(u){var p=Lt(this,u).delete(u);return this.size-=p?1:0,p}function lu(u){return Lt(this,u).get(u)}function cu(u){return Lt(this,u).has(u)}function uu(u,p){var v=Lt(this,u),L=v.size;return v.set(u,p),this.size+=v.size==L?0:1,this}Ve.prototype.clear=au,Ve.prototype.delete=ou,Ve.prototype.get=lu,Ve.prototype.has=cu,Ve.prototype.set=uu;function Zr(u){var p=-1,v=u==null?0:u.length;for(this.__data__=new Ve;++p<v;)this.add(u[p])}function eo(u){return this.__data__.set(u,n),this}function Xr(u){return this.__data__.has(u)}Zr.prototype.add=Zr.prototype.push=eo,Zr.prototype.has=Xr;function Wt(u){var p=this.__data__=new Me(u);this.size=p.size}function is(){this.__data__=new Me,this.size=0}function du(u){var p=this.__data__,v=p.delete(u);return this.size=p.size,v}function hu(u){return this.__data__.get(u)}function fu(u){return this.__data__.has(u)}function pu(u,p){var v=this.__data__;if(v instanceof Me){var L=v.__data__;if(!cr||L.length<t-1)return L.push([u,p]),this.size=++v.size,this;v=this.__data__=new Ve(L)}return v.set(u,p),this.size=v.size,this}Wt.prototype.clear=is,Wt.prototype.delete=du,Wt.prototype.get=hu,Wt.prototype.has=fu,Wt.prototype.set=pu;function gu(u,p){var v=ei(u),L=!v&&so(u),U=!v&&!L&&ti(u),F=!v&&!L&&!U&&lo(u),X=v||L||U||F,Z=X?Hc(u.length,String):[],be=Z.length;for(var ee in u)ut.call(u,ee)&&!(X&&(ee=="length"||U&&(ee=="offset"||ee=="parent")||F&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||xu(ee,be)))&&Z.push(ee);return Z}function Jr(u,p){for(var v=u.length;v--;)if(io(u[v][0],p))return v;return-1}function ss(u,p,v){var L=p(u);return ei(u)?L:Ki(L,v(u))}function ur(u){return u==null?u===void 0?A:w:Tt&&Tt in Object(u)?dn(u):ro(u)}function to(u){return Zt(u)&&ur(u)==o}function no(u,p,v,L,U){return u===p?!0:u==null||p==null||!Zt(u)&&!Zt(p)?u!==u&&p!==p:mu(u,p,v,L,no,U)}function mu(u,p,v,L,U,F){var X=ei(u),Z=ei(p),be=X?l:Qt(u),ee=Z?l:Qt(p);be=be==o?x:be,ee=ee==o?x:ee;var qe=be==x,Ye=ee==x,Se=be==ee;if(Se&&ti(u)){if(!ti(p))return!1;X=!0,qe=!1}if(Se&&!qe)return F||(F=new Wt),X||lo(u)?as(u,p,v,L,U,F):wu(u,p,be,v,L,U,F);if(!(v&i)){var _e=qe&&ut.call(u,"__wrapped__"),Ce=Ye&&ut.call(p,"__wrapped__");if(_e||Ce){var In=_e?u.value():u,hn=Ce?p.value():p;return F||(F=new Wt),U(In,hn,v,L,F)}}return Se?(F||(F=new Wt),ku(u,p,v,L,U,F)):!1}function bu(u){if(!oo(u)||Eu(u))return!1;var p=ao(u)?Yc:Et;return p.test(Pe(u))}function yu(u){return Zt(u)&&ls(u.length)&&!!ie[ur(u)]}function vu(u){if(!Cu(u))return lr(u);var p=[];for(var v in Object(u))ut.call(u,v)&&v!="constructor"&&p.push(v);return p}function as(u,p,v,L,U,F){var X=v&i,Z=u.length,be=p.length;if(Z!=be&&!(X&&be>Z))return!1;var ee=F.get(u);if(ee&&F.get(p))return ee==p;var qe=-1,Ye=!0,Se=v&s?new Zr:void 0;for(F.set(u,p),F.set(p,u);++qe<Z;){var _e=u[qe],Ce=p[qe];if(L)var In=X?L(Ce,_e,qe,p,u,F):L(_e,Ce,qe,u,p,F);if(In!==void 0){if(In)continue;Ye=!1;break}if(Se){if(!Ya(p,function(hn,hr){if(!Vr(Se,hr)&&(_e===hn||U(_e,hn,v,L,F)))return Se.push(hr)})){Ye=!1;break}}else if(!(_e===Ce||U(_e,Ce,v,L,F))){Ye=!1;break}}return F.delete(u),F.delete(p),Ye}function wu(u,p,v,L,U,F,X){switch(v){case G:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case N:return!(u.byteLength!=p.byteLength||!F(new Za(u),new Za(p)));case d:case f:case k:return io(+u,+p);case h:return u.name==p.name&&u.message==p.message;case I:case O:return u==p+"";case y:var Z=Ga;case M:var be=L&i;if(Z||(Z=Kt),u.size!=p.size&&!be)return!1;var ee=X.get(u);if(ee)return ee==p;L|=s,X.set(u,p);var qe=as(Z(u),Z(p),L,U,F,X);return X.delete(u),qe;case S:if(rs)return rs.call(u)==rs.call(p)}return!1}function ku(u,p,v,L,U,F){var X=v&i,Z=dr(u),be=Z.length,ee=dr(p),qe=ee.length;if(be!=qe&&!X)return!1;for(var Ye=be;Ye--;){var Se=Z[Ye];if(!(X?Se in p:ut.call(p,Se)))return!1}var _e=F.get(u);if(_e&&F.get(p))return _e==p;var Ce=!0;F.set(u,p),F.set(p,u);for(var In=X;++Ye<be;){Se=Z[Ye];var hn=u[Se],hr=p[Se];if(L)var sm=X?L(hr,hn,Se,p,u,F):L(hn,hr,Se,u,p,F);if(!(sm===void 0?hn===hr||U(hn,hr,v,L,F):sm)){Ce=!1;break}In||(In=Se=="constructor")}if(Ce&&!In){var co=u.constructor,uo=p.constructor;co!=uo&&"constructor"in u&&"constructor"in p&&!(typeof co=="function"&&co instanceof co&&typeof uo=="function"&&uo instanceof uo)&&(Ce=!1)}return F.delete(u),F.delete(p),Ce}function dr(u){return ss(u,cs,Su)}function Lt(u,p){var v=u.__data__;return Au(p)?v[typeof p=="string"?"string":"hash"]:v.map}function un(u,p){var v=Wi(u,p);return bu(v)?v:void 0}function dn(u){var p=ut.call(u,Tt),v=u[Tt];try{u[Tt]=void 0;var L=!0}catch{}var U=Qa.call(u);return L&&(p?u[Tt]=v:delete u[Tt]),U}var Su=Qr?function(u){return u==null?[]:(u=Object(u),Va(Qr(u),function(p){return Wr.call(u,p)}))}:Lu,Qt=ur;(Ji&&Qt(new Ji(new ArrayBuffer(1)))!=G||cr&&Qt(new cr)!=y||es&&Qt(es.resolve())!=E||ts&&Qt(new ts)!=M||ns&&Qt(new ns)!=_)&&(Qt=function(u){var p=ur(u),v=p==x?u.constructor:void 0,L=v?Pe(v):"";if(L)switch(L){case Xa:return G;case cn:return y;case Gc:return E;case Kc:return M;case Wc:return _}return p});function xu(u,p){return p=p??a,!!p&&(typeof u=="number"||$a.test(u))&&u>-1&&u%1==0&&u<p}function Au(u){var p=typeof u;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?u!=="__proto__":u===null}function Eu(u){return!!Wa&&Wa in u}function Cu(u){var p=u&&u.constructor,v=typeof p=="function"&&p.prototype||ar;return u===v}function ro(u){return Qa.call(u)}function Pe(u){if(u!=null){try{return Qi.call(u)}catch{}try{return u+""}catch{}}return""}function io(u,p){return u===p||u!==u&&p!==p}var so=to(function(){return arguments}())?to:function(u){return Zt(u)&&ut.call(u,"callee")&&!Wr.call(u,"callee")},ei=Array.isArray;function os(u){return u!=null&&ls(u.length)&&!ao(u)}var ti=Xi||Du;function Tu(u,p){return no(u,p)}function ao(u){if(!oo(u))return!1;var p=ur(u);return p==g||p==m||p==c||p==C}function ls(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=a}function oo(u){var p=typeof u;return u!=null&&(p=="object"||p=="function")}function Zt(u){return u!=null&&typeof u=="object"}var lo=Gi?Uc(Gi):yu;function cs(u){return os(u)?gu(u):vu(u)}function Lu(){return[]}function Du(){return!1}r.exports=Tu}(js,js.exports);var Jd=js.exports,Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});const n0=Xd,r0=Jd;var Zo;(function(r){function e(s={},a={},o=!1){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});let l=n0(a);o||(l=Object.keys(l).reduce((c,d)=>(l[d]!=null&&(c[d]=l[d]),c),{}));for(const c in s)s[c]!==void 0&&a[c]===void 0&&(l[c]=s[c]);return Object.keys(l).length>0?l:void 0}r.compose=e;function t(s={},a={}){typeof s!="object"&&(s={}),typeof a!="object"&&(a={});const o=Object.keys(s).concat(Object.keys(a)).reduce((l,c)=>(r0(s[c],a[c])||(l[c]=a[c]===void 0?null:a[c]),l),{});return Object.keys(o).length>0?o:void 0}r.diff=t;function n(s={},a={}){s=s||{};const o=Object.keys(a).reduce((l,c)=>(a[c]!==s[c]&&s[c]!==void 0&&(l[c]=a[c]),l),{});return Object.keys(s).reduce((l,c)=>(s[c]!==a[c]&&a[c]===void 0&&(l[c]=null),l),o)}r.invert=n;function i(s,a,o=!1){if(typeof s!="object")return a;if(typeof a!="object")return;if(!o)return a;const l=Object.keys(a).reduce((c,d)=>(s[d]===void 0&&(c[d]=a[d]),c),{});return Object.keys(l).length>0?l:void 0}r.transform=i})(Zo||(Zo={})),Qo.default=Zo;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});var Xo;(function(r){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}r.length=e})(Xo||(Xo={})),Hs.default=Xo;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});const eh=Hs;class i0{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const t=this.ops[this.index];if(t){const n=this.offset,i=eh.default.length(t);if(e>=i-n?(e=i-n,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{const s={};return t.attributes&&(s.attributes=t.attributes),typeof t.retain=="number"?s.retain=e:typeof t.retain=="object"&&t.retain!==null?s.retain=t.retain:typeof t.insert=="string"?s.insert=t.insert.substr(n,e):s.insert=t.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?eh.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const e=this.offset,t=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(i)}}else return[]}}Jo.default=i0,function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const t=t0,n=Xd,i=Jd,s=Qo;e.AttributeMap=s.default;const a=Hs;e.Op=a.default;const o=Jo;e.OpIterator=o.default;const l="\0",c=(f,h)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const g=Object.keys(f)[0];if(!g||g!==Object.keys(h)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(h)[0]}`);return[g,f[g],h[g]]};class d{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,g){this.handlers[h]=g}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const g=this.handlers[h];if(!g)throw new Error(`no handlers for embed type "${h}"`);return g}insert(h,g){const m={};return typeof h=="string"&&h.length===0?this:(m.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(m.attributes=g),this.push(m))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,g){if(typeof h=="number"&&h<=0)return this;const m={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(m.attributes=g),this.push(m)}push(h){let g=this.ops.length,m=this.ops[g-1];if(h=n(h),typeof m=="object"){if(typeof h.delete=="number"&&typeof m.delete=="number")return this.ops[g-1]={delete:m.delete+h.delete},this;if(typeof m.delete=="number"&&h.insert!=null&&(g-=1,m=this.ops[g-1],typeof m!="object"))return this.ops.unshift(h),this;if(i(h.attributes,m.attributes)){if(typeof h.insert=="string"&&typeof m.insert=="string")return this.ops[g-1]={insert:m.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof m.retain=="number")return this.ops[g-1]={retain:m.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const g=[],m=[];return this.forEach(y=>{(h(y)?g:m).push(y)}),[g,m]}reduce(h,g){return this.ops.reduce(h,g)}changeLength(){return this.reduce((h,g)=>g.insert?h+a.default.length(g):g.delete?h-g.delete:h,0)}length(){return this.reduce((h,g)=>h+a.default.length(g),0)}slice(h=0,g=1/0){const m=[],y=new o.default(this.ops);let k=0;for(;k<g&&y.hasNext();){let w;k<h?w=y.next(h-k):(w=y.next(g-k),m.push(w)),k+=a.default.length(w)}return new d(m)}compose(h){const g=new o.default(this.ops),m=new o.default(h.ops),y=[],k=m.peek();if(k!=null&&typeof k.retain=="number"&&k.attributes==null){let x=k.retain;for(;g.peekType()==="insert"&&g.peekLength()<=x;)x-=g.peekLength(),y.push(g.next());k.retain-x>0&&m.next(k.retain-x)}const w=new d(y);for(;g.hasNext()||m.hasNext();)if(m.peekType()==="insert")w.push(m.next());else if(g.peekType()==="delete")w.push(g.next());else{const x=Math.min(g.peekLength(),m.peekLength()),E=g.next(x),C=m.next(x);if(C.retain){const I={};if(typeof E.retain=="number")I.retain=typeof C.retain=="number"?x:C.retain;else if(typeof C.retain=="number")E.retain==null?I.insert=E.insert:I.retain=E.retain;else{const O=E.retain==null?"insert":"retain",[S,A,_]=c(E[O],C.retain),N=d.getHandler(S);I[O]={[S]:N.compose(A,_,O==="retain")}}const M=s.default.compose(E.attributes,C.attributes,typeof E.retain=="number");if(M&&(I.attributes=M),w.push(I),!m.hasNext()&&i(w.ops[w.ops.length-1],I)){const O=new d(g.rest());return w.concat(O).chop()}}else typeof C.delete=="number"&&(typeof E.retain=="number"||typeof E.retain=="object"&&E.retain!==null)&&w.push(C)}return w.chop()}concat(h){const g=new d(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g}diff(h,g){if(this.ops===h.ops)return new d;const m=[this,h].map(E=>E.map(C=>{if(C.insert!=null)return typeof C.insert=="string"?C.insert:l;const I=E===h?"on":"with";throw new Error("diff() called "+I+" non-document")}).join("")),y=new d,k=t(m[0],m[1],g,!0),w=new o.default(this.ops),x=new o.default(h.ops);return k.forEach(E=>{let C=E[1].length;for(;C>0;){let I=0;switch(E[0]){case t.INSERT:I=Math.min(x.peekLength(),C),y.push(x.next(I));break;case t.DELETE:I=Math.min(C,w.peekLength()),w.next(I),y.delete(I);break;case t.EQUAL:I=Math.min(w.peekLength(),x.peekLength(),C);const M=w.next(I),O=x.next(I);i(M.insert,O.insert)?y.retain(I,s.default.diff(M.attributes,O.attributes)):y.push(O).delete(I);break}C-=I}}),y.chop()}eachLine(h,g=`
`){const m=new o.default(this.ops);let y=new d,k=0;for(;m.hasNext();){if(m.peekType()!=="insert")return;const w=m.peek(),x=a.default.length(w)-m.peekLength(),E=typeof w.insert=="string"?w.insert.indexOf(g,x)-x:-1;if(E<0)y.push(m.next());else if(E>0)y.push(m.next(E));else{if(h(y,m.next(1).attributes||{},k)===!1)return;k+=1,y=new d}}y.length()>0&&h(y,{},k)}invert(h){const g=new d;return this.reduce((m,y)=>{if(y.insert)g.delete(a.default.length(y));else{if(typeof y.retain=="number"&&y.attributes==null)return g.retain(y.retain),m+y.retain;if(y.delete||typeof y.retain=="number"){const k=y.delete||y.retain;return h.slice(m,m+k).forEach(x=>{y.delete?g.push(x):y.retain&&y.attributes&&g.retain(a.default.length(x),s.default.invert(y.attributes,x.attributes))}),m+k}else if(typeof y.retain=="object"&&y.retain!==null){const k=h.slice(m,m+1),w=new o.default(k.ops).next(),[x,E,C]=c(y.retain,w.insert),I=d.getHandler(x);return g.retain({[x]:I.invert(E,C)},s.default.invert(y.attributes,w.attributes)),m+1}}return m},0),g.chop()}transform(h,g=!1){if(g=!!g,typeof h=="number")return this.transformPosition(h,g);const m=h,y=new o.default(this.ops),k=new o.default(m.ops),w=new d;for(;y.hasNext()||k.hasNext();)if(y.peekType()==="insert"&&(g||k.peekType()!=="insert"))w.retain(a.default.length(y.next()));else if(k.peekType()==="insert")w.push(k.next());else{const x=Math.min(y.peekLength(),k.peekLength()),E=y.next(x),C=k.next(x);if(E.delete)continue;if(C.delete)w.push(C);else{const I=E.retain,M=C.retain;let O=typeof M=="object"&&M!==null?M:x;if(typeof I=="object"&&I!==null&&typeof M=="object"&&M!==null){const S=Object.keys(I)[0];if(S===Object.keys(M)[0]){const A=d.getHandler(S);A&&(O={[S]:A.transform(I[S],M[S],g)})}}w.retain(O,s.default.transform(E.attributes,C.attributes,g))}}return w.chop()}transformPosition(h,g=!1){g=!!g;const m=new o.default(this.ops);let y=0;for(;m.hasNext()&&y<=h;){const k=m.peekLength(),w=m.peekType();if(m.next(),w==="delete"){h-=Math.min(k,h-y);continue}else w==="insert"&&(y<h||!g)&&(h+=k);y+=k}return h}}d.Op=a.default,d.OpIterator=o.default,d.AttributeMap=s.default,d.handlers={},e.default=d,r.exports=d,r.exports.default=d}(Yo,Yo.exports);var et=Yo.exports;const B=jd(et);class pt extends Ge{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}pt.blotName="break",pt.tagName="BR";let gt=class extends Bs{};const s0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Us(r){return r.replace(/[&<>"']/g,e=>s0[e])}const Ht=class Ht extends jo{static compare(e,t){const n=Ht.order.indexOf(e),i=Ht.order.indexOf(t);return n>=0||i>=0?n-i:e===t?0:e<t?-1:1}formatAt(e,t,n,i){if(Ht.compare(this.statics.blotName,n)<0&&this.scroll.query(n,P.BLOT)){const s=this.isolate(e,t);i&&s.wrap(n,i)}else super.formatAt(e,t,n,i)}optimize(e){if(super.optimize(e),this.parent instanceof Ht&&Ht.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}};q(Ht,"allowedChildren",[Ht,pt,Ge,gt]),q(Ht,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Mt=Ht;const th=1;class Ae extends hi{constructor(){super(...arguments);q(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=nh(this)),this.cache.delta}deleteAt(t,n){super.deleteAt(t,n),this.cache={}}formatAt(t,n,i,s){n<=0||(this.scroll.query(i,P.BLOCK)?t+n===this.length()&&this.format(i,s):super.formatAt(t,Math.min(n,this.length()-t-1),i,s),this.cache={})}insertAt(t,n,i){if(i!=null){super.insertAt(t,n,i),this.cache={};return}if(n.length===0)return;const s=n.split(`
`),a=s.shift();a.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let o=this;s.reduce((l,c)=>(o=o.split(l,!0),o.insertAt(0,c),c.length),t+a.length)}insertBefore(t,n){const{head:i}=this.children;super.insertBefore(t,n),i instanceof pt&&i.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+th),this.cache.length}moveChildren(t,n){super.moveChildren(t,n),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(t===0||t>=this.length()-th)){const s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}const i=super.split(t,n);return this.cache={},i}}Ae.blotName="block",Ae.tagName="P",Ae.defaultChild=pt,Ae.allowedChildren=[pt,Mt,Ge,gt];class tt extends Ge{attach(){super.attach(),this.attributes=new zs(this.domNode)}delta(){return new B().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){const n=this.scroll.query(e,P.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,t)}formatAt(e,t,n,i){this.format(n,i)}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n);return}const i=t.split(`
`),s=i.pop(),a=i.map(l=>{const c=this.scroll.create(Ae.blotName);return c.insertAt(0,l),c}),o=this.split(e);a.forEach(l=>{this.parent.insertBefore(l,o)}),s&&this.parent.insertBefore(this.scroll.create("text",s),o)}}tt.scope=P.BLOCK_BLOT;function nh(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(Te).reduce((t,n)=>n.length()===0?t:t.insert(n.value(),nt(n,{},e)),new B).insert(`
`,nt(r))}function nt(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(e={...e,...r.formats()},t&&delete e["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?e:nt(r.parent,e,t)}const ct=class ct extends Ge{static value(){}constructor(e,t,n){super(e,t),this.selection=n,this.textNode=document.createTextNode(ct.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let n=this,i=0;for(;n!=null&&n.statics.scope!==P.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=ct.CONTENTS.length,n.optimize(),n.formatAt(i,ct.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const t=this.prev instanceof gt?this.prev:null,n=t?t.length():0,i=this.next instanceof gt?this.next:null,s=i?i.text:"",{textNode:a}=this,o=a.data.split(ct.CONTENTS).join("");a.data=ct.CONTENTS;let l;if(t)l=t,(o||i)&&(t.insertAt(t.length(),o+s),i&&i.remove());else if(i)l=i,i.insertAt(0,o);else{const c=document.createTextNode(o);l=this.scroll.create(c),this.parent.insertBefore(l,this)}if(this.remove(),e){const c=(h,g)=>t&&h===t.domNode?g:h===a?n+g-1:i&&h===i.domNode?n+o.length+g:null,d=c(e.start.node,e.start.offset),f=c(e.end.node,e.end.offset);if(d!==null&&f!==null)return{startNode:l.domNode,startOffset:d,endNode:l.domNode,endOffset:f}}return null}update(e,t){if(e.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(t.range=n)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=ct.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}};q(ct,"blotName","cursor"),q(ct,"className","ql-cursor"),q(ct,"tagName","span"),q(ct,"CONTENTS","\uFEFF");let xr=ct;var rh={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,f||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],g]:l._events[m].push(g):(l._events[m]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)e.call(d,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},o.prototype.listeners=function(c){var d=t?t+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,m=new Array(g);h<g;h++)m[h]=f[h].fn;return m},o.prototype.listenerCount=function(c){var d=t?t+c:c,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,d,f,h,g,m){var y=t?t+c:c;if(!this._events[y])return!1;var k=this._events[y],w=arguments.length,x,E;if(k.fn){switch(k.once&&this.removeListener(c,k.fn,void 0,!0),w){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,d),!0;case 3:return k.fn.call(k.context,d,f),!0;case 4:return k.fn.call(k.context,d,f,h),!0;case 5:return k.fn.call(k.context,d,f,h,g),!0;case 6:return k.fn.call(k.context,d,f,h,g,m),!0}for(E=1,x=new Array(w-1);E<w;E++)x[E-1]=arguments[E];k.fn.apply(k.context,x)}else{var C=k.length,I;for(E=0;E<C;E++)switch(k[E].once&&this.removeListener(c,k[E].fn,void 0,!0),w){case 1:k[E].fn.call(k[E].context);break;case 2:k[E].fn.call(k[E].context,d);break;case 3:k[E].fn.call(k[E].context,d,f);break;case 4:k[E].fn.call(k[E].context,d,f,h);break;default:if(!x)for(I=1,x=new Array(w-1);I<w;I++)x[I-1]=arguments[I];k[E].fn.apply(k[E].context,x)}}return!0},o.prototype.on=function(c,d,f){return s(this,c,d,f,!1)},o.prototype.once=function(c,d,f){return s(this,c,d,f,!0)},o.prototype.removeListener=function(c,d,f,h){var g=t?t+c:c;if(!this._events[g])return this;if(!d)return a(this,g),this;var m=this._events[g];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&a(this,g);else{for(var y=0,k=[],w=m.length;y<w;y++)(m[y].fn!==d||h&&!m[y].once||f&&m[y].context!==f)&&k.push(m[y]);k.length?this._events[g]=k.length===1?k[0]:k:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var d;return c?(d=t?t+c:c,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(rh);var a0=rh.exports;const o0=jd(a0),el=new WeakMap,tl=["error","warn","log","info"];let nl="warn";function ih(r){if(nl&&tl.indexOf(r)<=tl.indexOf(nl)){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];console[r](...t)}}function tn(r){return tl.reduce((e,t)=>(e[t]=ih.bind(console,t,r),e),{})}tn.level=r=>{nl=r},ih.level=tn.level;const rl=tn("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(r=>{document.addEventListener(r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(i=>{const s=el.get(i);s&&s.emitter&&s.emitter.handleDOM(...t)})})});class R extends o0{constructor(){super(),this.domListeners={},this.on("error",rl.error)}emit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rl.log.call(rl,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(this.domListeners[e.type]||[]).forEach(s=>{let{node:a,handler:o}=s;(e.target===a||a.contains(e.target))&&o(e,...n)})}listenDOM(e,t,n){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:n})}}q(R,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),q(R,"sources",{API:"api",SILENT:"silent",USER:"user"});const il=tn("quill:selection");class Yn{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}}class l0{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Yn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,R.sources.USER),1)}),this.emitter.on(R.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(R.events.SCROLL_UPDATE,(i,s)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const a=s.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(a?R.sources.SILENT:i)}catch{}})}),this.emitter.on(R.events.SCROLL_OPTIMIZE,(n,i)=>{if(i.range){const{startNode:s,startOffset:a,endNode:o,endOffset:l}=i.range;this.setNativeRange(s,a,o,l),this.update(R.sources.SILENT)}}),this.update(R.sources.SILENT)}handleComposition(){this.emitter.on(R.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(R.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(R.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(e,P.BLOCK))){if(n.start.node!==this.cursor.textNode){const i=this.scroll.find(n.start.node,!1);if(i==null)return;if(i instanceof Te){const s=i.split(n.start.offset);i.parent.insertBefore(this.cursor,s)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;let i,[s,a]=this.scroll.leaf(e);if(s==null)return null;if(t>0&&a===s.length()){const[d]=this.scroll.leaf(e+1);if(d){const[f]=this.scroll.line(e),[h]=this.scroll.line(e+1);f===h&&(s=d,a=0)}}[i,a]=s.position(a,!0);const o=document.createRange();if(t>0)return o.setStart(i,a),[s,a]=this.scroll.leaf(e+t),s==null?null:([i,a]=s.position(a,!0),o.setEnd(i,a),o.getBoundingClientRect());let l="left",c;if(i instanceof Text){if(!i.data.length)return null;a<i.data.length?(o.setStart(i,a),o.setEnd(i,a+1)):(o.setStart(i,a-1),o.setEnd(i,a),l="right"),c=o.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;c=s.domNode.getBoundingClientRect(),a>0&&(l="right")}return{bottom:c.top+c.height,height:c.height,left:c[l],right:c[l],top:c.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const t=e.getRangeAt(0);if(t==null)return null;const n=this.normalizeNative(t);return il.info("getNativeRange",n),n}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&sl(this.root,document.activeElement)}normalizedToRange(e){const t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);const n=t.map(a=>{const[o,l]=a,c=this.scroll.find(o,!0),d=c.offset(this.scroll);return l===0?d:c instanceof Te?d+c.index(o,l):d+c.length()}),i=Math.min(Math.max(...n),this.scroll.length()-1),s=Math.min(i,...n);return new Yn(s,i-s)}normalizeNative(e){if(!sl(this.root,e.startContainer)||!e.collapsed&&!sl(this.root,e.endContainer))return null;const t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(n=>{let{node:i,offset:s}=n;for(;!(i instanceof Text)&&i.childNodes.length>0;)if(i.childNodes.length>s)i=i.childNodes[s],s=0;else if(i.childNodes.length===s)i=i.lastChild,i instanceof Text?s=i.data.length:i.childNodes.length>0?s=i.childNodes.length:s=i.childNodes.length+1;else break;n.node=i,n.offset=s}),t}rangeToNative(e){const t=this.scroll.length(),n=(i,s)=>{i=Math.min(t-1,i);const[a,o]=this.scroll.leaf(i);return a?a.position(o,s):[null,-1]};return[...n(e.index,!1),...n(e.index+e.length,!0)]}setNativeRange(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(il.info("setNativeRange",e,t,n,i),e!=null&&(this.root.parentNode==null||e.parentNode==null||n.parentNode==null))return;const a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||s||e!==o.startContainer||t!==o.startOffset||n!==o.endContainer||i!==o.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),n instanceof Element&&n.tagName==="BR"&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const l=document.createRange();l.setStart(e,t),l.setEnd(n,i),a.removeAllRanges(),a.addRange(l)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R.sources.API;if(typeof t=="string"&&(n=t,t=!1),il.info("setRange",e),e!=null){const i=this.rangeToNative(e);this.setNativeRange(...i,t)}else this.setNativeRange(null);this.update(n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R.sources.USER;const t=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,this.lastRange!=null&&(this.savedRange=this.lastRange),!$o(t,this.lastRange)){if(!this.composing&&i!=null&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const s=[R.events.SELECTION_CHANGE,br(this.lastRange),br(t),e];this.emitter.emit(R.events.EDITOR_CHANGE,...s),e!==R.sources.SILENT&&this.emitter.emit(...s)}}}function sl(r,e){try{e.parentNode}catch{return!1}return r.contains(e)}const c0=/^[ -~]*$/;class u0{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();const n=sh(e),i=new B;return h0(n.ops.slice()).reduce((a,o)=>{const l=et.Op.length(o);let c=o.attributes||{},d=!1,f=!1;if(o.insert!=null){if(i.retain(l),typeof o.insert=="string"){const m=o.insert;f=!m.endsWith(`
`)&&(t<=a||!!this.scroll.descendant(tt,a)[0]),this.scroll.insertAt(a,m);const[y,k]=this.scroll.line(a);let w=yn({},nt(y));if(y instanceof Ae){const[x]=y.descendant(Te,k);x&&(w=yn(w,nt(x)))}c=et.AttributeMap.diff(w,c)||{}}else if(typeof o.insert=="object"){const m=Object.keys(o.insert)[0];if(m==null)return a;const y=this.scroll.query(m,P.INLINE)!=null;if(y)(t<=a||this.scroll.descendant(tt,a)[0])&&(f=!0);else if(a>0){const[k,w]=this.scroll.descendant(Te,a-1);k instanceof gt?k.value()[w]!==`
`&&(d=!0):k instanceof Ge&&k.statics.scope===P.INLINE_BLOT&&(d=!0)}if(this.scroll.insertAt(a,m,o.insert[m]),y){const[k]=this.scroll.descendant(Te,a);if(k){const w=yn({},nt(k));c=et.AttributeMap.diff(w,c)||{}}}}t+=l}else if(i.push(o),o.retain!==null&&typeof o.retain=="object"){const m=Object.keys(o.retain)[0];if(m==null)return a;this.scroll.updateEmbedAt(a,m,o.retain[m])}Object.keys(c).forEach(m=>{this.scroll.formatAt(a,l,m,c[m])});const h=d?1:0,g=f?1:0;return t+=h+g,i.retain(h),i.delete(g),a+l+h+g},0),i.reduce((a,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(a,o.delete),a):a+et.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new B().retain(e).delete(t))}formatLine(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(s=>{this.scroll.lines(e,Math.max(t,1)).forEach(a=>{a.format(s,n[s])})}),this.scroll.optimize();const i=new B().retain(e).retain(t,br(n));return this.update(i)}formatText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(s=>{this.scroll.formatAt(e,t,s,n[s])});const i=new B().retain(e).retain(t,br(n));return this.update(i)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new B)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],i=[];t===0?this.scroll.path(e).forEach(o=>{const[l]=o;l instanceof Ae?n.push(l):l instanceof Te&&i.push(l)}):(n=this.scroll.lines(e,t),i=this.scroll.descendants(Te,e,t));const[s,a]=[n,i].map(o=>{const l=o.shift();if(l==null)return{};let c=nt(l);for(;Object.keys(c).length>0;){const d=o.shift();if(d==null)return c;c=d0(nt(d),c)}return c});return{...s,...a}}getHTML(e,t){const[n,i]=this.scroll.line(e);if(n){const s=n.length();return n.length()>=i+t&&!(i===0&&t===s)?pi(n,i,t,!0):pi(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(e,t){const n=sh(t),i=new B().retain(e).concat(n);return this.scroll.insertContents(e,n),this.update(i)}insertEmbed(e,t,n){return this.scroll.insertAt(e,t,n),this.update(new B().retain(e).insert({[t]:n}))}insertText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(n).forEach(i=>{this.scroll.formatAt(e,t.length,i,n[i])}),this.update(new B().retain(e).insert(t,br(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Ae.blotName)return!1;const t=e;return t.children.length>1?!1:t.children.head instanceof pt}removeFormat(e,t){const n=this.getText(e,t),[i,s]=this.scroll.line(e+t);let a=0,o=new B;i!=null&&(a=i.length()-s,o=i.delta().slice(s,s+a-1).insert(`
`));const c=this.getContents(e,t+a).diff(new B().insert(n).concat(o)),d=new B().retain(e).concat(c);return this.applyDelta(d)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const i=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(c0)&&this.scroll.find(t[0].target)){const s=this.scroll.find(t[0].target),a=nt(s),o=s.offset(this.scroll),l=t[0].oldValue.replace(xr.CONTENTS,""),c=new B().insert(l),d=new B().insert(s.value()),f=n&&{oldRange:ah(n.oldRange,-o),newRange:ah(n.newRange,-o)};e=new B().retain(o).concat(c.diff(d,f)).reduce((g,m)=>m.insert?g.insert(m.insert,a):g.push(m),new B),this.delta=i.compose(e)}else this.delta=this.getDelta(),(!e||!$o(i.compose(e),this.delta))&&(e=i.diff(this.delta,n));return e}}function Ar(r,e,t){if(r.length===0){const[g]=al(t.pop());return e<=0?`</li></${g}>`:`</li></${g}>${Ar([],e-1,t)}`}const[{child:n,offset:i,length:s,indent:a,type:o},...l]=r,[c,d]=al(o);if(a>e)return t.push(o),a===e+1?`<${c}><li${d}>${pi(n,i,s)}${Ar(l,a,t)}`:`<${c}><li>${Ar(r,e+1,t)}`;const f=t[t.length-1];if(a===e&&o===f)return`</li><li${d}>${pi(n,i,s)}${Ar(l,a,t)}`;const[h]=al(t.pop());return`</li></${h}>${Ar(r,e-1,t)}`}function pi(r,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(e,t);if(r instanceof gt)return Us(r.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(r instanceof ft){if(r.statics.blotName==="list-container"){const c=[];return r.children.forEachAt(e,t,(d,f,h)=>{const g="formats"in d&&typeof d.formats=="function"?d.formats():{};c.push({child:d,offset:f,length:h,indent:g.indent||0,type:g.list})}),Ar(c,-1,[])}const i=[];if(r.children.forEachAt(e,t,(c,d,f)=>{i.push(pi(c,d,f))}),n||r.statics.blotName==="list")return i.join("");const{outerHTML:s,innerHTML:a}=r.domNode,[o,l]=s.split(`>${a}<`);return o==="<table"?`<table style="border: 1px solid #000;">${i.join("")}<${l}`:`${o}>${i.join("")}<${l}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function d0(r,e){return Object.keys(e).reduce((t,n)=>{if(r[n]==null)return t;const i=e[n];return i===r[n]?t[n]=i:Array.isArray(i)?i.indexOf(r[n])<0?t[n]=i.concat([r[n]]):t[n]=i:t[n]=[i,r[n]],t},{})}function al(r){const e=r==="ordered"?"ol":"ul";switch(r){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function sh(r){return r.reduce((e,t)=>{if(typeof t.insert=="string"){const n=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(n,t.attributes)}return e.push(t)},new B)}function ah(r,e){let{index:t,length:n}=r;return new Yn(t+e,n)}function h0(r){const e=[];return r.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((i,s)=>{s&&e.push({insert:`
`,attributes:t.attributes}),i&&e.push({insert:i,attributes:t.attributes})}):e.push(t)}),e}class mt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}}q(mt,"DEFAULTS",{});const Vs="\uFEFF";class ol extends Ge{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Vs),this.rightGuard=document.createTextNode(Vs),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,n;const i=e.data.split(Vs).join("");if(e===this.leftGuard)if(this.prev instanceof gt){const s=this.prev.length();this.prev.insertAt(s,i),t={startNode:this.prev.domNode,startOffset:s+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(n),this),t={startNode:n,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof gt?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(n),this.next),t={startNode:n,startOffset:i.length}));return e.data=Vs,t}update(e,t){e.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const i=this.restore(n.target);i&&(t.range=i)}})}}class f0{constructor(e,t){q(this,"isComposing",!1);this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof ol)&&(this.emitter.emit(R.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(R.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(R.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(R.events.COMPOSITION_END,e),this.isComposing=!1}}const ji=class ji{constructor(e,t){q(this,"modules",{});this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}};q(ji,"DEFAULTS",{modules:{}}),q(ji,"themes",{default:ji});let Er=ji;const p0=r=>r.parentElement||r.getRootNode().host||null,g0=r=>{const e=r.getBoundingClientRect(),t="offsetWidth"in r&&Math.abs(e.width)/r.offsetWidth||1,n="offsetHeight"in r&&Math.abs(e.height)/r.offsetHeight||1;return{top:e.top,right:e.left+r.clientWidth*t,bottom:e.top+r.clientHeight*n,left:e.left}},Ys=r=>{const e=parseInt(r,10);return Number.isNaN(e)?0:e},oh=(r,e,t,n,i,s)=>r<t&&e>n?0:r<t?-(t-r+i):e>n?e-r>n-t?r+i-t:e-n+s:0,m0=(r,e)=>{var s,a,o;const t=r.ownerDocument;let n=e,i=r;for(;i;){const l=i===t.body,c=l?{top:0,right:((s=window.visualViewport)==null?void 0:s.width)??t.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??t.documentElement.clientHeight,left:0}:g0(i),d=getComputedStyle(i),f=oh(n.left,n.right,c.left,c.right,Ys(d.scrollPaddingLeft),Ys(d.scrollPaddingRight)),h=oh(n.top,n.bottom,c.top,c.bottom,Ys(d.scrollPaddingTop),Ys(d.scrollPaddingBottom));if(f||h)if(l)(o=t.defaultView)==null||o.scrollBy(f,h);else{const{scrollLeft:g,scrollTop:m}=i;h&&(i.scrollTop+=h),f&&(i.scrollLeft+=f);const y=i.scrollLeft-g,k=i.scrollTop-m;n={left:n.left-y,top:n.top-k,right:n.right-y,bottom:n.bottom-k}}i=l||d.position==="fixed"?null:p0(i)}},b0=100,y0=["block","break","cursor","inline","scroll","text"],v0=(r,e,t)=>{const n=new vr;return y0.forEach(i=>{const s=e.query(i);s&&n.register(s)}),r.forEach(i=>{let s=e.query(i);s||t.error(`Cannot register "${i}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;s;)if(n.register(s),s="blotName"in s?s.requiredContainer??null:null,a+=1,a>b0){t.error(`Cycle detected in registering blot requiredContainer: "${i}"`);break}}),n},Cr=tn("quill"),Gs=new vr;ft.uiClass="ql-ui";const At=class At{static debug(e){e===!0&&(e="log"),tn.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return el.get(e)||Gs.find(e,t)}static import(e){return this.imports[e]==null&&Cr.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in e?e.attrName:e.blotName;typeof n=="string"?this.register(`formats/${n}`,e,t):Object.keys(e).forEach(i=>{this.register(i,e[i],t)})}else{const e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!n&&Cr.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&Gs.register(t),typeof t.register=="function"&&t.register(Gs)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=w0(e,t),this.container=this.options.container,this.container==null){Cr.error("Invalid Quill container",e);return}this.options.debug&&At.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",el.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new R;const i=Uo.blotName,s=this.options.registry.query(i);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new u0(this.scroll),this.selection=new l0(this.scroll,this.emitter),this.composition=new f0(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(R.events.EDITOR_CHANGE,a=>{a===R.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(R.events.SCROLL_UPDATE,(a,o)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),d=l&&c?{oldRange:l,newRange:c}:void 0;bt.call(this,()=>this.editor.update(null,o,d),a)}),this.emitter.on(R.events.SCROLL_EMBED_UPDATE,(a,o)=>{const l=this.selection.lastRange,[c]=this.selection.getRange(),d=l&&c?{oldRange:l,newRange:c}:void 0;bt.call(this,()=>{const f=new B().retain(a.offset(this)).retain({[a.statics.blotName]:o});return this.editor.update(f,[],d)},At.sources.USER)}),n){const a=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const n=e;e=document.createElement("div"),e.classList.add(n)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,n){return[e,t,,n]=nn(e,t,n),bt.call(this,()=>this.editor.deleteText(e,t),n,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R.sources.API;return bt.call(this,()=>{const i=this.getSelection(!0);let s=new B;if(i==null)return s;if(this.scroll.query(e,P.BLOCK))s=this.editor.formatLine(i.index,i.length,{[e]:t});else{if(i.length===0)return this.selection.format(e,t),s;s=this.editor.formatText(i.index,i.length,{[e]:t})}return this.setSelection(i,R.sources.SILENT),s},n)}formatLine(e,t,n,i,s){let a;return[e,t,a,s]=nn(e,t,n,i,s),bt.call(this,()=>this.editor.formatLine(e,t,a),s,e,0)}formatText(e,t,n,i,s){let a;return[e,t,a,s]=nn(e,t,n,i,s),bt.call(this,()=>this.editor.formatText(e,t,a),s,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof e=="number"?n=this.selection.getBounds(e,t):n=this.selection.getBounds(e.index,e.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=nn(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=nn(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t??this.getLength()-e),[e,t]=nn(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:At.sources.API;return bt.call(this,()=>this.editor.insertEmbed(e,t,n),i,e)}insertText(e,t,n,i,s){let a;return[e,,a,s]=nn(e,0,n,i,s),bt.call(this,()=>this.editor.insertText(e,t,a),s,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,n){return[e,t,,n]=nn(e,t,n),bt.call(this,()=>this.editor.removeFormat(e,t),n,e)}scrollRectIntoView(e){m0(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;return bt.call(this,()=>{e=new B(e);const n=this.getLength(),i=this.editor.deleteText(0,n),s=this.editor.insertContents(0,e),a=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(a)},t)}setSelection(e,t,n){e==null?this.selection.setRange(null,t||At.sources.API):([e,t,,n]=nn(e,t,n),this.selection.setRange(new Yn(Math.max(0,e),t),n),n!==R.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;const n=new B().insert(e);return this.setContents(n,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R.sources.USER;const t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R.sources.API;return bt.call(this,()=>(e=new B(e),this.editor.applyDelta(e)),t,!0)}};q(At,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Gs,theme:"default"}),q(At,"events",R.events),q(At,"sources",R.sources),q(At,"version","2.0.3"),q(At,"imports",{delta:B,parchment:V1,"core/module":mt,"core/theme":Er});let D=At;function lh(r){return typeof r=="string"?document.querySelector(r):r}function ll(r){return Object.entries(r??{}).reduce((e,t)=>{let[n,i]=t;return{...e,[n]:i===!0?{}:i}},{})}function ch(r){return Object.fromEntries(Object.entries(r).filter(e=>e[1]!==void 0))}function w0(r,e){const t=lh(r);if(!t)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===D.DEFAULTS.theme?Er:D.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:s,...a}=D.DEFAULTS,{modules:o,...l}=i.DEFAULTS;let c=ll(e.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});const d=yn({},ll(s),ll(o),c),f={...a,...ch(l),...ch(e)};let h=e.registry;return h?e.formats&&Cr.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?v0(e.formats,f.registry,Cr):f.registry,{...f,registry:h,container:t,theme:i,modules:Object.entries(d).reduce((g,m)=>{let[y,k]=m;if(!k)return g;const w=D.import(`modules/${y}`);return w==null?(Cr.error(`Cannot load ${y} module. Are you sure you registered it?`),g):{...g,[y]:yn({},w.DEFAULTS||{},k)}},{}),bounds:lh(f.bounds)}}function bt(r,e,t,n){if(!this.isEnabled()&&e===R.sources.USER&&!this.allowReadOnlyEdits)return new B;let i=t==null?null:this.getSelection();const s=this.editor.delta,a=r();if(i!=null&&(t===!0&&(t=i.index),n==null?i=uh(i,a,e):n!==0&&(i=uh(i,t,n,e)),this.setSelection(i,R.sources.SILENT)),a.length()>0){const o=[R.events.TEXT_CHANGE,a,s,e];this.emitter.emit(R.events.EDITOR_CHANGE,...o),e!==R.sources.SILENT&&this.emitter.emit(...o)}return a}function nn(r,e,t,n,i){let s={};return typeof r.index=="number"&&typeof r.length=="number"?typeof e!="number"?(i=n,n=t,t=e,e=r.length,r=r.index):(e=r.length,r=r.index):typeof e!="number"&&(i=n,n=t,t=e,e=0),typeof t=="object"?(s=t,i=n):typeof t=="string"&&(n!=null?s[t]=n:i=t),i=i||R.sources.API,[r,e,s,i]}function uh(r,e,t,n){const i=typeof t=="number"?t:0;if(r==null)return null;let s,a;return e&&typeof e.transformPosition=="function"?[s,a]=[r.index,r.index+r.length].map(o=>e.transformPosition(o,n!==R.sources.USER)):[s,a]=[r.index,r.index+r.length].map(o=>o<e||o===e&&n===R.sources.USER?o:i>=0?o+i:Math.max(e,o+i)),new Yn(s,a-s)}class Gn extends Rs{}function dh(r){return r instanceof Ae||r instanceof tt}function hh(r){return typeof r.updateContent=="function"}class Tr extends Uo{constructor(e,t,n){let{emitter:i}=n;super(e,t),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(R.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(R.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(R.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){const[n,i]=this.line(e),[s]=this.line(e+t);if(super.deleteAt(e,t),s!=null&&n!==s&&i>0){if(n instanceof tt||s instanceof tt){this.optimize();return}const a=s.children.head instanceof pt?null:s.children.head;n.moveChildren(s,a),n.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,n,i){super.formatAt(e,t,n,i),this.optimize()}insertAt(e,t,n){if(e>=this.length())if(n==null||this.scroll.query(t,P.BLOCK)==null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),n==null&&t.endsWith(`
`)?i.insertAt(0,t.slice(0,-1),n):i.insertAt(0,t,n)}else{const i=this.scroll.create(t,n);this.appendChild(i)}else super.insertAt(e,t,n);this.optimize()}insertBefore(e,t){if(e.statics.scope===P.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),super.insertBefore(n,t)}else super.insertBefore(e,t)}insertContents(e,t){const n=this.deltaToRenderBlocks(t.concat(new B().insert(`
`))),i=n.pop();if(i==null)return;this.batchStart();const s=n.shift();if(s){const l=s.type==="block"&&(s.delta.length()===0||!this.descendant(tt,e)[0]&&e<this.length()),c=s.type==="block"?s.delta:new B().insert({[s.key]:s.value});cl(this,e,c);const d=s.type==="block"?1:0,f=e+c.length()+d;l&&this.insertAt(f-1,`
`);const h=nt(this.line(e)[0]),g=et.AttributeMap.diff(h,s.attributes)||{};Object.keys(g).forEach(m=>{this.formatAt(f-1,1,m,g[m])}),e=f}let[a,o]=this.children.find(e);if(n.length&&(a&&(a=a.split(o),o=0),n.forEach(l=>{if(l.type==="block"){const c=this.createBlock(l.attributes,a||void 0);cl(c,0,l.delta)}else{const c=this.create(l.key,l.value);this.insertBefore(c,a||void 0),Object.keys(l.attributes).forEach(d=>{c.format(d,l.attributes[d])})}})),i.type==="block"&&i.delta.length()){const l=a?a.offset(a.scroll)+o:this.length();cl(this,l,i.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const t=this.path(e).pop();if(!t)return[null,-1];const[n,i]=t;return n instanceof Te?[n,i]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(dh,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(i,s,a)=>{let o=[],l=a;return i.children.forEachAt(s,a,(c,d,f)=>{dh(c)?o.push(c):c instanceof Rs&&(o=o.concat(n(c,d,l))),l-=f}),o};return n(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(R.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=R.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(n=>{let{target:i}=n;const s=this.find(i,!0);return s&&!hh(s)}),e.length>0&&this.emitter.emit(R.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(R.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,n){const[i]=this.descendant(s=>s instanceof tt,e);i&&i.statics.blotName===t&&hh(i)&&i.updateContent(n)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const t=[];let n=new B;return e.forEach(i=>{const s=i==null?void 0:i.insert;if(s)if(typeof s=="string"){const a=s.split(`
`);a.slice(0,-1).forEach(l=>{n.insert(l,i.attributes),t.push({type:"block",delta:n,attributes:i.attributes??{}}),n=new B});const o=a[a.length-1];o&&n.insert(o,i.attributes)}else{const a=Object.keys(s)[0];if(!a)return;this.query(a,P.INLINE)?n.push(i):(n.length()&&t.push({type:"block",delta:n,attributes:{}}),n=new B,t.push({type:"blockEmbed",key:a,value:s[a],attributes:i.attributes??{}}))}}),n.length()&&t.push({type:"block",delta:n,attributes:{}}),t}createBlock(e,t){let n;const i={};Object.entries(e).forEach(o=>{let[l,c]=o;this.query(l,P.BLOCK&P.BLOT)!=null?n=l:i[l]=c});const s=this.create(n||this.statics.defaultChild.blotName,n?e[n]:void 0);this.insertBefore(s,t||void 0);const a=s.length();return Object.entries(i).forEach(o=>{let[l,c]=o;s.formatAt(0,a,l,c)}),s}}q(Tr,"blotName","scroll"),q(Tr,"className","ql-editor"),q(Tr,"tagName","DIV"),q(Tr,"defaultChild",Ae),q(Tr,"allowedChildren",[Ae,tt,Gn]);function cl(r,e,t){t.reduce((n,i)=>{const s=et.Op.length(i);let a=i.attributes||{};if(i.insert!=null){if(typeof i.insert=="string"){const o=i.insert;r.insertAt(n,o);const[l]=r.descendant(Te,n),c=nt(l);a=et.AttributeMap.diff(c,a)||{}}else if(typeof i.insert=="object"){const o=Object.keys(i.insert)[0];if(o==null)return n;if(r.insertAt(n,o,i.insert[o]),r.scroll.query(o,P.INLINE)!=null){const[c]=r.descendant(Te,n),d=nt(c);a=et.AttributeMap.diff(d,a)||{}}}}return Object.keys(a).forEach(o=>{r.formatAt(n,s,o,a[o])}),n+s},e)}const ul={scope:P.BLOCK,whitelist:["right","center","justify"]},k0=new Ot("align","align",ul),fh=new ht("align","ql-align",ul),ph=new vn("align","text-align",ul);class gh extends vn{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(i=>`00${parseInt(i,10).toString(16)}`.slice(-2)).join("")}`):t}}const S0=new ht("color","ql-color",{scope:P.INLINE}),dl=new gh("color","color",{scope:P.INLINE}),x0=new ht("background","ql-bg",{scope:P.INLINE}),hl=new gh("background","background-color",{scope:P.INLINE});class Kn extends Gn{static create(e){const t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Us(this.code(e,t))}
</pre>`}}class Le extends Ae{static register(){D.register(Kn)}}q(Le,"TAB","  ");class fl extends Mt{}fl.blotName="code",fl.tagName="CODE",Le.blotName="code-block",Le.className="ql-code-block",Le.tagName="DIV",Kn.blotName="code-block-container",Kn.className="ql-code-block-container",Kn.tagName="DIV",Kn.allowedChildren=[Le],Le.allowedChildren=[gt,pt,xr],Le.requiredContainer=Kn;const pl={scope:P.BLOCK,whitelist:["rtl"]},mh=new Ot("direction","dir",pl),bh=new ht("direction","ql-direction",pl),yh=new vn("direction","direction",pl),vh={scope:P.INLINE,whitelist:["serif","monospace"]},wh=new ht("font","ql-font",vh);class A0 extends vn{value(e){return super.value(e).replace(/["']/g,"")}}const kh=new A0("font","font-family",vh),Sh=new ht("size","ql-size",{scope:P.INLINE,whitelist:["small","large","huge"]}),xh=new vn("size","font-size",{scope:P.INLINE,whitelist:["10px","18px","32px"]}),E0=tn("quill:keyboard"),C0=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Ks extends mt{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!t[n]!==e[n]&&t[n]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=L0(e);if(i==null){E0.warn("Attempted to add invalid keyboard binding",i);return}typeof t=="function"&&(t={handler:t}),typeof n=="function"&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach(a=>{const o={...i,key:a,...t,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const i=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(w=>Ks.match(e,w));if(i.length===0)return;const s=D.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[o,l]=this.quill.getLine(a.index),[c,d]=this.quill.getLeaf(a.index),[f,h]=a.length===0?[c,d]:this.quill.getLeaf(a.index+a.length),g=c instanceof Bs?c.value().slice(0,d):"",m=f instanceof Bs?f.value().slice(h):"",y={collapsed:a.length===0,empty:a.length===0&&o.length()<=1,format:this.quill.getFormat(a),line:o,offset:l,prefix:g,suffix:m,event:e};i.some(w=>{if(w.collapsed!=null&&w.collapsed!==y.collapsed||w.empty!=null&&w.empty!==y.empty||w.offset!=null&&w.offset!==y.offset)return!1;if(Array.isArray(w.format)){if(w.format.every(x=>y.format[x]==null))return!1}else if(typeof w.format=="object"&&!Object.keys(w.format).every(x=>w.format[x]===!0?y.format[x]!=null:w.format[x]===!1?y.format[x]==null:$o(w.format[x],y.format[x])))return!1;return w.prefix!=null&&!w.prefix.test(y.prefix)||w.suffix!=null&&!w.suffix.test(y.suffix)?!1:w.handler.call(this,a,y,w)!==!0})&&e.preventDefault()})}handleBackspace(e,t){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let i={};const[s]=this.quill.getLine(e.index);let a=new B().retain(e.index-n).delete(n);if(t.offset===0){const[o]=this.quill.getLine(e.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const c=s.formats(),d=this.quill.getFormat(e.index-1,1);if(i=et.AttributeMap.diff(c,d)||{},Object.keys(i).length>0){const f=new B().retain(e.index+s.length()-2).retain(1,i);a=a.compose(f)}}}this.quill.updateContents(a,D.sources.USER),this.quill.focus()}handleDelete(e,t){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let i={};const[s]=this.quill.getLine(e.index);let a=new B().retain(e.index).delete(n);if(t.offset>=s.length()-1){const[o]=this.quill.getLine(e.index+1);if(o){const l=s.formats(),c=this.quill.getFormat(e.index,1);i=et.AttributeMap.diff(l,c)||{},Object.keys(i).length>0&&(a=a.retain(o.length()-1).retain(1,i))}}this.quill.updateContents(a,D.sources.USER),this.quill.focus()}handleDeleteRange(e){ml({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){const n=Object.keys(t.format).reduce((s,a)=>(this.quill.scroll.query(a,P.BLOCK)&&!Array.isArray(t.format[a])&&(s[a]=t.format[a]),s),{}),i=new B().retain(e.index).delete(e.length).insert(`
`,n);this.quill.updateContents(i,D.sources.USER),this.quill.setSelection(e.index+1,D.sources.SILENT),this.quill.focus()}}const T0={bindings:{bold:gl("bold"),italic:gl("italic"),underline:gl("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",D.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",D.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,e){e.format.indent!=null?this.quill.format("indent","-1",D.sources.USER):e.format.list!=null&&this.quill.format("list",!1,D.sources.USER)}},"indent code-block":Ah(!0),"outdent code-block":Ah(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,D.sources.USER)}},tab:{key:"Tab",handler(r,e){if(e.format.table)return!0;this.quill.history.cutoff();const t=new B().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(t,D.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,D.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,D.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,e){const t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(r.index,r.length,t,D.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){const[e,t]=this.quill.getLine(r.index),n={...e.formats(),list:"checked"},i=new B().retain(r.index).insert(`
`,n).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,D.sources.USER),this.quill.setSelection(r.index+1,D.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,e){const[t,n]=this.quill.getLine(r.index),i=new B().retain(r.index).insert(`
`,e.format).retain(t.length()-n-1).retain(1,{header:null});this.quill.updateContents(i,D.sources.USER),this.quill.setSelection(r.index+1,D.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){const e=this.quill.getModule("table");if(e){const[t,n,i,s]=e.getTable(r),a=D0(t,n,i,s);if(a==null)return;let o=t.offset();if(a<0){const l=new B().retain(o).insert(`
`);this.quill.updateContents(l,D.sources.USER),this.quill.setSelection(r.index+1,r.length,D.sources.SILENT)}else if(a>0){o+=t.length();const l=new B().retain(o).insert(`
`);this.quill.updateContents(l,D.sources.USER),this.quill.setSelection(o,D.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,e){const{event:t,line:n}=e,i=n.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(i-1,D.sources.USER):this.quill.setSelection(i+n.length(),D.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,e){if(this.quill.scroll.query("list")==null)return!0;const{length:t}=e.prefix,[n,i]=this.quill.getLine(r.index);if(i>t)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(r.index," ",D.sources.USER),this.quill.history.cutoff();const a=new B().retain(r.index-i).delete(t+1).retain(n.length()-2-i).retain(1,{list:s});return this.quill.updateContents(a,D.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-t,D.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){const[e,t]=this.quill.getLine(r.index);let n=2,i=e;for(;i!=null&&i.length()<=1&&i.formats()["code-block"];)if(i=i.prev,n-=1,n<=0){const s=new B().retain(r.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,D.sources.USER),this.quill.setSelection(r.index-1,D.sources.SILENT),!1}return!0}},"embed left":Ws("ArrowLeft",!1),"embed left shift":Ws("ArrowLeft",!0),"embed right":Ws("ArrowRight",!1),"embed right shift":Ws("ArrowRight",!0),"table down":Eh(!1),"table up":Eh(!0)}};Ks.DEFAULTS=T0;function Ah(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(e,t){let{event:n}=t;const i=this.quill.scroll.query("code-block"),{TAB:s}=i;if(e.length===0&&!n.shiftKey){this.quill.insertText(e.index,s,D.sources.USER),this.quill.setSelection(e.index+s.length,D.sources.SILENT);return}const a=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:o,length:l}=e;a.forEach((c,d)=>{r?(c.insertAt(0,s),d===0?o+=s.length:l+=s.length):c.domNode.textContent.startsWith(s)&&(c.deleteAt(0,s.length),d===0?o-=s.length:l-=s.length)}),this.quill.update(D.sources.USER),this.quill.setSelection(o,l,D.sources.SILENT)}}}function Ws(r,e){return{key:r,shiftKey:e,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:i}=n;r==="ArrowRight"&&(i+=n.length+1);const[s]=this.quill.getLeaf(i);return s instanceof Ge?(r==="ArrowLeft"?e?this.quill.setSelection(n.index-1,n.length+1,D.sources.USER):this.quill.setSelection(n.index-1,D.sources.USER):e?this.quill.setSelection(n.index,n.length+1,D.sources.USER):this.quill.setSelection(n.index+n.length+1,D.sources.USER),!1):!0}}}function gl(r){return{key:r[0],shortKey:!0,handler(e,t){this.quill.format(r,!t.format[r],D.sources.USER)}}}function Eh(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){const n=r?"prev":"next",i=t.line,s=i.parent[n];if(s!=null){if(s.statics.blotName==="table-row"){let a=s.children.head,o=i;for(;o.prev!=null;)o=o.prev,a=a.next;const l=a.offset(this.quill.scroll)+Math.min(t.offset,a.length()-1);this.quill.setSelection(l,0,D.sources.USER)}}else{const a=i.table()[n];a!=null&&(r?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,D.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,D.sources.USER))}return!1}}}function L0(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=br(r);else return null;return r.shortKey&&(r[C0]=r.shortKey,delete r.shortKey),r}function ml(r){let{quill:e,range:t}=r;const n=e.getLines(t);let i={};if(n.length>1){const s=n[0].formats(),a=n[n.length-1].formats();i=et.AttributeMap.diff(a,s)||{}}e.deleteText(t,D.sources.USER),Object.keys(i).length>0&&e.formatLine(t.index,1,i,D.sources.USER),e.setSelection(t.index,D.sources.SILENT)}function D0(r,e,t,n){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?n===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const I0=/font-weight:\s*normal/,N0=["P","OL","UL"],Ch=r=>r&&N0.includes(r.tagName),O0=r=>{Array.from(r.querySelectorAll("br")).filter(e=>Ch(e.previousElementSibling)&&Ch(e.nextElementSibling)).forEach(e=>{var t;(t=e.parentNode)==null||t.removeChild(e)})},M0=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var t;return(t=e.getAttribute("style"))==null?void 0:t.match(I0)}).forEach(e=>{var n;const t=r.createDocumentFragment();t.append(...e.childNodes),(n=e.parentNode)==null||n.replaceChild(t,e)})};function q0(r){r.querySelector('[id^="docs-internal-guid-"]')&&(M0(r),O0(r))}const _0=/\bmso-list:[^;]*ignore/i,z0=/\bmso-list:[^;]*\bl(\d+)/i,R0=/\bmso-list:[^;]*\blevel(\d+)/i,B0=(r,e)=>{const t=r.getAttribute("style"),n=t==null?void 0:t.match(z0);if(!n)return null;const i=Number(n[1]),s=t==null?void 0:t.match(R0),a=s?Number(s[1]):1,o=new RegExp(`@list l${i}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(o),c=l&&l[1]==="bullet"?"bullet":"ordered";return{id:i,indent:a,type:c,element:r}},P0=r=>{var a,o;const e=Array.from(r.querySelectorAll("[style*=mso-list]")),t=[],n=[];e.forEach(l=>{(l.getAttribute("style")||"").match(_0)?t.push(l):n.push(l)}),t.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)});const i=r.documentElement.innerHTML,s=n.map(l=>B0(l,i)).filter(l=>l);for(;s.length;){const l=[];let c=s.shift();for(;c;)l.push(c),c=s.length&&((a=s[0])==null?void 0:a.element)===c.element.nextElementSibling&&s[0].id===c.id?s.shift():null;const d=document.createElement("ul");l.forEach(g=>{const m=document.createElement("li");m.setAttribute("data-list",g.type),g.indent>1&&m.setAttribute("class",`ql-indent-${g.indent-1}`),m.innerHTML=g.element.innerHTML,d.appendChild(m)});const f=(o=l[0])==null?void 0:o.element,{parentNode:h}=f??{};f&&(h==null||h.replaceChild(d,f)),l.slice(1).forEach(g=>{let{element:m}=g;h==null||h.removeChild(m)})}};function $0(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&P0(r)}const F0=[$0,q0],j0=r=>{r.documentElement&&F0.forEach(e=>{e(r)})},H0=tn("quill:clipboard"),U0=[[Node.TEXT_NODE,nw],[Node.TEXT_NODE,Ih],["br",W0],[Node.ELEMENT_NODE,Ih],[Node.ELEMENT_NODE,K0],[Node.ELEMENT_NODE,G0],[Node.ELEMENT_NODE,ew],["li",X0],["ol, ul",J0],["pre",Q0],["tr",tw],["b",yl("bold")],["i",yl("italic")],["strike",yl("strike")],["style",Z0]],V0=[k0,mh].reduce((r,e)=>(r[e.keyName]=e,r),{}),Th=[ph,hl,dl,yh,kh,xh].reduce((r,e)=>(r[e.keyName]=e,r),{});class Lh extends mt{constructor(e,t){super(e,t),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],U0.concat(this.options.matchers??[]).forEach(n=>{let[i,s]=n;this.addMatcher(i,s)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:n}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i[Le.blotName])return new B().insert(n||"",{[Le.blotName]:i[Le.blotName]});if(!t)return new B().insert(n||"",i);const s=this.convertHTML(t);return gi(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||i.table)?s.compose(new B().retain(s.length()-1).delete(1)):s}normalizeHTML(e){j0(e)}convertHTML(e){const t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);const n=t.body,i=new WeakMap,[s,a]=this.prepareMatching(n,i);return bl(this.quill.scroll,n,s,a,i)}dangerouslyPasteHTML(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D.sources.API;if(typeof e=="string"){const i=this.convert({html:e,text:""});this.quill.setContents(i,t),this.quill.setSelection(0,D.sources.SILENT)}else{const i=this.convert({html:t,text:""});this.quill.updateContents(new B().retain(e).concat(i),n),this.quill.setSelection(e+i.length(),D.sources.SILENT)}}onCaptureCopy(e){var a,o;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:i,text:s}=this.onCopy(n,t);(a=e.clipboardData)==null||a.setData("text/plain",s),(o=e.clipboardData)==null||o.setData("text/html",i),t&&ml({range:n,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){var a,o,l,c,d;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const t=this.quill.getSelection(!0);if(t==null)return;const n=(a=e.clipboardData)==null?void 0:a.getData("text/html");let i=(o=e.clipboardData)==null?void 0:o.getData("text/plain");if(!n&&!i){const f=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");f&&(i=this.normalizeURIList(f))}const s=Array.from(((c=e.clipboardData)==null?void 0:c.files)||[]);if(!n&&s.length>0){this.quill.uploader.upload(t,s);return}if(n&&s.length>0){const f=new DOMParser().parseFromString(n,"text/html");if(f.body.childElementCount===1&&((d=f.body.firstElementChild)==null?void 0:d.tagName)==="IMG"){this.quill.uploader.upload(t,s);return}}this.onPaste(t,{html:n,text:i})}onCopy(e){const t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:n,html:i}=t;const s=this.quill.getFormat(e.index),a=this.convert({text:n,html:i},s);H0.log("onPaste",a,{text:n,html:i});const o=new B().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(o,D.sources.USER),this.quill.setSelection(o.length()-e.length,D.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){const n=[],i=[];return this.matchers.forEach(s=>{const[a,o]=s;switch(a){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:n.push(o);break;default:Array.from(e.querySelectorAll(a)).forEach(l=>{if(t.has(l)){const c=t.get(l);c==null||c.push(o)}else t.set(l,[o])});break}}),[n,i]}}q(Lh,"DEFAULTS",{matchers:[]});function Wn(r,e,t,n){return n.query(e)?r.reduce((i,s)=>{if(!s.insert)return i;if(s.attributes&&s.attributes[e])return i.push(s);const a=t?{[e]:t}:{};return i.insert(s.insert,{...a,...s.attributes})},new B):r}function gi(r,e){let t="";for(let n=r.ops.length-1;n>=0&&t.length<e.length;--n){const i=r.ops[n];if(typeof i.insert!="string")break;t=i.insert+t}return t.slice(-1*e.length)===e}function kn(r,e){if(!(r instanceof Element))return!1;const t=e.query(r);return t&&t.prototype instanceof Ge?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function Y0(r,e){return r.previousElementSibling&&r.nextElementSibling&&!kn(r.previousElementSibling,e)&&!kn(r.nextElementSibling,e)}const Qs=new WeakMap;function Dh(r){return r==null?!1:(Qs.has(r)||(r.tagName==="PRE"?Qs.set(r,!0):Qs.set(r,Dh(r.parentNode))),Qs.get(r))}function bl(r,e,t,n,i){return e.nodeType===e.TEXT_NODE?n.reduce((s,a)=>a(e,s,r),new B):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,a)=>{let o=bl(r,a,t,n,i);return a.nodeType===e.ELEMENT_NODE&&(o=t.reduce((l,c)=>c(a,l,r),o),o=(i.get(a)||[]).reduce((l,c)=>c(a,l,r),o)),s.concat(o)},new B):new B}function yl(r){return(e,t,n)=>Wn(t,r,!0,n)}function G0(r,e,t){const n=Ot.keys(r),i=ht.keys(r),s=vn.keys(r),a={};return n.concat(i).concat(s).forEach(o=>{let l=t.query(o,P.ATTRIBUTE);l!=null&&(a[l.attrName]=l.value(r),a[l.attrName])||(l=V0[o],l!=null&&(l.attrName===o||l.keyName===o)&&(a[l.attrName]=l.value(r)||void 0),l=Th[o],l!=null&&(l.attrName===o||l.keyName===o)&&(l=Th[o],a[l.attrName]=l.value(r)||void 0))}),Object.entries(a).reduce((o,l)=>{let[c,d]=l;return Wn(o,c,d,t)},e)}function K0(r,e,t){const n=t.query(r);if(n==null)return e;if(n.prototype instanceof Ge){const i={},s=n.value(r);if(s!=null)return i[n.blotName]=s,new B().insert(i,n.formats(r,t))}else if(n.prototype instanceof hi&&!gi(e,`
`)&&e.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return Wn(e,n.blotName,n.formats(r,t),t);return e}function W0(r,e){return gi(e,`
`)||e.insert(`
`),e}function Q0(r,e,t){const n=t.query("code-block"),i=n&&"formats"in n&&typeof n.formats=="function"?n.formats(r,t):!0;return Wn(e,"code-block",i,t)}function Z0(){return new B}function X0(r,e,t){const n=t.query(r);if(n==null||n.blotName!=="list"||!gi(e,`
`))return e;let i=-1,s=r.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(i+=1),s=s.parentNode;return i<=0?e:e.reduce((a,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?a.push(o):a.insert(o.insert,{indent:i,...o.attributes||{}}):a,new B)}function J0(r,e,t){const n=r;let i=n.tagName==="OL"?"ordered":"bullet";const s=n.getAttribute("data-checked");return s&&(i=s==="true"?"checked":"unchecked"),Wn(e,"list",i,t)}function Ih(r,e,t){if(!gi(e,`
`)){if(kn(r,t)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&r.nextSibling){let n=r.nextSibling;for(;n!=null;){if(kn(n,t))return e.insert(`
`);const i=t.query(n);if(i&&i.prototype instanceof tt)return e.insert(`
`);n=n.firstChild}}}return e}function ew(r,e,t){var s;const n={},i=r.style||{};return i.fontStyle==="italic"&&(n.italic=!0),i.textDecoration==="underline"&&(n.underline=!0),i.textDecoration==="line-through"&&(n.strike=!0),((s=i.fontWeight)!=null&&s.startsWith("bold")||parseInt(i.fontWeight,10)>=700)&&(n.bold=!0),e=Object.entries(n).reduce((a,o)=>{let[l,c]=o;return Wn(a,l,c,t)},e),parseFloat(i.textIndent||0)>0?new B().insert("	").concat(e):e}function tw(r,e,t){var i,s;const n=((i=r.parentElement)==null?void 0:i.tagName)==="TABLE"?r.parentElement:(s=r.parentElement)==null?void 0:s.parentElement;if(n!=null){const o=Array.from(n.querySelectorAll("tr")).indexOf(r)+1;return Wn(e,"table",o,t)}return e}function nw(r,e,t){var i;let n=r.data;if(((i=r.parentElement)==null?void 0:i.tagName)==="O:P")return e.insert(n.trim());if(!Dh(r)){if(n.trim().length===0&&n.includes(`
`)&&!Y0(r,t))return e;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&kn(r.parentElement,t)||r.previousSibling instanceof Element&&kn(r.previousSibling,t))&&(n=n.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&kn(r.parentElement,t)||r.nextSibling instanceof Element&&kn(r.nextSibling,t))&&(n=n.replace(/ $/,"")),n=n.replaceAll(" "," ")}return e.insert(n)}class Nh extends mt{constructor(t,n){super(t,n);q(this,"lastRecorded",0);q(this,"ignoreChange",!1);q(this,"stack",{undo:[],redo:[]});q(this,"currentRange",null);this.quill.on(D.events.EDITOR_CHANGE,(i,s,a,o)=>{i===D.events.SELECTION_CHANGE?s&&o!==D.sources.SILENT&&(this.currentRange=s):i===D.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===D.sources.USER?this.record(s,a):this.transform(s)),this.currentRange=vl(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",i=>{i.inputType==="historyUndo"?(this.undo(),i.preventDefault()):i.inputType==="historyRedo"&&(this.redo(),i.preventDefault())})}change(t,n){if(this.stack[t].length===0)return;const i=this.stack[t].pop();if(!i)return;const s=this.quill.getContents(),a=i.delta.invert(s);this.stack[n].push({delta:a,range:vl(i.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,D.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,n){if(t.ops.length===0)return;this.stack.redo=[];let i=t.invert(n),s=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(i=i.compose(o.delta),s=o.range)}else this.lastRecorded=a;i.length()!==0&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Oh(this.stack.undo,t),Oh(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,D.sources.USER);else{const n=iw(this.quill.scroll,t.delta);this.quill.setSelection(n,D.sources.USER)}}}q(Nh,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Oh(r,e){let t=e;for(let n=r.length-1;n>=0;n-=1){const i=r[n];r[n]={delta:t.transform(i.delta,!0),range:i.range&&vl(i.range,t)},t=i.delta.transform(t),r[n].delta.length()===0&&r.splice(n,1)}}function rw(r,e){const t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(n=>r.query(n,P.BLOCK)!=null):!1}function iw(r,e){const t=e.reduce((i,s)=>i+(s.delete||0),0);let n=e.length()-t;return rw(r,e)&&(n-=1),n}function vl(r,e){if(!r)return r;const t=e.transformPosition(r.index),n=e.transformPosition(r.index+r.length);return{index:t,length:n-t}}class Mh extends mt{constructor(e,t){super(e,t),e.root.addEventListener("drop",n=>{var a;n.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(n.clientX,n.clientY);i=document.createRange(),i.setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}const s=i&&e.selection.normalizeNative(i);if(s){const o=e.selection.normalizedToRange(s);(a=n.dataTransfer)!=null&&a.files&&this.upload(o,n.dataTransfer.files)}})}upload(e,t){const n=[];Array.from(t).forEach(i=>{var s;i&&((s=this.options.mimetypes)!=null&&s.includes(i.type))&&n.push(i)}),n.length>0&&this.options.handler.call(this,e,n)}}Mh.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,e){if(!this.quill.scroll.query("image"))return;const t=e.map(n=>new Promise(i=>{const s=new FileReader;s.onload=()=>{i(s.result)},s.readAsDataURL(n)}));Promise.all(t).then(n=>{const i=n.reduce((s,a)=>s.insert({image:a}),new B().retain(r.index).delete(r.length));this.quill.updateContents(i,R.sources.USER),this.quill.setSelection(r.index+n.length,R.sources.SILENT)})}};const sw=["insertText","insertReplacementText"];class aw extends mt{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||e.on(D.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){ml({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){const n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new B().retain(e.index).insert(t,n),D.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,D.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!sw.includes(e.inputType))return;const t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;const n=ow(e);if(n==null)return;const i=this.quill.selection.normalizeNative(t),s=i?this.quill.selection.normalizedToRange(i):null;s&&this.replaceText(s,n)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function ow(r){var e;return typeof r.data=="string"?r.data:(e=r.dataTransfer)!=null&&e.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}const lw=/Mac/i.test(navigator.platform),cw=100,uw=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||lw&&r.key==="a"&&r.ctrlKey===!0);class dw extends mt{constructor(t,n){super(t,n);q(this,"isListening",!1);q(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,n){let{line:i,event:s}=n;if(!(i instanceof ft)||!i.uiNode)return!0;const a=getComputedStyle(i.domNode).direction==="rtl";return a&&s.key!=="ArrowRight"||!a&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),D.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&uw(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+cw,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const n=t.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const i=this.quill.scroll.find(n.startContainer);if(!(i instanceof ft)||!i.uiNode)return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(s)}}D.register({"blots/block":Ae,"blots/block/embed":tt,"blots/break":pt,"blots/container":Gn,"blots/cursor":xr,"blots/embed":ol,"blots/inline":Mt,"blots/scroll":Tr,"blots/text":gt,"modules/clipboard":Lh,"modules/history":Nh,"modules/keyboard":Ks,"modules/uploader":Mh,"modules/input":aw,"modules/uiNode":dw});class hw extends ht{add(e,t){let n=0;if(t==="+1"||t==="-1"){const i=this.value(e)||0;n=t==="+1"?i+1:i-1}else typeof t=="number"&&(n=t);return n===0?(this.remove(e),!0):super.add(e,n.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}const fw=new hw("indent","ql-indent",{scope:P.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class wl extends Ae{}q(wl,"blotName","blockquote"),q(wl,"tagName","blockquote");class kl extends Ae{static formats(e){return this.tagName.indexOf(e.tagName)+1}}q(kl,"blotName","header"),q(kl,"tagName",["H1","H2","H3","H4","H5","H6"]);class mi extends Gn{}mi.blotName="list-container",mi.tagName="OL";class bi extends Ae{static create(e){const t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){D.register(mi)}constructor(e,t){super(e,t);const n=t.ownerDocument.createElement("span"),i=s=>{if(!e.isEnabled())return;const a=this.statics.formats(t,e);a==="checked"?(this.format("list","unchecked"),s.preventDefault()):a==="unchecked"&&(this.format("list","checked"),s.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}}bi.blotName="list",bi.tagName="LI",mi.allowedChildren=[bi],bi.requiredContainer=mi;class yi extends Mt{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}q(yi,"blotName","bold"),q(yi,"tagName",["STRONG","B"]);class Sl extends yi{}q(Sl,"blotName","italic"),q(Sl,"tagName",["EM","I"]);class Sn extends Mt{static create(e){const t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return qh(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}}q(Sn,"blotName","link"),q(Sn,"tagName","A"),q(Sn,"SANITIZED_URL","about:blank"),q(Sn,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function qh(r,e){const t=document.createElement("a");t.href=r;const n=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(n)>-1}class xl extends Mt{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}q(xl,"blotName","script"),q(xl,"tagName",["SUB","SUP"]);class Al extends yi{}q(Al,"blotName","strike"),q(Al,"tagName",["S","STRIKE"]);class El extends Mt{}q(El,"blotName","underline"),q(El,"tagName","U");class Zs extends ol{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}q(Zs,"blotName","formula"),q(Zs,"className","ql-formula"),q(Zs,"tagName","SPAN");const _h=["alt","height","width"];let pw=(Pa=class extends Ge{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return _h.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return qh(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){_h.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}},q(Pa,"blotName","image"),q(Pa,"tagName","IMG"),Pa);const zh=["height","width"];class Xs extends tt{static create(e){const t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return zh.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static sanitize(e){return Sn.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){zh.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}q(Xs,"blotName","video"),q(Xs,"className","ql-video"),q(Xs,"tagName","IFRAME");const vi=new ht("code-token","hljs",{scope:P.INLINE});class rn extends Mt{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Le.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,n){super(e,t,n),vi.add(this.domNode,n)}format(e,t){e!==rn.blotName?super.format(e,t):t?vi.add(this.domNode,t):(vi.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),vi.value(this.domNode)||this.unwrap()}}rn.blotName="code-token",rn.className="ql-token";class rt extends Le{static create(e){const t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),rn.blotName,!1),super.replaceWith(e,t)}}class wi extends Kn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===rt.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(e,t)}))}formatAt(e,t,n,i){n===rt.blotName&&(this.forceNext=!0),super.formatAt(e,t,n,i)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const i=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,s=rt.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==i){if(i.trim().length>0||this.cachedText==null){const a=this.children.reduce((l,c)=>l.concat(nh(c,!1)),new B),o=e(i,s);a.diff(o).reduce((l,c)=>{let{retain:d,attributes:f}=c;return d?(f&&Object.keys(f).forEach(h=>{[rt.blotName,rn.blotName].includes(h)&&this.formatAt(l,d,h,f[h])}),l+d):l},0)}this.cachedText=i,this.forceNext=!1}}html(e,t){const[n]=this.children.find(e);return`<pre data-language="${n?rt.formats(n.domNode):"plain"}">
${Us(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const t=rt.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}wi.allowedChildren=[rt],rt.requiredContainer=wi,rt.allowedChildren=[rn,xr,gt,pt];const gw=(r,e,t)=>{if(typeof r.versionString=="string"){const n=r.versionString.split(".")[0];if(parseInt(n,10)>=11)return r.highlight(t,{language:e}).value}return r.highlight(e,t).value};class Rh extends mt{static register(){D.register(rn,!0),D.register(rt,!0),D.register(wi,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,i)=>{let{key:s}=i;return n[s]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(D.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof wi))return;const t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:i,label:s}=n;const a=t.ownerDocument.createElement("option");a.textContent=s,a.setAttribute("value",i),t.appendChild(a)}),t.addEventListener("change",()=>{e.format(rt.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=rt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(D.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(D.sources.USER);const n=this.quill.getSelection();(e==null?this.quill.scroll.descendants(wi):[e]).forEach(s=>{s.highlight(this.highlightBlot,t)}),this.quill.update(D.sources.SILENT),n!=null&&this.quill.setSelection(n,D.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Us(e).split(`
`).reduce((i,s,a)=>(a!==0&&i.insert(`
`,{[Le.blotName]:t}),i.insert(s)),new B);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Le.className),n.innerHTML=gw(this.options.hljs,t,e),bl(this.quill.scroll,n,[(i,s)=>{const a=vi.value(i);return a?s.compose(new B().retain(s.length(),{[rn.blotName]:a})):s}],[(i,s)=>i.data.split(`
`).reduce((a,o,l)=>(l!==0&&a.insert(`
`,{[Le.blotName]:t}),a.insert(o)),s)],new WeakMap)}}Rh.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Hi=class Hi extends Ae{static create(e){const t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",Cl()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===Hi.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};q(Hi,"blotName","table"),q(Hi,"tagName","TD");let yt=Hi;class sn extends Gn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),t=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===t.table&&e.table===n.table&&e.table===i.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;const n=t.formats(),i=t.next.formats();if(n.table!==i.table){const s=this.splitAfter(t);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}q(sn,"blotName","table-row"),q(sn,"tagName","TR");class qt extends Gn{}q(qt,"blotName","table-body"),q(qt,"tagName","TBODY");class Lr extends Gn{balanceCells(){const e=this.descendants(sn),t=e.reduce((n,i)=>Math.max(i.children.length,n),0);e.forEach(n=>{new Array(t-n.children.length).fill(0).forEach(()=>{let i;n.children.head!=null&&(i=yt.formats(n.children.head.domNode));const s=this.scroll.create(yt.blotName,i);n.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){const[t]=this.descendant(qt);t==null||t.children.head==null||t.children.forEach(n=>{const i=n.children.at(e);i!=null&&i.remove()})}insertColumn(e){const[t]=this.descendant(qt);t==null||t.children.head==null||t.children.forEach(n=>{const i=n.children.at(e),s=yt.formats(n.children.head.domNode),a=this.scroll.create(yt.blotName,s);n.insertBefore(a,i)})}insertRow(e){const[t]=this.descendant(qt);if(t==null||t.children.head==null)return;const n=Cl(),i=this.scroll.create(sn.blotName);t.children.head.children.forEach(()=>{const a=this.scroll.create(yt.blotName,n);i.appendChild(a)});const s=t.children.at(e);t.insertBefore(i,s)}rows(){const e=this.children.head;return e==null?[]:e.children.map(t=>t)}}q(Lr,"blotName","table-container"),q(Lr,"tagName","TABLE"),Lr.allowedChildren=[qt],qt.requiredContainer=Lr,qt.allowedChildren=[sn],sn.requiredContainer=qt,sn.allowedChildren=[yt],yt.requiredContainer=sn;function Cl(){return`row-${Math.random().toString(36).slice(2,6)}`}class mw extends mt{static register(){D.register(yt),D.register(sn),D.register(qt),D.register(Lr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Lr).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(D.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(D.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const t=e.offset();e.remove(),this.quill.update(D.sources.USER),this.quill.setSelection(t,D.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[t,n]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==yt.blotName)return[null,null,null,-1];const i=t.parent;return[i.parent.parent,i,t,n]}insertColumn(e){const t=this.quill.getSelection();if(!t)return;const[n,i,s]=this.getTable(t);if(s==null)return;const a=s.cellOffset();n.insertColumn(a+e),this.quill.update(D.sources.USER);let o=i.rowOffset();e===0&&(o+=1),this.quill.setSelection(t.index+o,t.length,D.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const t=this.quill.getSelection();if(!t)return;const[n,i,s]=this.getTable(t);if(s==null)return;const a=i.rowOffset();n.insertRow(a+e),this.quill.update(D.sources.USER),e>0?this.quill.setSelection(t,D.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,D.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){const n=this.quill.getSelection();if(n==null)return;const i=new Array(e).fill(0).reduce(s=>{const a=new Array(t).fill(`
`).join("");return s.insert(a,{table:Cl()})},new B().retain(n.index));this.quill.updateContents(i,D.sources.USER),this.quill.setSelection(n.index,D.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(D.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(D.events.TEXT_CHANGE,(n,i,s)=>{s===D.sources.USER&&this.balanceTables()}),!0):!1)})}}const Bh=tn("quill:toolbar");class Tl extends mt{constructor(e,t){var n,i;if(super(e,t),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),bw(s,this.options.container),(i=(n=e.container)==null?void 0:n.parentNode)==null||i.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){Bh.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var o;const a=(o=this.options.handlers)==null?void 0:o[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(D.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(i=>i.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){Bh.warn("ignoring attaching to nonexistent format",t,e);return}const n=e.tagName==="SELECT"?"change":"click";e.addEventListener(n,i=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const o=e.options[e.selectedIndex];o.hasAttribute("selected")?s=!1:s=o.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),i.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,s);else if(this.quill.scroll.query(t).prototype instanceof Ge){if(s=prompt(`Enter ${t}`),!s)return;this.quill.updateContents(new B().retain(a.index).delete(a.length).insert({[t]:s}),D.sources.USER)}else this.quill.format(t,s,D.sources.USER);this.update(a)}),this.controls.push([t,e])}update(e){const t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(n=>{const[i,s]=n;if(s.tagName==="SELECT"){let a=null;if(e==null)a=null;else if(t[i]==null)a=s.querySelector("option[selected]");else if(!Array.isArray(t[i])){let o=t[i];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),a=s.querySelector(`option[value="${o}"]`)}a==null?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){const a=t[i],o=a===s.getAttribute("value")||a!=null&&a.toString()===s.getAttribute("value")||a==null&&!s.getAttribute("value");s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}else{const a=t[i]!=null;s.classList.toggle("ql-active",a),s.setAttribute("aria-pressed",a.toString())}})}}Tl.DEFAULTS={};function Ph(r,e,t){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${e}`),n.setAttribute("aria-pressed","false"),t!=null?(n.value=t,n.setAttribute("aria-label",`${e}: ${t}`)):n.setAttribute("aria-label",e),r.appendChild(n)}function bw(r,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{const n=document.createElement("span");n.classList.add("ql-formats"),t.forEach(i=>{if(typeof i=="string")Ph(n,i);else{const s=Object.keys(i)[0],a=i[s];Array.isArray(a)?yw(n,s,a):Ph(n,s,a)}}),r.appendChild(n)})}function yw(r,e,t){const n=document.createElement("select");n.classList.add(`ql-${e}`),t.forEach(i=>{const s=document.createElement("option");i!==!1?s.setAttribute("value",String(i)):s.setAttribute("selected","selected"),n.appendChild(s)}),r.appendChild(n)}Tl.DEFAULTS={container:null,handlers:{clean(){const r=this.quill.getSelection();if(r!=null)if(r.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,P.INLINE)!=null&&this.quill.format(t,!1,D.sources.USER)})}else this.quill.removeFormat(r.index,r.length,D.sources.USER)},direction(r){const{align:e}=this.quill.getFormat();r==="rtl"&&e==null?this.quill.format("align","right",D.sources.USER):!r&&e==="right"&&this.quill.format("align",!1,D.sources.USER),this.quill.format("direction",r,D.sources.USER)},indent(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e),n=parseInt(t.indent||0,10);if(r==="+1"||r==="-1"){let i=r==="+1"?1:-1;t.direction==="rtl"&&(i*=-1),this.quill.format("indent",n+i,D.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,D.sources.USER)},list(r){const e=this.quill.getSelection(),t=this.quill.getFormat(e);r==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,D.sources.USER):this.quill.format("list","unchecked",D.sources.USER):this.quill.format("list",r,D.sources.USER)}}};const vw='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',ww='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',kw='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Sw='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',xw='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Aw='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Ew='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Cw='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',$h='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',ki={align:{"":vw,center:ww,right:kw,justify:Sw},background:xw,blockquote:Aw,bold:Ew,clean:Cw,code:$h,"code-block":$h,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},Tw='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Fh=0;function jh(r,e){r.setAttribute(e,`${r.getAttribute(e)!=="true"}`)}class Js{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),jh(this.label,"aria-expanded"),jh(this.options,"aria-hidden")}buildItem(e){const t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");const n=e.getAttribute("value");return n&&t.setAttribute("data-value",n),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.selectItem(t,!0),i.preventDefault();break;case"Escape":this.escape(),i.preventDefault();break}}),t}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Tw,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Fh}`,Fh+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{const n=this.buildItem(t);e.appendChild(n),t.selected===!0&&this.selectItem(n)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");e!==n&&(n!=null&&n.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}class Hh extends Js{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(e){const t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);const n=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=i:n.style.fill=i)}}class Uh extends Js{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=t[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);const n=e||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const Lw=r=>{const{overflowY:e}=getComputedStyle(r,null);return e!=="visible"&&e!=="clip"};class Vh{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Lw(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect();let a=0;if(s.right>i.right&&(a=i.right-s.right,this.root.style.left=`${t+a}px`),s.left<i.left&&(a=i.left-s.left,this.root.style.left=`${t+a}px`),s.bottom>i.bottom){const o=s.bottom-s.top,l=e.bottom-e.top+o;this.root.style.top=`${n-l}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Dw=[!1,"center","right","justify"],Iw=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Nw=[!1,"serif","monospace"],Ow=["1","2","3",!1],Mw=["small",!1,"large","huge"];class Si extends Er{constructor(e,t){super(e,t);const n=i=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(i.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(i.target)||s.close()})};e.emitter.listenDOM("click",document.body,n)}addModule(e){const t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(s.startsWith("ql-")&&(s=s.slice(3),t[s]!=null))if(s==="direction")n.innerHTML=t[s][""]+t[s].rtl;else if(typeof t[s]=="string")n.innerHTML=t[s];else{const a=n.value||"";a!=null&&t[s][a]&&(n.innerHTML=t[s][a])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(i=>{if(i.classList.contains("ql-align")&&(i.querySelector("option")==null&&xi(i,Dw),typeof t.align=="object"))return new Uh(i,t.align);if(i.classList.contains("ql-background")||i.classList.contains("ql-color")){const s=i.classList.contains("ql-background")?"background":"color";return i.querySelector("option")==null&&xi(i,Iw,s==="background"?"#ffffff":"#000000"),new Hh(i,t[s])}return i.querySelector("option")==null&&(i.classList.contains("ql-font")?xi(i,Nw):i.classList.contains("ql-header")?xi(i,Ow):i.classList.contains("ql-size")&&xi(i,Mw)),new Js(i)});const n=()=>{this.pickers.forEach(i=>{i.update()})};this.quill.on(R.events.EDITOR_CHANGE,n)}}Si.DEFAULTS=yn({},Er.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Yh extends Vh{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,R.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,R.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=qw(e);case"formula":{if(!e)break;const t=this.quill.getSelection(!0);if(t!=null){const n=t.index+t.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),e,R.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",R.sources.USER),this.quill.setSelection(n+2,R.sources.USER)}break}}this.textbox.value="",this.hide()}}function qw(r){let e=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:r}function xi(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(n=>{const i=document.createElement("option");n===t?i.setAttribute("selected","selected"):i.setAttribute("value",String(n)),r.appendChild(i)})}const _w=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Gh extends Yh{constructor(e,t){super(e,t),this.quill.on(R.events.EDITOR_CHANGE,(n,i,s,a)=>{if(n===R.events.SELECTION_CHANGE)if(i!=null&&i.length>0&&a===R.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(i.index,i.length);if(o.length===1){const l=this.quill.getBounds(i);l!=null&&this.position(l)}else{const l=o[o.length-1],c=this.quill.getIndex(l),d=Math.min(l.length()-1,i.index+i.length-c),f=this.quill.getBounds(new Yn(c,d));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(R.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){const t=super.position(e),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",t!==0&&(n.style.marginLeft=`${-1*t-n.offsetWidth/2}px`),t}}q(Gh,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Kh extends Si{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=_w),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Gh(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),ki),this.buildPickers(e.container.querySelectorAll("select"),ki))}}Kh.DEFAULTS=yn({},Si.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,D.sources.USER)}}}}});const zw=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Wh extends Yh{constructor(){super(...arguments);q(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,R.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(R.events.SELECTION_CHANGE,(t,n,i)=>{if(t!=null){if(t.length===0&&i===R.sources.USER){const[s,a]=this.quill.scroll.descendant(Sn,t.index);if(s!=null){this.linkRange=new Yn(t.index-a,s.length());const o=Sn.formats(s.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}q(Wh,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Qh extends Si{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=zw),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),ki),this.buildPickers(e.container.querySelectorAll("select"),ki),this.tooltip=new Wh(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,n)=>{e.handlers.link.call(e,!n.format.link)}))}}Qh.DEFAULTS=yn({},Si.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){const e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);const{tooltip:n}=this.quill.theme;n.edit("link",t)}else this.quill.format("link",!1,D.sources.USER)}}}}}),D.register({"attributors/attribute/direction":mh,"attributors/class/align":fh,"attributors/class/background":x0,"attributors/class/color":S0,"attributors/class/direction":bh,"attributors/class/font":wh,"attributors/class/size":Sh,"attributors/style/align":ph,"attributors/style/background":hl,"attributors/style/color":dl,"attributors/style/direction":yh,"attributors/style/font":kh,"attributors/style/size":xh},!0),D.register({"formats/align":fh,"formats/direction":bh,"formats/indent":fw,"formats/background":hl,"formats/color":dl,"formats/font":wh,"formats/size":Sh,"formats/blockquote":wl,"formats/code-block":Le,"formats/header":kl,"formats/list":bi,"formats/bold":yi,"formats/code":fl,"formats/italic":Sl,"formats/link":Sn,"formats/script":xl,"formats/strike":Al,"formats/underline":El,"formats/formula":Zs,"formats/image":pw,"formats/video":Xs,"modules/syntax":Rh,"modules/table":mw,"modules/toolbar":Tl,"themes/bubble":Kh,"themes/snow":Qh,"ui/icons":ki,"ui/picker":Js,"ui/icon-picker":Uh,"ui/color-picker":Hh,"ui/tooltip":Vh},!0);const Fc=class Fc{static isRTL(){var t;if(this.cachedDirection!==null)return this.cachedDirection==="rtl";const e=[document.documentElement.getAttribute("dir"),this.getDirectionFromLanguage(document.documentElement.getAttribute("lang")),(t=document.body)==null?void 0:t.getAttribute("dir"),window.getComputedStyle(document.documentElement).direction];for(const n of e){if(n==="rtl")return this.cachedDirection="rtl",!0;if(n==="ltr")return this.cachedDirection="ltr",!1}return this.cachedDirection="ltr",!1}static getDirectionFromLanguage(e){if(!e)return null;const t=["ar","he","fa","ur","ps","sd","ug","yi","arc","ckb","dv","ha","ji","ku","ks","ms","nqo","pnb","prs","ug","uz"],n=e.toLowerCase().split("-")[0];return t.includes(n)?"rtl":"ltr"}static clearCache(){this.cachedDirection=null}static transformDirectionalClasses(e){if(!this.isRTL())return e;const t=new Map([["ml-","mr-"],["mr-","ml-"],["ms-","me-"],["me-","ms-"],["pl-","pr-"],["pr-","pl-"],["ps-","pe-"],["pe-","ps-"],["border-l-","border-r-"],["border-r-","border-l-"],["border-s-","border-e-"],["border-e-","border-s-"],["rounded-l-","rounded-r-"],["rounded-r-","rounded-l-"],["rounded-s-","rounded-e-"],["rounded-e-","rounded-s-"],["rounded-tl-","rounded-tr-"],["rounded-tr-","rounded-tl-"],["rounded-bl-","rounded-br-"],["rounded-br-","rounded-bl-"],["rounded-ss-","rounded-se-"],["rounded-se-","rounded-ss-"],["rounded-es-","rounded-ee-"],["rounded-ee-","rounded-es-"],["left-","right-"],["right-","left-"],["start-","end-"],["end-","start-"],["text-left","text-right"],["text-right","text-left"],["justify-start","justify-end"],["justify-end","justify-start"],["items-start","items-end"],["items-end","items-start"],["self-start","self-end"],["self-end","self-start"],["float-left","float-right"],["float-right","float-left"],["clear-left","clear-right"],["clear-right","clear-left"]]);let n=e;for(const[i,s]of t){const a=new RegExp(`\\b${i.replace("-","\\-")}([\\w\\-\\.\\[\\]%\\/]+)?\\b`,"g");new RegExp(`\\b${s.replace("-","\\-")}([\\w\\-\\.\\[\\]%\\/]+)?\\b`,"g"),n=n.replace(a,(o,l)=>s+(l||""))}return n}static getOppositePosition(e){return this.isRTL()?e==="left"?"right":"left":e}static getLogicalPosition(e){return this.isRTL()?e==="left"?"end":"start":e==="left"?"start":"end"}static getPhysicalPosition(e){return this.isRTL()?e==="start"?"right":"left":e==="start"?"left":"right"}static addRTLClasses(e,t){const n=this.transformDirectionalClasses(t);e.classList.add(...n.split(" ").filter(i=>i.trim()))}static removeRTLClasses(e,t){const n=this.transformDirectionalClasses(t);e.classList.remove(...n.split(" ").filter(i=>i.trim()))}static observeDirectionChanges(){const e=new MutationObserver(t=>{for(const n of t)if(n.type==="attributes"&&(n.attributeName==="dir"||n.attributeName==="lang")){this.clearCache(),document.dispatchEvent(new CustomEvent("keys:direction-change",{detail:{isRTL:this.isRTL()}}));break}});e.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]}),e.observe(document.body,{attributes:!0,attributeFilter:["dir","lang"]})}static getDropdownPosition(e,t){let n=e,i=t;return this.isRTL()&&(n==="left"?n="right":n==="right"&&(n="left"),(e==="top"||e==="bottom")&&(t==="start"?i="end":t==="end"&&(i="start"))),{position:n,align:i}}static initialize(){this.isRTL()?(document.documentElement.classList.add("rtl"),document.documentElement.setAttribute("dir","rtl")):(document.documentElement.classList.add("ltr"),document.documentElement.setAttribute("dir","ltr")),this.observeDirectionChanges();const e=document.createElement("style");e.textContent=`
            :root {
                --direction-factor: ${this.isRTL()?"-1":"1"};
                --text-align-start: ${this.isRTL()?"right":"left"};
                --text-align-end: ${this.isRTL()?"left":"right"};
            }
        `,document.head.appendChild(e)}};Fc.cachedDirection=null;let ea=Fc;var Rw=Object.defineProperty,Bw=Object.defineProperties,Pw=Object.getOwnPropertyDescriptors,Zh=Object.getOwnPropertySymbols,$w=Object.prototype.hasOwnProperty,Fw=Object.prototype.propertyIsEnumerable,Xh=(r,e,t)=>e in r?Rw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,V=(r,e)=>{for(var t in e||(e={}))$w.call(e,t)&&Xh(r,t,e[t]);if(Zh)for(var t of Zh(e))Fw.call(e,t)&&Xh(r,t,e[t]);return r},Re=(r,e)=>Bw(r,Pw(e)),fe=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())});const Ll=Math.min,Dr=Math.max,ta=Math.round,na=Math.floor,xn=r=>({x:r,y:r});function jw(r,e){return typeof r=="function"?r(e):r}function Hw(r){return V({top:0,right:0,bottom:0,left:0},r)}function Uw(r){return typeof r!="number"?Hw(r):{top:r,right:r,bottom:r,left:r}}function ra(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function Vw(r,e){return fe(this,null,function*(){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:g=0}=jw(e,r),m=Uw(g),y=o[h?f==="floating"?"reference":"floating":f],k=ra(yield s.getClippingRect({element:(t=yield s.isElement==null?void 0:s.isElement(y))==null||t?y:y.contextElement||(yield s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),w=f==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,x=yield s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating),E=(yield s.isElement==null?void 0:s.isElement(x))?(yield s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},C=ra(s.convertOffsetParentRelativeRectToViewportRelativeRect?yield s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:x,strategy:l}):w);return{top:(k.top-C.top+m.top)/E.y,bottom:(C.bottom-k.bottom+m.bottom)/E.y,left:(k.left-C.left+m.left)/E.x,right:(C.right-k.right+m.right)/E.x}})}function Ir(r){return Jh(r)?(r.nodeName||"").toLowerCase():"#document"}function We(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function an(r){var e;return(e=(Jh(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Jh(r){return r instanceof Node||r instanceof We(r).Node}function _t(r){return r instanceof Element||r instanceof We(r).Element}function zt(r){return r instanceof HTMLElement||r instanceof We(r).HTMLElement}function ef(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof We(r).ShadowRoot}function Ai(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=vt(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function Yw(r){return["table","td","th"].includes(Ir(r))}function ia(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function Dl(r){const e=Il(),t=vt(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Gw(r){let e=An(r);for(;zt(e)&&!Nr(e);){if(ia(e))return null;if(Dl(e))return e;e=An(e)}return null}function Il(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Nr(r){return["html","body","#document"].includes(Ir(r))}function vt(r){return We(r).getComputedStyle(r)}function sa(r){return _t(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function An(r){if(Ir(r)==="html")return r;const e=r.assignedSlot||r.parentNode||ef(r)&&r.host||an(r);return ef(e)?e.host:e}function tf(r){const e=An(r);return Nr(e)?r.ownerDocument?r.ownerDocument.body:r.body:zt(e)&&Ai(e)?e:tf(e)}function Ei(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=tf(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=We(i);return s?e.concat(a,a.visualViewport||[],Ai(i)?i:[],a.frameElement&&t?Ei(a.frameElement):[]):e.concat(i,Ei(i,[],t))}function nf(r){const e=vt(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=zt(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=ta(t)!==s||ta(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function Nl(r){return _t(r)?r:r.contextElement}function Or(r){const e=Nl(r);if(!zt(e))return xn(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=nf(e);let a=(s?ta(t.width):t.width)/n,o=(s?ta(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Kw=xn(0);function rf(r){const e=We(r);return!Il()||!e.visualViewport?Kw:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ww(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==We(r)?!1:e}function Qn(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=Nl(r);let a=xn(1);e&&(n?_t(n)&&(a=Or(n)):a=Or(r));const o=Ww(s,t,n)?rf(s):xn(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,d=i.width/a.x,f=i.height/a.y;if(s){const h=We(s),g=n&&_t(n)?We(n):n;let m=h,y=m.frameElement;for(;y&&n&&g!==m;){const k=Or(y),w=y.getBoundingClientRect(),x=vt(y),E=w.left+(y.clientLeft+parseFloat(x.paddingLeft))*k.x,C=w.top+(y.clientTop+parseFloat(x.paddingTop))*k.y;l*=k.x,c*=k.y,d*=k.x,f*=k.y,l+=E,c+=C,m=We(y),y=m.frameElement}}return ra({width:d,height:f,x:l,y:c})}function Qw(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",a=an(n),o=e?ia(e.floating):!1;if(n===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},c=xn(1);const d=xn(0),f=zt(n);if((f||!f&&!s)&&((Ir(n)!=="body"||Ai(a))&&(l=sa(n)),zt(n))){const h=Qn(n);c=Or(n),d.x=h.x+n.clientLeft,d.y=h.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+d.x,y:t.y*c.y-l.scrollTop*c.y+d.y}}function Zw(r){return Array.from(r.getClientRects())}function sf(r){return Qn(an(r)).left+sa(r).scrollLeft}function Xw(r){const e=an(r),t=sa(r),n=r.ownerDocument.body,i=Dr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Dr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+sf(r);const o=-t.scrollTop;return vt(n).direction==="rtl"&&(a+=Dr(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function Jw(r,e){const t=We(r),n=an(r),i=t.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=Il();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function ek(r,e){const t=Qn(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=zt(r)?Or(r):xn(1),a=r.clientWidth*s.x,o=r.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function af(r,e,t){let n;if(e==="viewport")n=Jw(r,t);else if(e==="document")n=Xw(an(r));else if(_t(e))n=ek(e,t);else{const i=rf(r);n=Re(V({},e),{x:e.x-i.x,y:e.y-i.y})}return ra(n)}function of(r,e){const t=An(r);return t===e||!_t(t)||Nr(t)?!1:vt(t).position==="fixed"||of(t,e)}function tk(r,e){const t=e.get(r);if(t)return t;let n=Ei(r,[],!1).filter(o=>_t(o)&&Ir(o)!=="body"),i=null;const s=vt(r).position==="fixed";let a=s?An(r):r;for(;_t(a)&&!Nr(a);){const o=vt(a),l=Dl(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&i&&["absolute","fixed"].includes(i.position)||Ai(a)&&!l&&of(r,a))?n=n.filter(c=>c!==a):i=o,a=An(a)}return e.set(r,n),n}function nk(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const s=[...t==="clippingAncestors"?ia(e)?[]:tk(e,this._c):[].concat(t),n],a=s[0],o=s.reduce((l,c)=>{const d=af(e,c,i);return l.top=Dr(d.top,l.top),l.right=Ll(d.right,l.right),l.bottom=Ll(d.bottom,l.bottom),l.left=Dr(d.left,l.left),l},af(e,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}}function rk(r){const{width:e,height:t}=nf(r);return{width:e,height:t}}function ik(r,e,t){const n=zt(e),i=an(e),s=t==="fixed",a=Qn(r,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=xn(0);if(n||!n&&!s)if((Ir(e)!=="body"||Ai(i))&&(o=sa(e)),n){const f=Qn(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=sf(i));const c=a.left+o.scrollLeft-l.x,d=a.top+o.scrollTop-l.y;return{x:c,y:d,width:a.width,height:a.height}}function Ol(r){return vt(r).position==="static"}function lf(r,e){return!zt(r)||vt(r).position==="fixed"?null:e?e(r):r.offsetParent}function cf(r,e){const t=We(r);if(ia(r))return t;if(!zt(r)){let i=An(r);for(;i&&!Nr(i);){if(_t(i)&&!Ol(i))return i;i=An(i)}return t}let n=lf(r,e);for(;n&&Yw(n)&&Ol(n);)n=lf(n,e);return n&&Nr(n)&&Ol(n)&&!Dl(n)?t:n||Gw(r)||t}const sk=function(r){return fe(this,null,function*(){const e=this.getOffsetParent||cf,t=this.getDimensions,n=yield t(r.floating);return{reference:ik(r.reference,yield e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})};function ak(r){return vt(r).direction==="rtl"}const it={convertOffsetParentRelativeRectToViewportRelativeRect:Qw,getDocumentElement:an,getClippingRect:nk,getOffsetParent:cf,getElementRects:sk,getClientRects:Zw,getDimensions:rk,getScale:Or,isElement:_t,isRTL:ak};function ok(r,e){let t=null,n;const i=an(r);function s(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:c,top:d,width:f,height:h}=r.getBoundingClientRect();if(o||e(),!f||!h)return;const g=na(d),m=na(i.clientWidth-(c+f)),y=na(i.clientHeight-(d+h)),k=na(c),w={rootMargin:-g+"px "+-m+"px "+-y+"px "+-k+"px",threshold:Dr(0,Ll(1,l))||1};let x=!0;function E(C){const I=C[0].intersectionRatio;if(I!==l){if(!x)return a();I?a(!1,I):n=setTimeout(()=>{a(!1,1e-7)},1e3)}x=!1}try{t=new IntersectionObserver(E,Re(V({},w),{root:i.ownerDocument}))}catch{t=new IntersectionObserver(E,w)}t.observe(r)}return a(!0),s}function uf(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Nl(r),d=i||s?[...c?Ei(c):[],...Ei(e)]:[];d.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),s&&w.addEventListener("resize",t)});const f=c&&o?ok(c,t):null;let h=-1,g=null;a&&(g=new ResizeObserver(w=>{let[x]=w;x&&x.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let m,y=l?Qn(r):null;l&&k();function k(){const w=Qn(r);y&&(w.x!==y.x||w.y!==y.y||w.width!==y.width||w.height!==y.height)&&t(),y=w,m=requestAnimationFrame(k)}return t(),()=>{var w;d.forEach(x=>{i&&x.removeEventListener("scroll",t),s&&x.removeEventListener("resize",t)}),f==null||f(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const lk=Vw,Ml=0,z=1,W=2,pe=3,ae=4,Rt=5,aa=6,De=7,Fe=8,Q=9,j=10,ue=11,K=12,de=13,Ci=14,je=15,Ie=16,He=17,Bt=18,Qe=19,wt=20,ke=21,ne=22,Ne=23,st=24,Be=25,ck=0;function xe(r){return r>=48&&r<=57}function En(r){return xe(r)||r>=65&&r<=70||r>=97&&r<=102}function ql(r){return r>=65&&r<=90}function uk(r){return r>=97&&r<=122}function dk(r){return ql(r)||uk(r)}function hk(r){return r>=128}function oa(r){return dk(r)||hk(r)||r===95}function df(r){return oa(r)||xe(r)||r===45}function fk(r){return r>=0&&r<=8||r===11||r>=14&&r<=31||r===127}function la(r){return r===10||r===13||r===12}function Zn(r){return la(r)||r===32||r===9}function Pt(r,e){return!(r!==92||la(e)||e===ck)}function ca(r,e,t){return r===45?oa(e)||e===45||Pt(e,t):oa(r)?!0:r===92?Pt(r,e):!1}function _l(r,e,t){return r===43||r===45?xe(e)?2:e===46&&xe(t)?3:0:r===46?xe(e)?2:0:xe(r)?1:0}function hf(r){return r===65279||r===65534?1:0}const zl=new Array(128),pk=128,ua=130,ff=131,Rl=132,pf=133;for(let r=0;r<zl.length;r++)zl[r]=Zn(r)&&ua||xe(r)&&ff||oa(r)&&Rl||fk(r)&&pf||r||pk;function Bl(r){return r<128?zl[r]:Rl}function Mr(r,e){return e<r.length?r.charCodeAt(e):0}function Pl(r,e,t){return t===13&&Mr(r,e+1)===10?2:1}function qr(r,e,t){let n=r.charCodeAt(e);return ql(n)&&(n=n|32),n===t}function Ti(r,e,t,n){if(t-e!==n.length||e<0||t>r.length)return!1;for(let i=e;i<t;i++){const s=n.charCodeAt(i-e);let a=r.charCodeAt(i);if(ql(a)&&(a=a|32),a!==s)return!1}return!0}function gk(r,e){for(;e>=0&&Zn(r.charCodeAt(e));e--);return e+1}function da(r,e){for(;e<r.length&&Zn(r.charCodeAt(e));e++);return e}function $l(r,e){for(;e<r.length&&xe(r.charCodeAt(e));e++);return e}function _r(r,e){if(e+=2,En(Mr(r,e-1))){for(const n=Math.min(r.length,e+5);e<n&&En(Mr(r,e));e++);const t=Mr(r,e);Zn(t)&&(e+=Pl(r,e,t))}return e}function ha(r,e){for(;e<r.length;e++){const t=r.charCodeAt(e);if(!df(t)){if(Pt(t,Mr(r,e+1))){e=_r(r,e)-1;continue}break}}return e}function fa(r,e){let t=r.charCodeAt(e);if((t===43||t===45)&&(t=r.charCodeAt(e+=1)),xe(t)&&(e=$l(r,e+1),t=r.charCodeAt(e)),t===46&&xe(r.charCodeAt(e+1))&&(e+=2,e=$l(r,e)),qr(r,e,101)){let n=0;t=r.charCodeAt(e+1),(t===45||t===43)&&(n=1,t=r.charCodeAt(e+2)),xe(t)&&(e=$l(r,e+1+n+1))}return e}function Fl(r,e){for(;e<r.length;e++){const t=r.charCodeAt(e);if(t===41){e++;break}Pt(t,Mr(r,e+1))&&(e=_r(r,e))}return e}function gf(r){if(r.length===1&&!En(r.charCodeAt(0)))return r[0];let e=parseInt(r,16);return(e===0||e>=55296&&e<=57343||e>1114111)&&(e=65533),String.fromCodePoint(e)}const mf=["EOF-token","ident-token","function-token","at-keyword-token","hash-token","string-token","bad-string-token","url-token","bad-url-token","delim-token","number-token","percentage-token","dimension-token","whitespace-token","CDO-token","CDC-token","colon-token","semicolon-token","comma-token","[-token","]-token","(-token",")-token","{-token","}-token"],mk=16*1024;function pa(r=null,e){return r===null||r.length<e?new Uint32Array(Math.max(e+1024,mk)):r}const bf=10,bk=12,yf=13;function vf(r){const e=r.source,t=e.length,n=e.length>0?hf(e.charCodeAt(0)):0,i=pa(r.lines,t),s=pa(r.columns,t);let a=r.startLine,o=r.startColumn;for(let l=n;l<t;l++){const c=e.charCodeAt(l);i[l]=a,s[l]=o++,(c===bf||c===yf||c===bk)&&(c===yf&&l+1<t&&e.charCodeAt(l+1)===bf&&(l++,i[l]=a,s[l]=o),a++,o=1)}i[t]=a,s[t]=o,r.lines=i,r.columns=s,r.computed=!0}class yk{constructor(){this.lines=null,this.columns=null,this.computed=!1}setSource(e,t=0,n=1,i=1){this.source=e,this.startOffset=t,this.startLine=n,this.startColumn=i,this.computed=!1}getLocation(e,t){return this.computed||vf(this),{source:t,offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]}}getLocationRange(e,t,n){return this.computed||vf(this),{source:n,start:{offset:this.startOffset+e,line:this.lines[e],column:this.columns[e]},end:{offset:this.startOffset+t,line:this.lines[t],column:this.columns[t]}}}}const at=16777215,Cn=24,vk=new Map([[W,ne],[ke,ne],[Qe,wt],[Ne,st]]);class wk{constructor(e,t){this.setSource(e,t)}reset(){this.eof=!1,this.tokenIndex=-1,this.tokenType=0,this.tokenStart=this.firstCharOffset,this.tokenEnd=this.firstCharOffset}setSource(e="",t=()=>{}){e=String(e||"");const n=e.length,i=pa(this.offsetAndType,e.length+1),s=pa(this.balance,e.length+1);let a=0,o=0,l=0,c=-1;for(this.offsetAndType=null,this.balance=null,t(e,(d,f,h)=>{switch(d){default:s[a]=n;break;case o:{let g=l&at;for(l=s[g],o=l>>Cn,s[a]=g,s[g++]=a;g<a;g++)s[g]===n&&(s[g]=a);break}case ke:case W:case Qe:case Ne:s[a]=l,o=vk.get(d),l=o<<Cn|a;break}i[a++]=d<<Cn|h,c===-1&&(c=f)}),i[a]=Ml<<Cn|n,s[a]=n,s[n]=n;l!==0;){const d=l&at;l=s[d],s[d]=n}this.source=e,this.firstCharOffset=c===-1?0:c,this.tokenCount=a,this.offsetAndType=i,this.balance=s,this.reset(),this.next()}lookupType(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e]>>Cn:Ml}lookupOffset(e){return e+=this.tokenIndex,e<this.tokenCount?this.offsetAndType[e-1]&at:this.source.length}lookupValue(e,t){return e+=this.tokenIndex,e<this.tokenCount?Ti(this.source,this.offsetAndType[e-1]&at,this.offsetAndType[e]&at,t):!1}getTokenStart(e){return e===this.tokenIndex?this.tokenStart:e>0?e<this.tokenCount?this.offsetAndType[e-1]&at:this.offsetAndType[this.tokenCount]&at:this.firstCharOffset}substrToCursor(e){return this.source.substring(e,this.tokenStart)}isBalanceEdge(e){return this.balance[this.tokenIndex]<e}isDelim(e,t){return t?this.lookupType(t)===Q&&this.source.charCodeAt(this.lookupOffset(t))===e:this.tokenType===Q&&this.source.charCodeAt(this.tokenStart)===e}skip(e){let t=this.tokenIndex+e;t<this.tokenCount?(this.tokenIndex=t,this.tokenStart=this.offsetAndType[t-1]&at,t=this.offsetAndType[t],this.tokenType=t>>Cn,this.tokenEnd=t&at):(this.tokenIndex=this.tokenCount,this.next())}next(){let e=this.tokenIndex+1;e<this.tokenCount?(this.tokenIndex=e,this.tokenStart=this.tokenEnd,e=this.offsetAndType[e],this.tokenType=e>>Cn,this.tokenEnd=e&at):(this.eof=!0,this.tokenIndex=this.tokenCount,this.tokenType=Ml,this.tokenStart=this.tokenEnd=this.source.length)}skipSC(){for(;this.tokenType===de||this.tokenType===Be;)this.next()}skipUntilBalanced(e,t){let n=e,i,s;e:for(;n<this.tokenCount;n++){if(i=this.balance[n],i<e)break e;switch(s=n>0?this.offsetAndType[n-1]&at:this.firstCharOffset,t(this.source.charCodeAt(s))){case 1:break e;case 2:n++;break e;default:this.balance[i]===n&&(n=i)}}this.skip(n-this.tokenIndex)}forEachToken(e){for(let t=0,n=this.firstCharOffset;t<this.tokenCount;t++){const i=n,s=this.offsetAndType[t],a=s&at,o=s>>Cn;n=a,e(o,i,a,t)}}dump(){const e=new Array(this.tokenCount);return this.forEachToken((t,n,i,s)=>{e[s]={idx:s,type:mf[t],chunk:this.source.substring(n,i),balance:this.balance[s]}}),e}}function ga(r,e){function t(f){return f<o?r.charCodeAt(f):0}function n(){if(c=fa(r,c),ca(t(c),t(c+1),t(c+2))){d=K,c=ha(r,c);return}if(t(c)===37){d=ue,c++;return}d=j}function i(){const f=c;if(c=ha(r,c),Ti(r,f,c,"url")&&t(c)===40){if(c=da(r,c+1),t(c)===34||t(c)===39){d=W,c=f+4;return}a();return}if(t(c)===40){d=W,c++;return}d=z}function s(f){for(f||(f=t(c++)),d=Rt;c<r.length;c++){const h=r.charCodeAt(c);switch(Bl(h)){case f:c++;return;case ua:if(la(h)){c+=Pl(r,c,h),d=aa;return}break;case 92:if(c===r.length-1)break;const g=t(c+1);la(g)?c+=Pl(r,c+1,g):Pt(h,g)&&(c=_r(r,c)-1);break}}}function a(){for(d=De,c=da(r,c);c<r.length;c++){const f=r.charCodeAt(c);switch(Bl(f)){case 41:c++;return;case ua:if(c=da(r,c),t(c)===41||c>=r.length){c<r.length&&c++;return}c=Fl(r,c),d=Fe;return;case 34:case 39:case 40:case pf:c=Fl(r,c),d=Fe;return;case 92:if(Pt(f,t(c+1))){c=_r(r,c)-1;break}c=Fl(r,c),d=Fe;return}}}r=String(r||"");const o=r.length;let l=hf(t(0)),c=l,d;for(;c<o;){const f=r.charCodeAt(c);switch(Bl(f)){case ua:d=de,c=da(r,c+1);break;case 34:s();break;case 35:df(t(c+1))||Pt(t(c+1),t(c+2))?(d=ae,c=ha(r,c+1)):(d=Q,c++);break;case 39:s();break;case 40:d=ke,c++;break;case 41:d=ne,c++;break;case 43:_l(f,t(c+1),t(c+2))?n():(d=Q,c++);break;case 44:d=Bt,c++;break;case 45:_l(f,t(c+1),t(c+2))?n():t(c+1)===45&&t(c+2)===62?(d=je,c=c+3):ca(f,t(c+1),t(c+2))?i():(d=Q,c++);break;case 46:_l(f,t(c+1),t(c+2))?n():(d=Q,c++);break;case 47:t(c+1)===42?(d=Be,c=r.indexOf("*/",c+2),c=c===-1?r.length:c+2):(d=Q,c++);break;case 58:d=Ie,c++;break;case 59:d=He,c++;break;case 60:t(c+1)===33&&t(c+2)===45&&t(c+3)===45?(d=Ci,c=c+4):(d=Q,c++);break;case 64:ca(t(c+1),t(c+2),t(c+3))?(d=pe,c=ha(r,c+1)):(d=Q,c++);break;case 91:d=Qe,c++;break;case 92:Pt(f,t(c+1))?i():(d=Q,c++);break;case 93:d=wt,c++;break;case 123:d=Ne,c++;break;case 125:d=st,c++;break;case ff:n();break;case Rl:i();break;default:d=Q,c++}e(d,l,l=c)}}let zr=null;class ge{static createItem(e){return{prev:null,next:null,data:e}}constructor(){this.head=null,this.tail=null,this.cursor=null}createItem(e){return ge.createItem(e)}allocateCursor(e,t){let n;return zr!==null?(n=zr,zr=zr.cursor,n.prev=e,n.next=t,n.cursor=this.cursor):n={prev:e,next:t,cursor:this.cursor},this.cursor=n,n}releaseCursor(){const{cursor:e}=this;this.cursor=e.cursor,e.prev=null,e.next=null,e.cursor=zr,zr=e}updateCursors(e,t,n,i){let{cursor:s}=this;for(;s!==null;)s.prev===e&&(s.prev=t),s.next===n&&(s.next=i),s=s.cursor}*[Symbol.iterator](){for(let e=this.head;e!==null;e=e.next)yield e.data}get size(){let e=0;for(let t=this.head;t!==null;t=t.next)e++;return e}get isEmpty(){return this.head===null}get first(){return this.head&&this.head.data}get last(){return this.tail&&this.tail.data}fromArray(e){let t=null;this.head=null;for(let n of e){const i=ge.createItem(n);t!==null?t.next=i:this.head=i,i.prev=t,t=i}return this.tail=t,this}toArray(){return[...this]}toJSON(){return[...this]}forEach(e,t=this){const n=this.allocateCursor(null,this.head);for(;n.next!==null;){const i=n.next;n.next=i.next,e.call(t,i.data,i,this)}this.releaseCursor()}forEachRight(e,t=this){const n=this.allocateCursor(this.tail,null);for(;n.prev!==null;){const i=n.prev;n.prev=i.prev,e.call(t,i.data,i,this)}this.releaseCursor()}reduce(e,t,n=this){let i=this.allocateCursor(null,this.head),s=t,a;for(;i.next!==null;)a=i.next,i.next=a.next,s=e.call(n,s,a.data,a,this);return this.releaseCursor(),s}reduceRight(e,t,n=this){let i=this.allocateCursor(this.tail,null),s=t,a;for(;i.prev!==null;)a=i.prev,i.prev=a.prev,s=e.call(n,s,a.data,a,this);return this.releaseCursor(),s}some(e,t=this){for(let n=this.head;n!==null;n=n.next)if(e.call(t,n.data,n,this))return!0;return!1}map(e,t=this){const n=new ge;for(let i=this.head;i!==null;i=i.next)n.appendData(e.call(t,i.data,i,this));return n}filter(e,t=this){const n=new ge;for(let i=this.head;i!==null;i=i.next)e.call(t,i.data,i,this)&&n.appendData(i.data);return n}nextUntil(e,t,n=this){if(e===null)return;const i=this.allocateCursor(null,e);for(;i.next!==null;){const s=i.next;if(i.next=s.next,t.call(n,s.data,s,this))break}this.releaseCursor()}prevUntil(e,t,n=this){if(e===null)return;const i=this.allocateCursor(e,null);for(;i.prev!==null;){const s=i.prev;if(i.prev=s.prev,t.call(n,s.data,s,this))break}this.releaseCursor()}clear(){this.head=null,this.tail=null}copy(){const e=new ge;for(let t of this)e.appendData(t);return e}prepend(e){return this.updateCursors(null,e,this.head,e),this.head!==null?(this.head.prev=e,e.next=this.head):this.tail=e,this.head=e,this}prependData(e){return this.prepend(ge.createItem(e))}append(e){return this.insert(e)}appendData(e){return this.insert(ge.createItem(e))}insert(e,t=null){if(t!==null)if(this.updateCursors(t.prev,e,t,e),t.prev===null){if(this.head!==t)throw new Error("before doesn't belong to list");this.head=e,t.prev=e,e.next=t,this.updateCursors(null,e)}else t.prev.next=e,e.prev=t.prev,t.prev=e,e.next=t;else this.updateCursors(this.tail,e,null,e),this.tail!==null?(this.tail.next=e,e.prev=this.tail):this.head=e,this.tail=e;return this}insertData(e,t){return this.insert(ge.createItem(e),t)}remove(e){if(this.updateCursors(e,e.prev,e,e.next),e.prev!==null)e.prev.next=e.next;else{if(this.head!==e)throw new Error("item doesn't belong to list");this.head=e.next}if(e.next!==null)e.next.prev=e.prev;else{if(this.tail!==e)throw new Error("item doesn't belong to list");this.tail=e.prev}return e.prev=null,e.next=null,e}push(e){this.insert(ge.createItem(e))}pop(){return this.tail!==null?this.remove(this.tail):null}unshift(e){this.prepend(ge.createItem(e))}shift(){return this.head!==null?this.remove(this.head):null}prependList(e){return this.insertList(e,this.head)}appendList(e){return this.insertList(e)}insertList(e,t){return e.head===null?this:(t!=null?(this.updateCursors(t.prev,e.tail,t,e.head),t.prev!==null?(t.prev.next=e.head,e.head.prev=t.prev):this.head=e.head,t.prev=e.tail,e.tail.next=t):(this.updateCursors(this.tail,e.tail,null,e.head),this.tail!==null?(this.tail.next=e.head,e.head.prev=this.tail):this.head=e.head,this.tail=e.tail),e.head=null,e.tail=null,this)}replace(e,t){"head"in t?this.insertList(t,e):this.insert(t,e),this.remove(e)}}function ma(r,e){const t=Object.create(SyntaxError.prototype),n=new Error;return Object.assign(t,{name:r,message:e,get stack(){return(n.stack||"").replace(/^(.+\n){1,3}/,`${r}: ${e}
`)}})}const jl=100,wf=60,kf="    ";function Sf({source:r,line:e,column:t},n){function i(d,f){return s.slice(d,f).map((h,g)=>String(d+g+1).padStart(l)+" |"+h).join(`
`)}const s=r.split(/\r\n?|\n|\f/),a=Math.max(1,e-n)-1,o=Math.min(e+n,s.length+1),l=Math.max(4,String(o).length)+1;let c=0;t+=(kf.length-1)*(s[e-1].substr(0,t-1).match(/\t/g)||[]).length,t>jl&&(c=t-wf+3,t=wf-2);for(let d=a;d<=o;d++)d>=0&&d<s.length&&(s[d]=s[d].replace(/\t/g,kf),s[d]=(c>0&&s[d].length>c?"…":"")+s[d].substr(c,jl-2)+(s[d].length>c+jl-1?"…":""));return[i(a,e),new Array(t+l+2).join("-")+"^",i(e,o)].filter(Boolean).join(`
`)}function xf(r,e,t,n,i){return Object.assign(ma("SyntaxError",r),{source:e,offset:t,line:n,column:i,sourceFragment(s){return Sf({source:e,line:n,column:i},isNaN(s)?0:s)},get formattedMessage(){return`Parse error: ${r}
`+Sf({source:e,line:n,column:i},2)}})}function kk(r){const e=this.createList();let t=!1;const n={recognizer:r};for(;!this.eof;){switch(this.tokenType){case Be:this.next();continue;case de:t=!0,this.next();continue}let i=r.getNode.call(this,n);if(i===void 0)break;t&&(r.onWhiteSpace&&r.onWhiteSpace.call(this,i,e,n),t=!1),e.push(i)}return t&&r.onWhiteSpace&&r.onWhiteSpace.call(this,null,e,n),e}const Af=()=>{},Sk=33,xk=35,Hl=59,Ef=123,Cf=0;function Ak(r){return function(){return this[r]()}}function Ul(r){const e=Object.create(null);for(const t in r){const n=r[t],i=n.parse||n;i&&(e[t]=i)}return e}function Ek(r){const e={context:Object.create(null),scope:Object.assign(Object.create(null),r.scope),atrule:Ul(r.atrule),pseudo:Ul(r.pseudo),node:Ul(r.node)};for(const t in r.parseContext)switch(typeof r.parseContext[t]){case"function":e.context[t]=r.parseContext[t];break;case"string":e.context[t]=Ak(r.parseContext[t]);break}return V(V({config:e},e),e.node)}function Ck(r){let e="",t="<unknown>",n=!1,i=Af,s=!1;const a=new yk,o=Object.assign(new wk,Ek(r||{}),{parseAtrulePrelude:!0,parseRulePrelude:!0,parseValue:!0,parseCustomProperty:!1,readSequence:kk,consumeUntilBalanceEnd:()=>0,consumeUntilLeftCurlyBracket(l){return l===Ef?1:0},consumeUntilLeftCurlyBracketOrSemicolon(l){return l===Ef||l===Hl?1:0},consumeUntilExclamationMarkOrSemicolon(l){return l===Sk||l===Hl?1:0},consumeUntilSemicolonIncluded(l){return l===Hl?2:0},createList(){return new ge},createSingleNodeList(l){return new ge().appendData(l)},getFirstListNode(l){return l&&l.first},getLastListNode(l){return l&&l.last},parseWithFallback(l,c){const d=this.tokenIndex;try{return l.call(this)}catch(f){if(s)throw f;const h=c.call(this,d);return s=!0,i(f,h),s=!1,h}},lookupNonWSType(l){let c;do if(c=this.lookupType(l++),c!==de)return c;while(c!==Cf);return Cf},charCodeAt(l){return l>=0&&l<e.length?e.charCodeAt(l):0},substring(l,c){return e.substring(l,c)},substrToCursor(l){return this.source.substring(l,this.tokenStart)},cmpChar(l,c){return qr(e,l,c)},cmpStr(l,c,d){return Ti(e,l,c,d)},consume(l){const c=this.tokenStart;return this.eat(l),this.substrToCursor(c)},consumeFunctionName(){const l=e.substring(this.tokenStart,this.tokenEnd-1);return this.eat(W),l},consumeNumber(l){const c=e.substring(this.tokenStart,fa(e,this.tokenStart));return this.eat(l),c},eat(l){if(this.tokenType!==l){const c=mf[l].slice(0,-6).replace(/-/g," ").replace(/^./,h=>h.toUpperCase());let d=`${/[[\](){}]/.test(c)?`"${c}"`:c} is expected`,f=this.tokenStart;switch(l){case z:this.tokenType===W||this.tokenType===De?(f=this.tokenEnd-1,d="Identifier is expected but function found"):d="Identifier is expected";break;case ae:this.isDelim(xk)&&(this.next(),f++,d="Name is expected");break;case ue:this.tokenType===j&&(f=this.tokenEnd,d="Percent sign is expected");break}this.error(d,f)}this.next()},eatIdent(l){(this.tokenType!==z||this.lookupValue(0,l)===!1)&&this.error(`Identifier "${l}" is expected`),this.next()},eatDelim(l){this.isDelim(l)||this.error(`Delim "${String.fromCharCode(l)}" is expected`),this.next()},getLocation(l,c){return n?a.getLocationRange(l,c,t):null},getLocationFromList(l){if(n){const c=this.getFirstListNode(l),d=this.getLastListNode(l);return a.getLocationRange(c!==null?c.loc.start.offset-a.startOffset:this.tokenStart,d!==null?d.loc.end.offset-a.startOffset:this.tokenStart,t)}return null},error(l,c){const d=typeof c<"u"&&c<e.length?a.getLocation(c):this.eof?a.getLocation(gk(e,e.length-1)):a.getLocation(this.tokenStart);throw new xf(l||"Unexpected input",e,d.offset,d.line,d.column)}});return Object.assign(function(l,c){e=l,c=c||{},o.setSource(e,ga),a.setSource(e,c.offset,c.line,c.column),t=c.filename||"<unknown>",n=!!c.positions,i=typeof c.onParseError=="function"?c.onParseError:Af,s=!1,o.parseAtrulePrelude="parseAtrulePrelude"in c?!!c.parseAtrulePrelude:!0,o.parseRulePrelude="parseRulePrelude"in c?!!c.parseRulePrelude:!0,o.parseValue="parseValue"in c?!!c.parseValue:!0,o.parseCustomProperty="parseCustomProperty"in c?!!c.parseCustomProperty:!1;const{context:d="default",onComment:f}=c;if(!(d in o.context))throw new Error("Unknown context `"+d+"`");typeof f=="function"&&o.forEachToken((g,m,y)=>{if(g===Be){const k=o.getLocation(m,y),w=Ti(e,y-2,y,"*/")?e.slice(m+2,y-2):e.slice(m+2,y);f(w,k)}});const h=o.context[d].call(o,c);return o.eof||o.error(),h},{SyntaxError:xf,config:o.config})}var Vl={},Yl={},Tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Yl.encode=function(r){if(0<=r&&r<Tf.length)return Tf[r];throw new TypeError("Must be between 0 and 63: "+r)},Yl.decode=function(r){var e=65,t=90,n=97,i=122,s=48,a=57,o=43,l=47,c=26,d=52;return e<=r&&r<=t?r-e:n<=r&&r<=i?r-n+c:s<=r&&r<=a?r-s+d:r==o?62:r==l?63:-1};var Lf=Yl,Gl=5,Df=1<<Gl,If=Df-1,Nf=Df;function Tk(r){return r<0?(-r<<1)+1:(r<<1)+0}function Lk(r){var e=(r&1)===1,t=r>>1;return e?-t:t}Vl.encode=function(r){var e="",t,n=Tk(r);do t=n&If,n>>>=Gl,n>0&&(t|=Nf),e+=Lf.encode(t);while(n>0);return e},Vl.decode=function(r,e,t){var n=r.length,i=0,s=0,a,o;do{if(e>=n)throw new Error("Expected more digits in base 64 VLQ value.");if(o=Lf.decode(r.charCodeAt(e++)),o===-1)throw new Error("Invalid base64 digit: "+r.charAt(e-1));a=!!(o&Nf),o&=If,i=i+(o<<s),s+=Gl}while(a);t.value=Lk(i),t.rest=e};var ba={};(function(r){function e(S,A,_){if(A in S)return S[A];if(arguments.length===3)return _;throw new Error('"'+A+'" is a required argument.')}r.getArg=e;var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(S){var A=S.match(t);return A?{scheme:A[1],auth:A[2],host:A[3],port:A[4],path:A[5]}:null}r.urlParse=i;function s(S){var A="";return S.scheme&&(A+=S.scheme+":"),A+="//",S.auth&&(A+=S.auth+"@"),S.host&&(A+=S.host),S.port&&(A+=":"+S.port),S.path&&(A+=S.path),A}r.urlGenerate=s;var a=32;function o(S){var A=[];return function(_){for(var N=0;N<A.length;N++)if(A[N].input===_){var G=A[0];return A[0]=A[N],A[N]=G,A[0].result}var me=S(_);return A.unshift({input:_,result:me}),A.length>a&&A.pop(),me}}var l=o(function(S){var A=S,_=i(S);if(_){if(!_.path)return S;A=_.path}for(var N=r.isAbsolute(A),G=[],me=0,le=0;;)if(me=le,le=A.indexOf("/",me),le===-1){G.push(A.slice(me));break}else for(G.push(A.slice(me,le));le<A.length&&A[le]==="/";)le++;for(var Je,Ue=0,le=G.length-1;le>=0;le--)Je=G[le],Je==="."?G.splice(le,1):Je===".."?Ue++:Ue>0&&(Je===""?(G.splice(le+1,Ue),Ue=0):(G.splice(le,2),Ue--));return A=G.join("/"),A===""&&(A=N?"/":"."),_?(_.path=A,s(_)):A});r.normalize=l;function c(S,A){S===""&&(S="."),A===""&&(A=".");var _=i(A),N=i(S);if(N&&(S=N.path||"/"),_&&!_.scheme)return N&&(_.scheme=N.scheme),s(_);if(_||A.match(n))return A;if(N&&!N.host&&!N.path)return N.host=A,s(N);var G=A.charAt(0)==="/"?A:l(S.replace(/\/+$/,"")+"/"+A);return N?(N.path=G,s(N)):G}r.join=c,r.isAbsolute=function(S){return S.charAt(0)==="/"||t.test(S)};function d(S,A){S===""&&(S="."),S=S.replace(/\/$/,"");for(var _=0;A.indexOf(S+"/")!==0;){var N=S.lastIndexOf("/");if(N<0||(S=S.slice(0,N),S.match(/^([^\/]+:\/)?\/*$/)))return A;++_}return Array(_+1).join("../")+A.substr(S.length+1)}r.relative=d;var f=function(){var S=Object.create(null);return!("__proto__"in S)}();function h(S){return S}function g(S){return y(S)?"$"+S:S}r.toSetString=f?h:g;function m(S){return y(S)?S.slice(1):S}r.fromSetString=f?h:m;function y(S){if(!S)return!1;var A=S.length;if(A<9||S.charCodeAt(A-1)!==95||S.charCodeAt(A-2)!==95||S.charCodeAt(A-3)!==111||S.charCodeAt(A-4)!==116||S.charCodeAt(A-5)!==111||S.charCodeAt(A-6)!==114||S.charCodeAt(A-7)!==112||S.charCodeAt(A-8)!==95||S.charCodeAt(A-9)!==95)return!1;for(var _=A-10;_>=0;_--)if(S.charCodeAt(_)!==36)return!1;return!0}function k(S,A,_){var N=C(S.source,A.source);return N!==0||(N=S.originalLine-A.originalLine,N!==0)||(N=S.originalColumn-A.originalColumn,N!==0||_)||(N=S.generatedColumn-A.generatedColumn,N!==0)||(N=S.generatedLine-A.generatedLine,N!==0)?N:C(S.name,A.name)}r.compareByOriginalPositions=k;function w(S,A,_){var N;return N=S.originalLine-A.originalLine,N!==0||(N=S.originalColumn-A.originalColumn,N!==0||_)||(N=S.generatedColumn-A.generatedColumn,N!==0)||(N=S.generatedLine-A.generatedLine,N!==0)?N:C(S.name,A.name)}r.compareByOriginalPositionsNoSource=w;function x(S,A,_){var N=S.generatedLine-A.generatedLine;return N!==0||(N=S.generatedColumn-A.generatedColumn,N!==0||_)||(N=C(S.source,A.source),N!==0)||(N=S.originalLine-A.originalLine,N!==0)||(N=S.originalColumn-A.originalColumn,N!==0)?N:C(S.name,A.name)}r.compareByGeneratedPositionsDeflated=x;function E(S,A,_){var N=S.generatedColumn-A.generatedColumn;return N!==0||_||(N=C(S.source,A.source),N!==0)||(N=S.originalLine-A.originalLine,N!==0)||(N=S.originalColumn-A.originalColumn,N!==0)?N:C(S.name,A.name)}r.compareByGeneratedPositionsDeflatedNoLine=E;function C(S,A){return S===A?0:S===null?1:A===null?-1:S>A?1:-1}function I(S,A){var _=S.generatedLine-A.generatedLine;return _!==0||(_=S.generatedColumn-A.generatedColumn,_!==0)||(_=C(S.source,A.source),_!==0)||(_=S.originalLine-A.originalLine,_!==0)||(_=S.originalColumn-A.originalColumn,_!==0)?_:C(S.name,A.name)}r.compareByGeneratedPositionsInflated=I;function M(S){return JSON.parse(S.replace(/^\)]}'[^\n]*\n/,""))}r.parseSourceMapInput=M;function O(S,A,_){if(A=A||"",S&&(S[S.length-1]!=="/"&&A[0]!=="/"&&(S+="/"),A=S+A),_){var N=i(_);if(!N)throw new Error("sourceMapURL could not be parsed");if(N.path){var G=N.path.lastIndexOf("/");G>=0&&(N.path=N.path.substring(0,G+1))}A=c(s(N),A)}return l(A)}r.computeSourceURL=O})(ba);var Of={},Kl=ba,Wl=Object.prototype.hasOwnProperty,Xn=typeof Map<"u";function on(){this._array=[],this._set=Xn?new Map:Object.create(null)}on.fromArray=function(r,e){for(var t=new on,n=0,i=r.length;n<i;n++)t.add(r[n],e);return t},on.prototype.size=function(){return Xn?this._set.size:Object.getOwnPropertyNames(this._set).length},on.prototype.add=function(r,e){var t=Xn?r:Kl.toSetString(r),n=Xn?this.has(r):Wl.call(this._set,t),i=this._array.length;(!n||e)&&this._array.push(r),n||(Xn?this._set.set(r,i):this._set[t]=i)},on.prototype.has=function(r){if(Xn)return this._set.has(r);var e=Kl.toSetString(r);return Wl.call(this._set,e)},on.prototype.indexOf=function(r){if(Xn){var e=this._set.get(r);if(e>=0)return e}else{var t=Kl.toSetString(r);if(Wl.call(this._set,t))return this._set[t]}throw new Error('"'+r+'" is not in the set.')},on.prototype.at=function(r){if(r>=0&&r<this._array.length)return this._array[r];throw new Error("No element indexed by "+r)},on.prototype.toArray=function(){return this._array.slice()},Of.ArraySet=on;var Mf={},qf=ba;function Dk(r,e){var t=r.generatedLine,n=e.generatedLine,i=r.generatedColumn,s=e.generatedColumn;return n>t||n==t&&s>=i||qf.compareByGeneratedPositionsInflated(r,e)<=0}function ya(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}ya.prototype.unsortedForEach=function(r,e){this._array.forEach(r,e)},ya.prototype.add=function(r){Dk(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))},ya.prototype.toArray=function(){return this._sorted||(this._array.sort(qf.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Mf.MappingList=ya;var Li=Vl,he=ba,va=Of.ArraySet,Ik=Mf.MappingList;function ot(r){r||(r={}),this._file=he.getArg(r,"file",null),this._sourceRoot=he.getArg(r,"sourceRoot",null),this._skipValidation=he.getArg(r,"skipValidation",!1),this._ignoreInvalidMapping=he.getArg(r,"ignoreInvalidMapping",!1),this._sources=new va,this._names=new va,this._mappings=new Ik,this._sourcesContents=null}ot.prototype._version=3,ot.fromSourceMap=function(r,e){var t=r.sourceRoot,n=new ot(Object.assign(e||{},{file:r.file,sourceRoot:t}));return r.eachMapping(function(i){var s={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(s.source=i.source,t!=null&&(s.source=he.relative(t,s.source)),s.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(s.name=i.name)),n.addMapping(s)}),r.sources.forEach(function(i){var s=i;t!==null&&(s=he.relative(t,i)),n._sources.has(s)||n._sources.add(s);var a=r.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},ot.prototype.addMapping=function(r){var e=he.getArg(r,"generated"),t=he.getArg(r,"original",null),n=he.getArg(r,"source",null),i=he.getArg(r,"name",null);!this._skipValidation&&this._validateMapping(e,t,n,i)===!1||(n!=null&&(n=String(n),this._sources.has(n)||this._sources.add(n)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:e.line,generatedColumn:e.column,originalLine:t!=null&&t.line,originalColumn:t!=null&&t.column,source:n,name:i}))},ot.prototype.setSourceContent=function(r,e){var t=r;this._sourceRoot!=null&&(t=he.relative(this._sourceRoot,t)),e!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[he.toSetString(t)]=e):this._sourcesContents&&(delete this._sourcesContents[he.toSetString(t)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},ot.prototype.applySourceMap=function(r,e,t){var n=e;if(e==null){if(r.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);n=r.file}var i=this._sourceRoot;i!=null&&(n=he.relative(i,n));var s=new va,a=new va;this._mappings.unsortedForEach(function(o){if(o.source===n&&o.originalLine!=null){var l=r.originalPositionFor({line:o.originalLine,column:o.originalColumn});l.source!=null&&(o.source=l.source,t!=null&&(o.source=he.join(t,o.source)),i!=null&&(o.source=he.relative(i,o.source)),o.originalLine=l.line,o.originalColumn=l.column,l.name!=null&&(o.name=l.name))}var c=o.source;c!=null&&!s.has(c)&&s.add(c);var d=o.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=s,this._names=a,r.sources.forEach(function(o){var l=r.sourceContentFor(o);l!=null&&(t!=null&&(o=he.join(t,o)),i!=null&&(o=he.relative(i,o)),this.setSourceContent(o,l))},this)},ot.prototype._validateMapping=function(r,e,t,n){if(e&&typeof e.line!="number"&&typeof e.column!="number"){var i="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}if(!(r&&"line"in r&&"column"in r&&r.line>0&&r.column>=0&&!e&&!t&&!n)){if(r&&"line"in r&&"column"in r&&e&&"line"in e&&"column"in e&&r.line>0&&r.column>=0&&e.line>0&&e.column>=0&&t)return;var i="Invalid mapping: "+JSON.stringify({generated:r,source:t,original:e,name:n});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}},ot.prototype._serializeMappings=function(){for(var r=0,e=1,t=0,n=0,i=0,s=0,a="",o,l,c,d,f=this._mappings.toArray(),h=0,g=f.length;h<g;h++){if(l=f[h],o="",l.generatedLine!==e)for(r=0;l.generatedLine!==e;)o+=";",e++;else if(h>0){if(!he.compareByGeneratedPositionsInflated(l,f[h-1]))continue;o+=","}o+=Li.encode(l.generatedColumn-r),r=l.generatedColumn,l.source!=null&&(d=this._sources.indexOf(l.source),o+=Li.encode(d-s),s=d,o+=Li.encode(l.originalLine-1-n),n=l.originalLine-1,o+=Li.encode(l.originalColumn-t),t=l.originalColumn,l.name!=null&&(c=this._names.indexOf(l.name),o+=Li.encode(c-i),i=c)),a+=o}return a},ot.prototype._generateSourcesContent=function(r,e){return r.map(function(t){if(!this._sourcesContents)return null;e!=null&&(t=he.relative(e,t));var n=he.toSetString(t);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},ot.prototype.toJSON=function(){var r={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(r.file=this._file),this._sourceRoot!=null&&(r.sourceRoot=this._sourceRoot),this._sourcesContents&&(r.sourcesContent=this._generateSourcesContent(r.sources,r.sourceRoot)),r},ot.prototype.toString=function(){return JSON.stringify(this.toJSON())};var Nk=ot;const _f=new Set(["Atrule","Selector","Declaration"]);function Ok(r){const e=new Nk,t={line:1,column:0},n={line:0,column:0},i={line:1,column:0},s={generated:i};let a=1,o=0,l=!1;const c=r.node;r.node=function(h){if(h.loc&&h.loc.start&&_f.has(h.type)){const g=h.loc.start.line,m=h.loc.start.column-1;(n.line!==g||n.column!==m)&&(n.line=g,n.column=m,t.line=a,t.column=o,l&&(l=!1,(t.line!==i.line||t.column!==i.column)&&e.addMapping(s)),l=!0,e.addMapping({source:h.loc.source,original:n,generated:t}))}c.call(this,h),l&&_f.has(h.type)&&(i.line=a,i.column=o)};const d=r.emit;r.emit=function(h,g,m){for(let y=0;y<h.length;y++)h.charCodeAt(y)===10?(a++,o=0):o++;d(h,g,m)};const f=r.result;return r.result=function(){return l&&e.addMapping(s),{css:f(),map:e}},r}const Mk=43,qk=45,Ql=(r,e)=>{if(r===Q&&(r=e),typeof r=="string"){const t=r.charCodeAt(0);return t>127?32768:t<<8}return r},zf=[[z,z],[z,W],[z,De],[z,Fe],[z,"-"],[z,j],[z,ue],[z,K],[z,je],[z,ke],[pe,z],[pe,W],[pe,De],[pe,Fe],[pe,"-"],[pe,j],[pe,ue],[pe,K],[pe,je],[ae,z],[ae,W],[ae,De],[ae,Fe],[ae,"-"],[ae,j],[ae,ue],[ae,K],[ae,je],[K,z],[K,W],[K,De],[K,Fe],[K,"-"],[K,j],[K,ue],[K,K],[K,je],["#",z],["#",W],["#",De],["#",Fe],["#","-"],["#",j],["#",ue],["#",K],["#",je],["-",z],["-",W],["-",De],["-",Fe],["-","-"],["-",j],["-",ue],["-",K],["-",je],[j,z],[j,W],[j,De],[j,Fe],[j,j],[j,ue],[j,K],[j,"%"],[j,je],["@",z],["@",W],["@",De],["@",Fe],["@","-"],["@",je],[".",j],[".",ue],[".",K],["+",j],["+",ue],["+",K],["/","*"]],_k=zf.concat([[z,ae],[K,ae],[ae,ae],[pe,ke],[pe,Rt],[pe,Ie],[ue,ue],[ue,K],[ue,W],[ue,"-"],[ne,z],[ne,W],[ne,ue],[ne,K],[ne,ae],[ne,"-"]]);function Rf(r){const e=new Set(r.map(([t,n])=>Ql(t)<<16|Ql(n)));return function(t,n,i){const s=Ql(n,i),a=i.charCodeAt(0);return(a===qk&&n!==z&&n!==W&&n!==je||a===Mk?e.has(t<<16|a<<8):e.has(t<<16|s))&&this.emit(" ",de,!0),s}}const zk=Rf(zf),Bf=Rf(_k),Pf=Object.freeze(Object.defineProperty({__proto__:null,safe:Bf,spec:zk},Symbol.toStringTag,{value:"Module"})),Rk=92;function Bk(r,e){if(typeof e=="function"){let t=null;r.children.forEach(n=>{t!==null&&e.call(this,t),this.node(n),t=n});return}r.children.forEach(this.node,this)}function Pk(r){ga(r,(e,t,n)=>{this.token(e,r.slice(t,n))})}function $k(r){const e=new Map;for(let t in r.node){const n=r.node[t];typeof(n.generate||n)=="function"&&e.set(t,n.generate||n)}return function(t,n){let i="",s=0,a={node(l){if(e.has(l.type))e.get(l.type).call(o,l);else throw new Error("Unknown node type: "+l.type)},tokenBefore:Bf,token(l,c){s=this.tokenBefore(s,l,c),this.emit(c,l,!1),l===Q&&c.charCodeAt(0)===Rk&&this.emit(`
`,de,!0)},emit(l){i+=l},result(){return i}};n&&(typeof n.decorator=="function"&&(a=n.decorator(a)),n.sourceMap&&(a=Ok(a)),n.mode in Pf&&(a.tokenBefore=Pf[n.mode]));const o={node:l=>a.node(l),children:Bk,token:(l,c)=>a.token(l,c),tokenize:Pk};return a.node(t),a.result()}}function Fk(r){return{fromPlainObject(e){return r(e,{enter(t){t.children&&!(t.children instanceof ge)&&(t.children=new ge().fromArray(t.children))}}),e},toPlainObject(e){return r(e,{leave(t){t.children&&t.children instanceof ge&&(t.children=t.children.toArray())}}),e}}}const{hasOwnProperty:Zl}=Object.prototype,Di=function(){};function $f(r){return typeof r=="function"?r:Di}function Ff(r,e){return function(t,n,i){t.type===e&&r.call(this,t,n,i)}}function jk(r,e){const t=e.structure,n=[];for(const i in t){if(Zl.call(t,i)===!1)continue;let s=t[i];const a={name:i,type:!1,nullable:!1};Array.isArray(s)||(s=[s]);for(const o of s)o===null?a.nullable=!0:typeof o=="string"?a.type="node":Array.isArray(o)&&(a.type="list");a.type&&n.push(a)}return n.length?{context:e.walkContext,fields:n}:null}function Hk(r){const e={};for(const t in r.node)if(Zl.call(r.node,t)){const n=r.node[t];if(!n.structure)throw new Error("Missed `structure` field in `"+t+"` node type definition");e[t]=jk(t,n)}return e}function jf(r,e){const t=r.fields.slice(),n=r.context,i=typeof n=="string";return e&&t.reverse(),function(s,a,o,l){let c;i&&(c=a[n],a[n]=s);for(const d of t){const f=s[d.name];if(!d.nullable||f){if(d.type==="list"){if(e?f.reduceRight(l,!1):f.reduce(l,!1))return!0}else if(o(f))return!0}}i&&(a[n]=c)}}function Hf({StyleSheet:r,Atrule:e,Rule:t,Block:n,DeclarationList:i}){return{Atrule:{StyleSheet:r,Atrule:e,Rule:t,Block:n},Rule:{StyleSheet:r,Atrule:e,Rule:t,Block:n},Declaration:{StyleSheet:r,Atrule:e,Rule:t,Block:n,DeclarationList:i}}}function Uk(r){const e=Hk(r),t={},n={},i=Symbol("break-walk"),s=Symbol("skip-node");for(const c in e)Zl.call(e,c)&&e[c]!==null&&(t[c]=jf(e[c],!1),n[c]=jf(e[c],!0));const a=Hf(t),o=Hf(n),l=function(c,d){function f(w,x,E){const C=h.call(k,w,x,E);return C===i?!0:C===s?!1:!!(m.hasOwnProperty(w.type)&&m[w.type](w,k,f,y)||g.call(k,w,x,E)===i)}let h=Di,g=Di,m=t,y=(w,x,E,C)=>w||f(x,E,C);const k={break:i,skip:s,root:c,stylesheet:null,atrule:null,atrulePrelude:null,rule:null,selector:null,block:null,declaration:null,function:null};if(typeof d=="function")h=d;else if(d&&(h=$f(d.enter),g=$f(d.leave),d.reverse&&(m=n),d.visit)){if(a.hasOwnProperty(d.visit))m=d.reverse?o[d.visit]:a[d.visit];else if(!e.hasOwnProperty(d.visit))throw new Error("Bad value `"+d.visit+"` for `visit` option (should be: "+Object.keys(e).sort().join(", ")+")");h=Ff(h,d.visit),g=Ff(g,d.visit)}if(h===Di&&g===Di)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");f(c)};return l.break=i,l.skip=s,l.find=function(c,d){let f=null;return l(c,function(h,g,m){if(d.call(this,h,g,m))return f=h,i}),f},l.findLast=function(c,d){let f=null;return l(c,{reverse:!0,enter(h,g,m){if(d.call(this,h,g,m))return f=h,i}}),f},l.findAll=function(c,d){const f=[];return l(c,function(h,g,m){d.call(this,h,g,m)&&f.push(h)}),f},l}function Vk(r){return r}function Yk(r){const{min:e,max:t,comma:n}=r;return e===0&&t===0?n?"#?":"*":e===0&&t===1?"?":e===1&&t===0?n?"#":"+":e===1&&t===1?"":(n?"#":"")+(e===t?"{"+e+"}":"{"+e+","+(t!==0?t:"")+"}")}function Gk(r){switch(r.type){case"Range":return" ["+(r.min===null?"-∞":r.min)+","+(r.max===null?"∞":r.max)+"]";default:throw new Error("Unknown node type `"+r.type+"`")}}function Kk(r,e,t,n){const i=r.combinator===" "||n?r.combinator:" "+r.combinator+" ",s=r.terms.map(a=>Xl(a,e,t,n)).join(i);return r.explicit||t?(n||s[0]===","?"[":"[ ")+s+(n?"]":" ]"):s}function Xl(r,e,t,n){let i;switch(r.type){case"Group":i=Kk(r,e,t,n)+(r.disallowEmpty?"!":"");break;case"Multiplier":return Xl(r.term,e,t,n)+e(Yk(r),r);case"Type":i="<"+r.name+(r.opts?e(Gk(r.opts),r.opts):"")+">";break;case"Property":i="<'"+r.name+"'>";break;case"Keyword":i=r.name;break;case"AtKeyword":i="@"+r.name;break;case"Function":i=r.name+"(";break;case"String":case"Token":i=r.value;break;case"Comma":i=",";break;default:throw new Error("Unknown node type `"+r.type+"`")}return e(i,r)}function Jl(r,e){let t=Vk,n=!1,i=!1;return typeof e=="function"?t=e:e&&(n=!!e.forceBraces,i=!!e.compact,typeof e.decorate=="function"&&(t=e.decorate)),Xl(r,t,n,i)}const Uf={offset:0,line:1,column:1};function Wk(r,e){const t=r.tokens,n=r.longestMatch,i=n<t.length&&t[n].node||null,s=i!==e?i:null;let a=0,o=0,l=0,c="",d,f;for(let h=0;h<t.length;h++){const g=t[h].value;h===n&&(o=g.length,a=c.length),s!==null&&t[h].node===s&&(h<=n?l++:l=0),c+=g}return n===t.length||l>1?(d=wa(s||e,"end")||Ii(Uf,c),f=Ii(d)):(d=wa(s,"start")||Ii(wa(e,"start")||Uf,c.slice(0,a)),f=wa(s,"end")||Ii(d,c.substr(a,o))),{css:c,mismatchOffset:a,mismatchLength:o,start:d,end:f}}function wa(r,e){const t=r&&r.loc&&r.loc[e];return t?"line"in t?Ii(t):t:null}function Ii({offset:r,line:e,column:t},n){const i={offset:r,line:e,column:t};if(n){const s=n.split(/\n|\r\n?|\f/);i.offset+=n.length,i.line+=s.length-1,i.column=s.length===1?i.column+n.length:s.pop().length+1}return i}const Ni=function(r,e){const t=ma("SyntaxReferenceError",r+(e?" `"+e+"`":""));return t.reference=e,t},Qk=function(r,e,t,n){const i=ma("SyntaxMatchError",r),{css:s,mismatchOffset:a,mismatchLength:o,start:l,end:c}=Wk(n,t);return i.rawMessage=r,i.syntax=e?Jl(e):"<generic>",i.css=s,i.mismatchOffset=a,i.mismatchLength=o,i.message=r+`
  syntax: `+i.syntax+`
   value: `+(s||"<empty string>")+`
  --------`+new Array(i.mismatchOffset+1).join("-")+"^",Object.assign(i,l),i.loc={source:t&&t.loc&&t.loc.source||"<unknown>",start:l,end:c},i},ka=new Map,Rr=new Map,Sa=45,ec=Zk,Vf=Xk;function tc(r,e){return e=e||0,r.length-e>=2&&r.charCodeAt(e)===Sa&&r.charCodeAt(e+1)===Sa}function Yf(r,e){if(e=e||0,r.length-e>=3&&r.charCodeAt(e)===Sa&&r.charCodeAt(e+1)!==Sa){const t=r.indexOf("-",e+2);if(t!==-1)return r.substring(e,t+1)}return""}function Zk(r){if(ka.has(r))return ka.get(r);const e=r.toLowerCase();let t=ka.get(e);if(t===void 0){const n=tc(e,0),i=n?"":Yf(e,0);t=Object.freeze({basename:e.substr(i.length),name:e,prefix:i,vendor:i,custom:n})}return ka.set(r,t),t}function Xk(r){if(Rr.has(r))return Rr.get(r);let e=r,t=r[0];t==="/"?t=r[1]==="/"?"//":"/":t!=="_"&&t!=="*"&&t!=="$"&&t!=="#"&&t!=="+"&&t!=="&"&&(t="");const n=tc(e,t.length);if(!n&&(e=e.toLowerCase(),Rr.has(e))){const o=Rr.get(e);return Rr.set(r,o),o}const i=n?"":Yf(e,t.length),s=e.substr(0,t.length+i.length),a=Object.freeze({basename:e.substr(s.length),name:e.substr(t.length),hack:t,vendor:i,prefix:s,custom:n});return Rr.set(r,a),a}const Gf=["initial","inherit","unset","revert","revert-layer"],Oi=43,$t=45,nc=110,Br=!0,Jk=!1;function rc(r,e){return r!==null&&r.type===Q&&r.value.charCodeAt(0)===e}function Mi(r,e,t){for(;r!==null&&(r.type===de||r.type===Be);)r=t(++e);return e}function Tn(r,e,t,n){if(!r)return 0;const i=r.value.charCodeAt(e);if(i===Oi||i===$t){if(t)return 0;e++}for(;e<r.value.length;e++)if(!xe(r.value.charCodeAt(e)))return 0;return n+1}function ic(r,e,t){let n=!1,i=Mi(r,e,t);if(r=t(i),r===null)return e;if(r.type!==j)if(rc(r,Oi)||rc(r,$t)){if(n=!0,i=Mi(t(++i),i,t),r=t(i),r===null||r.type!==j)return 0}else return e;if(!n){const s=r.value.charCodeAt(0);if(s!==Oi&&s!==$t)return 0}return Tn(r,n?0:1,n,i)}function eS(r,e){let t=0;if(!r)return 0;if(r.type===j)return Tn(r,0,Jk,t);if(r.type===z&&r.value.charCodeAt(0)===$t){if(!qr(r.value,1,nc))return 0;switch(r.value.length){case 2:return ic(e(++t),t,e);case 3:return r.value.charCodeAt(2)!==$t?0:(t=Mi(e(++t),t,e),r=e(t),Tn(r,0,Br,t));default:return r.value.charCodeAt(2)!==$t?0:Tn(r,3,Br,t)}}else if(r.type===z||rc(r,Oi)&&e(t+1).type===z){if(r.type!==z&&(r=e(++t)),r===null||!qr(r.value,0,nc))return 0;switch(r.value.length){case 1:return ic(e(++t),t,e);case 2:return r.value.charCodeAt(1)!==$t?0:(t=Mi(e(++t),t,e),r=e(t),Tn(r,0,Br,t));default:return r.value.charCodeAt(1)!==$t?0:Tn(r,2,Br,t)}}else if(r.type===K){let n=r.value.charCodeAt(0),i=n===Oi||n===$t?1:0,s=i;for(;s<r.value.length&&xe(r.value.charCodeAt(s));s++);return s===i||!qr(r.value,s,nc)?0:s+1===r.value.length?ic(e(++t),t,e):r.value.charCodeAt(s+1)!==$t?0:s+2===r.value.length?(t=Mi(e(++t),t,e),r=e(t),Tn(r,0,Br,t)):Tn(r,s+2,Br,t)}return 0}const tS=43,Kf=45,Wf=63,nS=117;function sc(r,e){return r!==null&&r.type===Q&&r.value.charCodeAt(0)===e}function rS(r,e){return r.value.charCodeAt(0)===e}function qi(r,e,t){let n=0;for(let i=e;i<r.value.length;i++){const s=r.value.charCodeAt(i);if(s===Kf&&t&&n!==0)return qi(r,e+n+1,!1),6;if(!En(s)||++n>6)return 0}return n}function xa(r,e,t){if(!r)return 0;for(;sc(t(e),Wf);){if(++r>6)return 0;e++}return e}function iS(r,e){let t=0;if(r===null||r.type!==z||!qr(r.value,0,nS)||(r=e(++t),r===null))return 0;if(sc(r,tS))return r=e(++t),r===null?0:r.type===z?xa(qi(r,0,!0),++t,e):sc(r,Wf)?xa(1,++t,e):0;if(r.type===j){const n=qi(r,1,!0);return n===0?0:(r=e(++t),r===null?t:r.type===K||r.type===j?!rS(r,Kf)||!qi(r,1,!1)?0:t+1:xa(n,t,e))}return r.type===K?xa(qi(r,1,!0),++t,e):0}const sS=["calc(","-moz-calc(","-webkit-calc("],ac=new Map([[W,ne],[ke,ne],[Qe,wt],[Ne,st]]);function kt(r,e){return e<r.length?r.charCodeAt(e):0}function Qf(r,e){return Ti(r,0,r.length,e)}function Zf(r,e){for(let t=0;t<e.length;t++)if(Qf(r,e[t]))return!0;return!1}function Xf(r,e){return e!==r.length-2?!1:kt(r,e)===92&&xe(kt(r,e+1))}function Aa(r,e,t){if(r&&r.type==="Range"){const n=Number(t!==void 0&&t!==e.length?e.substr(0,t):e);if(isNaN(n)||r.min!==null&&n<r.min&&typeof r.min!="string"||r.max!==null&&n>r.max&&typeof r.max!="string")return!0}return!1}function aS(r,e){let t=0,n=[],i=0;e:do{switch(r.type){case st:case ne:case wt:if(r.type!==t)break e;if(t=n.pop(),n.length===0){i++;break e}break;case W:case ke:case Qe:case Ne:n.push(t),t=ac.get(r.type);break}i++}while(r=e(i));return i}function lt(r){return function(e,t,n){return e===null?0:e.type===W&&Zf(e.value,sS)?aS(e,t):r(e,t,n)}}function oe(r){return function(e){return e===null||e.type!==r?0:1}}function oS(r){if(r===null||r.type!==z)return 0;const e=r.value.toLowerCase();return Zf(e,Gf)||Qf(e,"default")?0:1}function lS(r){return r===null||r.type!==z||kt(r.value,0)!==45||kt(r.value,1)!==45?0:1}function cS(r){if(r===null||r.type!==ae)return 0;const e=r.value.length;if(e!==4&&e!==5&&e!==7&&e!==9)return 0;for(let t=1;t<e;t++)if(!En(kt(r.value,t)))return 0;return 1}function uS(r){return r===null||r.type!==ae||!ca(kt(r.value,1),kt(r.value,2),kt(r.value,3))?0:1}function dS(r,e){if(!r)return 0;let t=0,n=[],i=0;e:do{switch(r.type){case aa:case Fe:break e;case st:case ne:case wt:if(r.type!==t)break e;t=n.pop();break;case He:if(t===0)break e;break;case Q:if(t===0&&r.value==="!")break e;break;case W:case ke:case Qe:case Ne:n.push(t),t=ac.get(r.type);break}i++}while(r=e(i));return i}function hS(r,e){if(!r)return 0;let t=0,n=[],i=0;e:do{switch(r.type){case aa:case Fe:break e;case st:case ne:case wt:if(r.type!==t)break e;t=n.pop();break;case W:case ke:case Qe:case Ne:n.push(t),t=ac.get(r.type);break}i++}while(r=e(i));return i}function ln(r){return r&&(r=new Set(r)),function(e,t,n){if(e===null||e.type!==K)return 0;const i=fa(e.value,0);if(r!==null){const s=e.value.indexOf("\\",i),a=s===-1||!Xf(e.value,s)?e.value.substr(i):e.value.substring(i,s);if(r.has(a.toLowerCase())===!1)return 0}return Aa(n,e.value,i)?0:1}}function fS(r,e,t){return r===null||r.type!==ue||Aa(t,r.value,r.value.length-1)?0:1}function Jf(r){return typeof r!="function"&&(r=function(){return 0}),function(e,t,n){return e!==null&&e.type===j&&Number(e.value)===0?1:r(e,t,n)}}function pS(r,e,t){if(r===null)return 0;const n=fa(r.value,0);return n!==r.value.length&&!Xf(r.value,n)||Aa(t,r.value,n)?0:1}function gS(r,e,t){if(r===null||r.type!==j)return 0;let n=kt(r.value,0)===43||kt(r.value,0)===45?1:0;for(;n<r.value.length;n++)if(!xe(kt(r.value,n)))return 0;return Aa(t,r.value,n)?0:1}const mS={"ident-token":oe(z),"function-token":oe(W),"at-keyword-token":oe(pe),"hash-token":oe(ae),"string-token":oe(Rt),"bad-string-token":oe(aa),"url-token":oe(De),"bad-url-token":oe(Fe),"delim-token":oe(Q),"number-token":oe(j),"percentage-token":oe(ue),"dimension-token":oe(K),"whitespace-token":oe(de),"CDO-token":oe(Ci),"CDC-token":oe(je),"colon-token":oe(Ie),"semicolon-token":oe(He),"comma-token":oe(Bt),"[-token":oe(Qe),"]-token":oe(wt),"(-token":oe(ke),")-token":oe(ne),"{-token":oe(Ne),"}-token":oe(st)},bS={string:oe(Rt),ident:oe(z),percentage:lt(fS),zero:Jf(),number:lt(pS),integer:lt(gS),"custom-ident":oS,"custom-property-name":lS,"hex-color":cS,"id-selector":uS,"an-plus-b":eS,urange:iS,"declaration-value":dS,"any-value":hS};function yS(r){const{angle:e,decibel:t,frequency:n,flex:i,length:s,resolution:a,semitones:o,time:l}=r||{};return{dimension:lt(ln(null)),angle:lt(ln(e)),decibel:lt(ln(t)),frequency:lt(ln(n)),flex:lt(ln(i)),length:lt(Jf(ln(s))),resolution:lt(ln(a)),semitones:lt(ln(o)),time:lt(ln(l))}}function vS(r){return V(V(V({},mS),bS),yS(r))}const wS=["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],kS=["deg","grad","rad","turn"],SS=["s","ms"],xS=["hz","khz"],AS=["dpi","dpcm","dppx","x"],ES=["fr"],CS=["db"],TS=["st"],ep=Object.freeze(Object.defineProperty({__proto__:null,angle:kS,decibel:CS,flex:ES,frequency:xS,length:wS,resolution:AS,semitones:TS,time:SS},Symbol.toStringTag,{value:"Module"}));function LS(r,e,t){return Object.assign(ma("SyntaxError",r),{input:e,offset:t,rawMessage:r,message:r+`
  `+e+`
--`+new Array((t||e.length)+1).join("-")+"^"})}const DS=9,IS=10,NS=12,OS=13,MS=32;class qS{constructor(e){this.str=e,this.pos=0}charCodeAt(e){return e<this.str.length?this.str.charCodeAt(e):0}charCode(){return this.charCodeAt(this.pos)}nextCharCode(){return this.charCodeAt(this.pos+1)}nextNonWsCode(e){return this.charCodeAt(this.findWsEnd(e))}findWsEnd(e){for(;e<this.str.length;e++){const t=this.str.charCodeAt(e);if(t!==OS&&t!==IS&&t!==NS&&t!==MS&&t!==DS)break}return e}substringToPos(e){return this.str.substring(this.pos,this.pos=e)}eat(e){this.charCode()!==e&&this.error("Expect `"+String.fromCharCode(e)+"`"),this.pos++}peek(){return this.pos<this.str.length?this.str.charAt(this.pos++):""}error(e){throw new LS(e,this.str,this.pos)}}const _S=9,zS=10,RS=12,BS=13,PS=32,tp=33,oc=35,np=38,Ea=39,rp=40,$S=41,ip=42,lc=43,cc=44,sp=45,uc=60,ap=62,dc=63,FS=64,Ca=91,hc=93,Ta=123,op=124,lp=125,cp=8734,_i=new Uint8Array(128).map((r,e)=>/[a-zA-Z0-9\-]/.test(String.fromCharCode(e))?1:0),up={" ":1,"&&":2,"||":3,"|":4};function La(r){return r.substringToPos(r.findWsEnd(r.pos))}function Pr(r){let e=r.pos;for(;e<r.str.length;e++){const t=r.str.charCodeAt(e);if(t>=128||_i[t]===0)break}return r.pos===e&&r.error("Expect a keyword"),r.substringToPos(e)}function Da(r){let e=r.pos;for(;e<r.str.length;e++){const t=r.str.charCodeAt(e);if(t<48||t>57)break}return r.pos===e&&r.error("Expect a number"),r.substringToPos(e)}function jS(r){const e=r.str.indexOf("'",r.pos+1);return e===-1&&(r.pos=r.str.length,r.error("Expect an apostrophe")),r.substringToPos(e+1)}function dp(r){let e=null,t=null;return r.eat(Ta),e=Da(r),r.charCode()===cc?(r.pos++,r.charCode()!==lp&&(t=Da(r))):t=e,r.eat(lp),{min:Number(e),max:t?Number(t):0}}function HS(r){let e=null,t=!1;switch(r.charCode()){case ip:r.pos++,e={min:0,max:0};break;case lc:r.pos++,e={min:1,max:0};break;case dc:r.pos++,e={min:0,max:1};break;case oc:r.pos++,t=!0,r.charCode()===Ta?e=dp(r):r.charCode()===dc?(r.pos++,e={min:0,max:0}):e={min:1,max:0};break;case Ta:e=dp(r);break;default:return null}return{type:"Multiplier",comma:t,min:e.min,max:e.max,term:null}}function $r(r,e){const t=HS(r);return t!==null?(t.term=e,r.charCode()===oc&&r.charCodeAt(r.pos-1)===lc?$r(r,t):t):e}function fc(r){const e=r.peek();return e===""?null:{type:"Token",value:e}}function US(r){let e;return r.eat(uc),r.eat(Ea),e=Pr(r),r.eat(Ea),r.eat(ap),$r(r,{type:"Property",name:e})}function VS(r){let e=null,t=null,n=1;return r.eat(Ca),r.charCode()===sp&&(r.peek(),n=-1),n==-1&&r.charCode()===cp?r.peek():(e=n*Number(Da(r)),_i[r.charCode()]!==0&&(e+=Pr(r))),La(r),r.eat(cc),La(r),r.charCode()===cp?r.peek():(n=1,r.charCode()===sp&&(r.peek(),n=-1),t=n*Number(Da(r)),_i[r.charCode()]!==0&&(t+=Pr(r))),r.eat(hc),{type:"Range",min:e,max:t}}function YS(r){let e,t=null;return r.eat(uc),e=Pr(r),r.charCode()===rp&&r.nextCharCode()===$S&&(r.pos+=2,e+="()"),r.charCodeAt(r.findWsEnd(r.pos))===Ca&&(La(r),t=VS(r)),r.eat(ap),$r(r,{type:"Type",name:e,opts:t})}function GS(r){const e=Pr(r);return r.charCode()===rp?(r.pos++,{type:"Function",name:e}):$r(r,{type:"Keyword",name:e})}function KS(r,e){function t(i,s){return{type:"Group",terms:i,combinator:s,disallowEmpty:!1,explicit:!1}}let n;for(e=Object.keys(e).sort((i,s)=>up[i]-up[s]);e.length>0;){n=e.shift();let i=0,s=0;for(;i<r.length;i++){const a=r[i];a.type==="Combinator"&&(a.value===n?(s===-1&&(s=i-1),r.splice(i,1),i--):(s!==-1&&i-s>1&&(r.splice(s,i-s,t(r.slice(s,i),n)),i=s+1),s=-1))}s!==-1&&e.length&&r.splice(s,i-s,t(r.slice(s,i),n))}return n}function hp(r){const e=[],t={};let n,i=null,s=r.pos;for(;n=QS(r);)n.type!=="Spaces"&&(n.type==="Combinator"?((i===null||i.type==="Combinator")&&(r.pos=s,r.error("Unexpected combinator")),t[n.value]=!0):i!==null&&i.type!=="Combinator"&&(t[" "]=!0,e.push({type:"Combinator",value:" "})),e.push(n),i=n,s=r.pos);return i!==null&&i.type==="Combinator"&&(r.pos-=s,r.error("Unexpected combinator")),{type:"Group",terms:e,combinator:KS(e,t)||" ",disallowEmpty:!1,explicit:!1}}function WS(r){let e;return r.eat(Ca),e=hp(r),r.eat(hc),e.explicit=!0,r.charCode()===tp&&(r.pos++,e.disallowEmpty=!0),e}function QS(r){let e=r.charCode();if(e<128&&_i[e]===1)return GS(r);switch(e){case hc:break;case Ca:return $r(r,WS(r));case uc:return r.nextCharCode()===Ea?US(r):YS(r);case op:return{type:"Combinator",value:r.substringToPos(r.pos+(r.nextCharCode()===op?2:1))};case np:return r.pos++,r.eat(np),{type:"Combinator",value:"&&"};case cc:return r.pos++,{type:"Comma"};case Ea:return $r(r,{type:"String",value:jS(r)});case PS:case _S:case zS:case BS:case RS:return{type:"Spaces",value:La(r)};case FS:return e=r.nextCharCode(),e<128&&_i[e]===1?(r.pos++,{type:"AtKeyword",name:Pr(r)}):fc(r);case ip:case lc:case dc:case oc:case tp:break;case Ta:if(e=r.nextCharCode(),e<48||e>57)return fc(r);break;default:return fc(r)}}function fp(r){const e=new qS(r),t=hp(e);return e.pos!==r.length&&e.error("Unexpected input"),t.terms.length===1&&t.terms[0].type==="Group"?t.terms[0]:t}const zi=function(){};function pp(r){return typeof r=="function"?r:zi}function ZS(r,e,t){function n(a){switch(i.call(t,a),a.type){case"Group":a.terms.forEach(n);break;case"Multiplier":n(a.term);break;case"Type":case"Property":case"Keyword":case"AtKeyword":case"Function":case"String":case"Token":case"Comma":break;default:throw new Error("Unknown type: "+a.type)}s.call(t,a)}let i=zi,s=zi;if(typeof e=="function"?i=e:e&&(i=pp(e.enter),s=pp(e.leave)),i===zi&&s===zi)throw new Error("Neither `enter` nor `leave` walker handler is set or both aren't a function");n(r)}const XS={decorator(r){const e=[];let t=null;return Re(V({},r),{node(n){const i=t;t=n,r.node.call(this,n),t=i},emit(n,i,s){e.push({type:i,value:n,node:s?null:t})},result(){return e}})}};function JS(r){const e=[];return ga(r,(t,n,i)=>e.push({type:t,value:r.slice(n,i),node:null})),e}function ex(r,e){return typeof r=="string"?JS(r):e.generate(r,XS)}const J={type:"Match"},re={type:"Mismatch"},pc={type:"DisallowEmpty"},tx=40,nx=41;function Oe(r,e,t){return e===J&&t===re||r===J&&e===J&&t===J?r:(r.type==="If"&&r.else===re&&e===J&&(e=r.then,r=r.match),{type:"If",match:r,then:e,else:t})}function gp(r){return r.length>2&&r.charCodeAt(r.length-2)===tx&&r.charCodeAt(r.length-1)===nx}function mp(r){return r.type==="Keyword"||r.type==="AtKeyword"||r.type==="Function"||r.type==="Type"&&gp(r.name)}function gc(r,e,t){switch(r){case" ":{let n=J;for(let i=e.length-1;i>=0;i--){const s=e[i];n=Oe(s,n,re)}return n}case"|":{let n=re,i=null;for(let s=e.length-1;s>=0;s--){let a=e[s];if(mp(a)&&(i===null&&s>0&&mp(e[s-1])&&(i=Object.create(null),n=Oe({type:"Enum",map:i},J,n)),i!==null)){const o=(gp(a.name)?a.name.slice(0,-1):a.name).toLowerCase();if(!(o in i)){i[o]=a;continue}}i=null,n=Oe(a,J,n)}return n}case"&&":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!0};let n=re;for(let i=e.length-1;i>=0;i--){const s=e[i];let a;e.length>1?a=gc(r,e.filter(function(o){return o!==s}),!1):a=J,n=Oe(s,a,n)}return n}case"||":{if(e.length>5)return{type:"MatchOnce",terms:e,all:!1};let n=t?J:re;for(let i=e.length-1;i>=0;i--){const s=e[i];let a;e.length>1?a=gc(r,e.filter(function(o){return o!==s}),!0):a=J,n=Oe(s,a,n)}return n}}}function rx(r){let e=J,t=mc(r.term);if(r.max===0)t=Oe(t,pc,re),e=Oe(t,null,re),e.then=Oe(J,J,e),r.comma&&(e.then.else=Oe({type:"Comma",syntax:r},e,re));else for(let n=r.min||1;n<=r.max;n++)r.comma&&e!==J&&(e=Oe({type:"Comma",syntax:r},e,re)),e=Oe(t,Oe(J,J,e),re);if(r.min===0)e=Oe(J,J,e);else for(let n=0;n<r.min-1;n++)r.comma&&e!==J&&(e=Oe({type:"Comma",syntax:r},e,re)),e=Oe(t,e,re);return e}function mc(r){if(typeof r=="function")return{type:"Generic",fn:r};switch(r.type){case"Group":{let e=gc(r.combinator,r.terms.map(mc),!1);return r.disallowEmpty&&(e=Oe(e,pc,re)),e}case"Multiplier":return rx(r);case"Type":case"Property":return{type:r.type,name:r.name,syntax:r};case"Keyword":return{type:r.type,name:r.name.toLowerCase(),syntax:r};case"AtKeyword":return{type:r.type,name:"@"+r.name.toLowerCase(),syntax:r};case"Function":return{type:r.type,name:r.name.toLowerCase()+"(",syntax:r};case"String":return r.value.length===3?{type:"Token",value:r.value.charAt(1),syntax:r}:{type:r.type,value:r.value.substr(1,r.value.length-2).replace(/\\'/g,"'"),syntax:r};case"Token":return{type:r.type,value:r.value,syntax:r};case"Comma":return{type:r.type,syntax:r};default:throw new Error("Unknown node type:",r.type)}}function bc(r,e){return typeof r=="string"&&(r=fp(r)),{type:"MatchGraph",match:mc(r),syntax:e||null,source:r}}const{hasOwnProperty:bp}=Object.prototype,ix=0,sx=1,yc=2,yp=3,vp="Match",ax="Mismatch",ox="Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)",wp=15e3;function lx(r){let e=null,t=null,n=r;for(;n!==null;)t=n.prev,n.prev=e,e=n,n=t;return e}function vc(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++){const n=e.charCodeAt(t);let i=r.charCodeAt(t);if(i>=65&&i<=90&&(i=i|32),i!==n)return!1}return!0}function cx(r){return r.type!==Q?!1:r.value!=="?"}function kp(r){return r===null?!0:r.type===Bt||r.type===W||r.type===ke||r.type===Qe||r.type===Ne||cx(r)}function Sp(r){return r===null?!0:r.type===ne||r.type===wt||r.type===st||r.type===Q&&r.value==="/"}function ux(r,e,t){function n(){do x++,w=x<r.length?r[x]:null;while(w!==null&&(w.type===de||w.type===Be))}function i(I){const M=x+I;return M<r.length?r[M]:null}function s(I,M){return{nextState:I,matchStack:C,syntaxStack:f,thenStack:h,tokenIndex:x,prev:M}}function a(I){h={nextState:I,matchStack:C,syntaxStack:f,prev:h}}function o(I){g=s(I,g)}function l(){C={type:sx,syntax:e.syntax,token:w,prev:C},n(),m=null,x>E&&(E=x)}function c(){f={syntax:e.syntax,opts:e.syntax.opts||f!==null&&f.opts||null,prev:f},C={type:yc,syntax:e.syntax,token:C.token,prev:C}}function d(){C.type===yc?C=C.prev:C={type:yp,syntax:f.syntax,token:C.token,prev:C},f=f.prev}let f=null,h=null,g=null,m=null,y=0,k=null,w=null,x=-1,E=0,C={type:ix,syntax:null,token:null,prev:null};for(n();k===null&&++y<wp;)switch(e.type){case"Match":if(h===null){if(w!==null&&(x!==r.length-1||w.value!=="\\0"&&w.value!=="\\9")){e=re;break}k=vp;break}if(e=h.nextState,e===pc)if(h.matchStack===C){e=re;break}else e=J;for(;h.syntaxStack!==f;)d();h=h.prev;break;case"Mismatch":if(m!==null&&m!==!1)(g===null||x>g.tokenIndex)&&(g=m,m=!1);else if(g===null){k=ax;break}e=g.nextState,h=g.thenStack,f=g.syntaxStack,C=g.matchStack,x=g.tokenIndex,w=x<r.length?r[x]:null,g=g.prev;break;case"MatchGraph":e=e.match;break;case"If":e.else!==re&&o(e.else),e.then!==J&&a(e.then),e=e.match;break;case"MatchOnce":e={type:"MatchOnceBuffer",syntax:e,index:0,mask:0};break;case"MatchOnceBuffer":{const O=e.syntax.terms;if(e.index===O.length){if(e.mask===0||e.syntax.all){e=re;break}e=J;break}if(e.mask===(1<<O.length)-1){e=J;break}for(;e.index<O.length;e.index++){const S=1<<e.index;if(!(e.mask&S)){o(e),a({type:"AddMatchOnce",syntax:e.syntax,mask:e.mask|S}),e=O[e.index++];break}}break}case"AddMatchOnce":e={type:"MatchOnceBuffer",syntax:e.syntax,index:0,mask:e.mask};break;case"Enum":if(w!==null){let O=w.value.toLowerCase();if(O.indexOf("\\")!==-1&&(O=O.replace(/\\[09].*$/,"")),bp.call(e.map,O)){e=e.map[O];break}}e=re;break;case"Generic":{const O=f!==null?f.opts:null,S=x+Math.floor(e.fn(w,i,O));if(!isNaN(S)&&S>x){for(;x<S;)l();e=J}else e=re;break}case"Type":case"Property":{const O=e.type==="Type"?"types":"properties",S=bp.call(t,O)?t[O][e.name]:null;if(!S||!S.match)throw new Error("Bad syntax reference: "+(e.type==="Type"?"<"+e.name+">":"<'"+e.name+"'>"));if(m!==!1&&w!==null&&e.type==="Type"&&(e.name==="custom-ident"&&w.type===z||e.name==="length"&&w.value==="0")){m===null&&(m=s(e,g)),e=re;break}c(),e=S.match;break}case"Keyword":{const O=e.name;if(w!==null){let S=w.value;if(S.indexOf("\\")!==-1&&(S=S.replace(/\\[09].*$/,"")),vc(S,O)){l(),e=J;break}}e=re;break}case"AtKeyword":case"Function":if(w!==null&&vc(w.value,e.name)){l(),e=J;break}e=re;break;case"Token":if(w!==null&&w.value===e.value){l(),e=J;break}e=re;break;case"Comma":w!==null&&w.type===Bt?kp(C.token)?e=re:(l(),e=Sp(w)?re:J):e=kp(C.token)||Sp(w)?J:re;break;case"String":let I="",M=x;for(;M<r.length&&I.length<e.value.length;M++)I+=r[M].value;if(vc(I,e.value)){for(;x<M;)l();e=J}else e=re;break;default:throw new Error("Unknown node type: "+e.type)}switch(k){case null:console.warn("[csstree-match] BREAK after "+wp+" iterations"),k=ox,C=null;break;case vp:for(;f!==null;)d();break;default:C=null}return{tokens:r,reason:k,iterations:y,match:C,longestMatch:E}}function xp(r,e,t){const n=ux(r,e,t||{});if(n.match===null)return n;let i=n.match,s=n.match={syntax:e.syntax||null,match:[]};const a=[s];for(i=lx(i).prev;i!==null;){switch(i.type){case yc:s.match.push(s={syntax:i.syntax,match:[]}),a.push(s);break;case yp:a.pop(),s=a[a.length-1];break;default:s.match.push({syntax:i.syntax||null,token:i.token.value,node:i.token.node})}i=i.prev}return n}function Ap(r){function e(i){return i===null?!1:i.type==="Type"||i.type==="Property"||i.type==="Keyword"}function t(i){if(Array.isArray(i.match)){for(let s=0;s<i.match.length;s++)if(t(i.match[s]))return e(i.syntax)&&n.unshift(i.syntax),!0}else if(i.node===r)return n=e(i.syntax)?[i.syntax]:[],!0;return!1}let n=null;return this.matched!==null&&t(this.matched),n}function dx(r,e){return wc(this,r,t=>t.type==="Type"&&t.name===e)}function hx(r,e){return wc(this,r,t=>t.type==="Property"&&t.name===e)}function fx(r){return wc(this,r,e=>e.type==="Keyword")}function wc(r,e,t){const n=Ap.call(r,e);return n===null?!1:n.some(t)}const px=Object.freeze(Object.defineProperty({__proto__:null,getTrace:Ap,isKeyword:fx,isProperty:hx,isType:dx},Symbol.toStringTag,{value:"Module"}));function Ep(r){return"node"in r?r.node:Ep(r.match[0])}function Cp(r){return"node"in r?r.node:Cp(r.match[r.match.length-1])}function Tp(r,e,t,n,i){function s(o){if(o.syntax!==null&&o.syntax.type===n&&o.syntax.name===i){const l=Ep(o),c=Cp(o);r.syntax.walk(e,function(d,f,h){if(d===l){const g=new ge;do{if(g.appendData(f.data),f.data===c)break;f=f.next}while(f!==null);a.push({parent:h,nodes:g})}})}Array.isArray(o.match)&&o.match.forEach(s)}const a=[];return t.matched!==null&&s(t.matched),a}const{hasOwnProperty:Ri}=Object.prototype;function kc(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r&&r>=0}function Lp(r){return!!r&&kc(r.offset)&&kc(r.line)&&kc(r.column)}function gx(r,e){return function(t,n){if(!t||t.constructor!==Object)return n(t,"Type of node should be an Object");for(let i in t){let s=!0;if(Ri.call(t,i)!==!1){if(i==="type")t.type!==r&&n(t,"Wrong node type `"+t.type+"`, expected `"+r+"`");else if(i==="loc"){if(t.loc===null)continue;if(t.loc&&t.loc.constructor===Object)if(typeof t.loc.source!="string")i+=".source";else if(!Lp(t.loc.start))i+=".start";else if(!Lp(t.loc.end))i+=".end";else continue;s=!1}else if(e.hasOwnProperty(i)){s=!1;for(let a=0;!s&&a<e[i].length;a++){const o=e[i][a];switch(o){case String:s=typeof t[i]=="string";break;case Boolean:s=typeof t[i]=="boolean";break;case null:s=t[i]===null;break;default:typeof o=="string"?s=t[i]&&t[i].type===o:Array.isArray(o)&&(s=t[i]instanceof ge)}}}else n(t,"Unknown field `"+i+"` for "+r+" node type");s||n(t,"Bad value for `"+r+"."+i+"`")}}for(const i in e)Ri.call(e,i)&&Ri.call(t,i)===!1&&n(t,"Field `"+r+"."+i+"` is missed")}}function mx(r,e){const t=e.structure,n={type:String,loc:!0},i={type:'"'+r+'"'};for(const s in t){if(Ri.call(t,s)===!1)continue;const a=[],o=n[s]=Array.isArray(t[s])?t[s].slice():[t[s]];for(let l=0;l<o.length;l++){const c=o[l];if(c===String||c===Boolean)a.push(c.name);else if(c===null)a.push("null");else if(typeof c=="string")a.push("<"+c+">");else if(Array.isArray(c))a.push("List");else throw new Error("Wrong value `"+c+"` in `"+r+"."+s+"` structure definition")}i[s]=a.join(" | ")}return{docs:i,check:gx(r,n)}}function bx(r){const e={};if(r.node){for(const t in r.node)if(Ri.call(r.node,t)){const n=r.node[t];if(n.structure)e[t]=mx(t,n);else throw new Error("Missed `structure` field in `"+t+"` node type definition")}}return e}const yx=bc(Gf.join(" | "));function Sc(r,e,t){const n={};for(const i in r)r[i].syntax&&(n[i]=t?r[i].syntax:Jl(r[i].syntax,{compact:e}));return n}function vx(r,e,t){const n={};for(const[i,s]of Object.entries(r))n[i]={prelude:s.prelude&&(t?s.prelude.syntax:Jl(s.prelude.syntax,{compact:e})),descriptors:s.descriptors&&Sc(s.descriptors,e,t)};return n}function wx(r){for(let e=0;e<r.length;e++)if(r[e].value.toLowerCase()==="var(")return!0;return!1}function St(r,e,t){return V({matched:r,iterations:t,error:e},px)}function Fr(r,e,t,n){const i=ex(t,r.syntax);let s;return wx(i)?St(null,new Error("Matching for a tree with var() is not supported")):(n&&(s=xp(i,r.cssWideKeywordsSyntax,r)),(!n||!s.match)&&(s=xp(i,e.match,r),!s.match)?St(null,new Qk(s.reason,e.syntax,t,s),s.iterations):St(s.match,null,s.iterations))}class Dp{constructor(e,t,n){if(this.cssWideKeywordsSyntax=yx,this.syntax=t,this.generic=!1,this.units=V({},ep),this.atrules=Object.create(null),this.properties=Object.create(null),this.types=Object.create(null),this.structure=n||bx(e),e){if(e.units)for(const i of Object.keys(ep))Array.isArray(e.units[i])&&(this.units[i]=e.units[i]);if(e.types)for(const i in e.types)this.addType_(i,e.types[i]);if(e.generic){this.generic=!0;for(const[i,s]of Object.entries(vS(this.units)))this.addType_(i,s)}if(e.atrules)for(const i in e.atrules)this.addAtrule_(i,e.atrules[i]);if(e.properties)for(const i in e.properties)this.addProperty_(i,e.properties[i])}}checkStructure(e){function t(s,a){i.push({node:s,message:a})}const n=this.structure,i=[];return this.syntax.walk(e,function(s){n.hasOwnProperty(s.type)?n[s.type].check(s,t):t(s,"Unknown node type `"+s.type+"`")}),i.length?i:!1}createDescriptor(e,t,n,i=null){const s={type:t,name:n},a={type:t,name:n,parent:i,serializable:typeof e=="string"||e&&typeof e.type=="string",syntax:null,match:null};return typeof e=="function"?a.match=bc(e,s):(typeof e=="string"?Object.defineProperty(a,"syntax",{get(){return Object.defineProperty(a,"syntax",{value:fp(e)}),a.syntax}}):a.syntax=e,Object.defineProperty(a,"match",{get(){return Object.defineProperty(a,"match",{value:bc(a.syntax,s)}),a.match}})),a}addAtrule_(e,t){t&&(this.atrules[e]={type:"Atrule",name:e,prelude:t.prelude?this.createDescriptor(t.prelude,"AtrulePrelude",e):null,descriptors:t.descriptors?Object.keys(t.descriptors).reduce((n,i)=>(n[i]=this.createDescriptor(t.descriptors[i],"AtruleDescriptor",i,e),n),Object.create(null)):null})}addProperty_(e,t){t&&(this.properties[e]=this.createDescriptor(t,"Property",e))}addType_(e,t){t&&(this.types[e]=this.createDescriptor(t,"Type",e))}checkAtruleName(e){if(!this.getAtrule(e))return new Ni("Unknown at-rule","@"+e)}checkAtrulePrelude(e,t){const n=this.checkAtruleName(e);if(n)return n;const i=this.getAtrule(e);if(!i.prelude&&t)return new SyntaxError("At-rule `@"+e+"` should not contain a prelude");if(i.prelude&&!t&&!Fr(this,i.prelude,"",!1).matched)return new SyntaxError("At-rule `@"+e+"` should contain a prelude")}checkAtruleDescriptorName(e,t){const n=this.checkAtruleName(e);if(n)return n;const i=this.getAtrule(e),s=ec(t);if(!i.descriptors)return new SyntaxError("At-rule `@"+e+"` has no known descriptors");if(!i.descriptors[s.name]&&!i.descriptors[s.basename])return new Ni("Unknown at-rule descriptor",t)}checkPropertyName(e){if(!this.getProperty(e))return new Ni("Unknown property",e)}matchAtrulePrelude(e,t){const n=this.checkAtrulePrelude(e,t);if(n)return St(null,n);const i=this.getAtrule(e);return i.prelude?Fr(this,i.prelude,t||"",!1):St(null,null)}matchAtruleDescriptor(e,t,n){const i=this.checkAtruleDescriptorName(e,t);if(i)return St(null,i);const s=this.getAtrule(e),a=ec(t);return Fr(this,s.descriptors[a.name]||s.descriptors[a.basename],n,!1)}matchDeclaration(e){return e.type!=="Declaration"?St(null,new Error("Not a Declaration node")):this.matchProperty(e.property,e.value)}matchProperty(e,t){if(Vf(e).custom)return St(null,new Error("Lexer matching doesn't applicable for custom properties"));const n=this.checkPropertyName(e);return n?St(null,n):Fr(this,this.getProperty(e),t,!0)}matchType(e,t){const n=this.getType(e);return n?Fr(this,n,t,!1):St(null,new Ni("Unknown type",e))}match(e,t){return typeof e!="string"&&(!e||!e.type)?St(null,new Ni("Bad syntax")):((typeof e=="string"||!e.match)&&(e=this.createDescriptor(e,"Type","anonymous")),Fr(this,e,t,!1))}findValueFragments(e,t,n,i){return Tp(this,t,this.matchProperty(e,t),n,i)}findDeclarationValueFragments(e,t,n){return Tp(this,e.value,this.matchDeclaration(e),t,n)}findAllFragments(e,t,n){const i=[];return this.syntax.walk(e,{visit:"Declaration",enter:s=>{i.push.apply(i,this.findDeclarationValueFragments(s,t,n))}}),i}getAtrule(e,t=!0){const n=ec(e);return(n.vendor&&t?this.atrules[n.name]||this.atrules[n.basename]:this.atrules[n.name])||null}getAtrulePrelude(e,t=!0){const n=this.getAtrule(e,t);return n&&n.prelude||null}getAtruleDescriptor(e,t){return this.atrules.hasOwnProperty(e)&&this.atrules.declarators&&this.atrules[e].declarators[t]||null}getProperty(e,t=!0){const n=Vf(e);return(n.vendor&&t?this.properties[n.name]||this.properties[n.basename]:this.properties[n.name])||null}getType(e){return hasOwnProperty.call(this.types,e)?this.types[e]:null}validate(){function e(i,s,a,o){if(a.has(s))return a.get(s);a.set(s,!1),o.syntax!==null&&ZS(o.syntax,function(l){if(l.type!=="Type"&&l.type!=="Property")return;const c=l.type==="Type"?i.types:i.properties,d=l.type==="Type"?t:n;(!hasOwnProperty.call(c,l.name)||e(i,l.name,d,c[l.name]))&&a.set(s,!0)},this)}let t=new Map,n=new Map;for(const i in this.types)e(this,i,t,this.types[i]);for(const i in this.properties)e(this,i,n,this.properties[i]);return t=[...t.keys()].filter(i=>t.get(i)),n=[...n.keys()].filter(i=>n.get(i)),t.length||n.length?{types:t,properties:n}:null}dump(e,t){return{generic:this.generic,units:this.units,types:Sc(this.types,!t,e),properties:Sc(this.properties,!t,e),atrules:vx(this.atrules,!t,e)}}toString(){return JSON.stringify(this.dump())}}function xc(r,e){return typeof e=="string"&&/^\s*\|/.test(e)?typeof r=="string"?r+e:e.replace(/^\s*\|\s*/,""):e||null}function Ip(r,e){const t=Object.create(null);for(const[n,i]of Object.entries(r))if(i){t[n]={};for(const s of Object.keys(i))e.includes(s)&&(t[n][s]=i[s])}return t}function Ac(r,e){const t=V({},r);for(const[n,i]of Object.entries(e))switch(n){case"generic":t[n]=!!i;break;case"units":t[n]=V({},r[n]);for(const[s,a]of Object.entries(i))t[n][s]=Array.isArray(a)?a:[];break;case"atrules":t[n]=V({},r[n]);for(const[s,a]of Object.entries(i)){const o=t[n][s]||{},l=t[n][s]={prelude:o.prelude||null,descriptors:V({},o.descriptors)};if(a){l.prelude=a.prelude?xc(l.prelude,a.prelude):l.prelude||null;for(const[c,d]of Object.entries(a.descriptors||{}))l.descriptors[c]=d?xc(l.descriptors[c],d):null;Object.keys(l.descriptors).length||(l.descriptors=null)}}break;case"types":case"properties":t[n]=V({},r[n]);for(const[s,a]of Object.entries(i))t[n][s]=xc(t[n][s],a);break;case"scope":t[n]=V({},r[n]);for(const[s,a]of Object.entries(i))t[n][s]=V(V({},t[n][s]),a);break;case"parseContext":t[n]=V(V({},r[n]),i);break;case"atrule":case"pseudo":t[n]=V(V({},r[n]),Ip(i,["parse"]));break;case"node":t[n]=V(V({},r[n]),Ip(i,["name","structure","parse","generate","walkContext"]));break}return t}function Np(r){const e=Ck(r),t=Uk(r),n=$k(r),{fromPlainObject:i,toPlainObject:s}=Fk(t),a={lexer:null,createLexer:o=>new Dp(o,a,a.lexer.structure),tokenize:ga,parse:e,generate:n,walk:t,find:t.find,findLast:t.findLast,findAll:t.findAll,fromPlainObject:i,toPlainObject:s,fork(o){const l=Ac({},r);return Np(typeof o=="function"?o(l,Object.assign):Ac(l,o))}};return a.lexer=new Dp({generic:!0,units:r.units,types:r.types,atrules:r.atrules,properties:r.properties,node:r.node},a),a}const kx=r=>Np(Ac({},r)),Sx={generic:!0,units:{angle:["deg","grad","rad","turn"],decibel:["db"],flex:["fr"],frequency:["hz","khz"],length:["cm","mm","q","in","pt","pc","px","em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh","vw","svw","lvw","dvw","vh","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","cqw","cqh","cqi","cqb","cqmin","cqmax"],resolution:["dpi","dpcm","dppx","x"],semitones:["st"],time:["s","ms"]},types:{"abs()":"abs( <calc-sum> )","absolute-size":"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large","acos()":"acos( <calc-sum> )","alpha-value":"<number>|<percentage>","angle-percentage":"<angle>|<percentage>","angular-color-hint":"<angle-percentage>","angular-color-stop":"<color>&&<color-stop-angle>?","angular-color-stop-list":"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>","animateable-feature":"scroll-position|contents|<custom-ident>","asin()":"asin( <calc-sum> )","atan()":"atan( <calc-sum> )","atan2()":"atan2( <calc-sum> , <calc-sum> )",attachment:"scroll|fixed|local","attr()":"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )","attr-matcher":"['~'|'|'|'^'|'$'|'*']? '='","attr-modifier":"i|s","attribute-selector":"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'","auto-repeat":"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )","auto-track-list":"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?",axis:"block|inline|vertical|horizontal","baseline-position":"[first|last]? baseline","basic-shape":"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>","bg-image":"none|<image>","bg-layer":"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","bg-position":"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]","bg-size":"[<length-percentage>|auto]{1,2}|cover|contain","blur()":"blur( <length> )","blend-mode":"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity",box:"border-box|padding-box|content-box","brightness()":"brightness( <number-percentage> )","calc()":"calc( <calc-sum> )","calc-sum":"<calc-product> [['+'|'-'] <calc-product>]*","calc-product":"<calc-value> ['*' <calc-value>|'/' <number>]*","calc-value":"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )","calc-constant":"e|pi|infinity|-infinity|NaN","cf-final-image":"<image>|<color>","cf-mixing-image":"<percentage>?&&<image>","circle()":"circle( [<shape-radius>]? [at <position>]? )","clamp()":"clamp( <calc-sum>#{3} )","class-selector":"'.' <ident-token>","clip-source":"<url>",color:"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<hex-color>|<named-color>|currentcolor|<deprecated-system-color>","color-stop":"<color-stop-length>|<color-stop-angle>","color-stop-angle":"<angle-percentage>{1,2}","color-stop-length":"<length-percentage>{1,2}","color-stop-list":"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>",combinator:"'>'|'+'|'~'|['||']","common-lig-values":"[common-ligatures|no-common-ligatures]","compat-auto":"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button","composite-style":"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor","compositing-operator":"add|subtract|intersect|exclude","compound-selector":"[<type-selector>? <subclass-selector>* [<pseudo-element-selector> <pseudo-class-selector>*]*]!","compound-selector-list":"<compound-selector>#","complex-selector":"<compound-selector> [<combinator>? <compound-selector>]*","complex-selector-list":"<complex-selector>#","conic-gradient()":"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","contextual-alt-values":"[contextual|no-contextual]","content-distribution":"space-between|space-around|space-evenly|stretch","content-list":"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+","content-position":"center|start|end|flex-start|flex-end","content-replacement":"<image>","contrast()":"contrast( [<number-percentage>] )","cos()":"cos( <calc-sum> )",counter:"<counter()>|<counters()>","counter()":"counter( <counter-name> , <counter-style>? )","counter-name":"<custom-ident>","counter-style":"<counter-style-name>|symbols( )","counter-style-name":"<custom-ident>","counters()":"counters( <counter-name> , <string> , <counter-style>? )","cross-fade()":"cross-fade( <cf-mixing-image> , <cf-final-image>? )","cubic-bezier-timing-function":"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )","deprecated-system-color":"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText","discretionary-lig-values":"[discretionary-ligatures|no-discretionary-ligatures]","display-box":"contents|none","display-inside":"flow|flow-root|table|flex|grid|ruby","display-internal":"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container","display-legacy":"inline-block|inline-list-item|inline-table|inline-flex|inline-grid","display-listitem":"<display-outside>?&&[flow|flow-root]?&&list-item","display-outside":"block|inline|run-in","drop-shadow()":"drop-shadow( <length>{2,3} <color>? )","east-asian-variant-values":"[jis78|jis83|jis90|jis04|simplified|traditional]","east-asian-width-values":"[full-width|proportional-width]","element()":"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )","ellipse()":"ellipse( [<shape-radius>{2}]? [at <position>]? )","ending-shape":"circle|ellipse","env()":"env( <custom-ident> , <declaration-value>? )","exp()":"exp( <calc-sum> )","explicit-track-list":"[<line-names>? <track-size>]+ <line-names>?","family-name":"<string>|<custom-ident>+","feature-tag-value":"<string> [<integer>|on|off]?","feature-type":"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation","feature-value-block":"<feature-type> '{' <feature-value-declaration-list> '}'","feature-value-block-list":"<feature-value-block>+","feature-value-declaration":"<custom-ident> : <integer>+ ;","feature-value-declaration-list":"<feature-value-declaration>","feature-value-name":"<custom-ident>","fill-rule":"nonzero|evenodd","filter-function":"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>","filter-function-list":"[<filter-function>|<url>]+","final-bg-layer":"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>","fixed-breadth":"<length-percentage>","fixed-repeat":"repeat( [<integer [1,∞]>] , [<line-names>? <fixed-size>]+ <line-names>? )","fixed-size":"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )","font-stretch-absolute":"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>","font-variant-css21":"[normal|small-caps]","font-weight-absolute":"normal|bold|<number [1,1000]>","frequency-percentage":"<frequency>|<percentage>","general-enclosed":"[<function-token> <any-value> )]|( <ident> <any-value> )","generic-family":"serif|sans-serif|cursive|fantasy|monospace|-apple-system","generic-name":"serif|sans-serif|cursive|fantasy|monospace","geometry-box":"<shape-box>|fill-box|stroke-box|view-box",gradient:"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>","grayscale()":"grayscale( <number-percentage> )","grid-line":"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]","historical-lig-values":"[historical-ligatures|no-historical-ligatures]","hsl()":"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )","hsla()":"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )",hue:"<number>|<angle>","hue-rotate()":"hue-rotate( <angle> )","hwb()":"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )","hypot()":"hypot( <calc-sum># )",image:"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>","image()":"image( <image-tags>? [<image-src>? , <color>?]! )","image-set()":"image-set( <image-set-option># )","image-set-option":"[<image>|<string>] [<resolution>||type( <string> )]","image-src":"<url>|<string>","image-tags":"ltr|rtl","inflexible-breadth":"<length-percentage>|min-content|max-content|auto","inset()":"inset( <length-percentage>{1,4} [round <'border-radius'>]? )","invert()":"invert( <number-percentage> )","keyframes-name":"<custom-ident>|<string>","keyframe-block":"<keyframe-selector># { <declaration-list> }","keyframe-block-list":"<keyframe-block>+","keyframe-selector":"from|to|<percentage>","lab()":"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )","layer()":"layer( <layer-name> )","layer-name":"<ident> ['.' <ident>]*","lch()":"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )","leader()":"leader( <leader-type> )","leader-type":"dotted|solid|space|<string>","length-percentage":"<length>|<percentage>","line-names":"'[' <custom-ident>* ']'","line-name-list":"[<line-names>|<name-repeat>]+","line-style":"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset","line-width":"<length>|thin|medium|thick","linear-color-hint":"<length-percentage>","linear-color-stop":"<color> <color-stop-length>?","linear-gradient()":"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","log()":"log( <calc-sum> , <calc-sum>? )","mask-layer":"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>","mask-position":"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?","mask-reference":"none|<image>|<mask-source>","mask-source":"<url>","masking-mode":"alpha|luminance|match-source","matrix()":"matrix( <number>#{6} )","matrix3d()":"matrix3d( <number>#{16} )","max()":"max( <calc-sum># )","media-and":"<media-in-parens> [and <media-in-parens>]+","media-condition":"<media-not>|<media-and>|<media-or>|<media-in-parens>","media-condition-without-or":"<media-not>|<media-and>|<media-in-parens>","media-feature":"( [<mf-plain>|<mf-boolean>|<mf-range>] )","media-in-parens":"( <media-condition> )|<media-feature>|<general-enclosed>","media-not":"not <media-in-parens>","media-or":"<media-in-parens> [or <media-in-parens>]+","media-query":"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?","media-query-list":"<media-query>#","media-type":"<ident>","mf-boolean":"<mf-name>","mf-name":"<ident>","mf-plain":"<mf-name> : <mf-value>","mf-range":"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>","mf-value":"<number>|<dimension>|<ident>|<ratio>","min()":"min( <calc-sum># )","minmax()":"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )","mod()":"mod( <calc-sum> , <calc-sum> )","name-repeat":"repeat( [<integer [1,∞]>|auto-fill] , <line-names>+ )","named-color":"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen|<-non-standard-color>","namespace-prefix":"<ident>","ns-prefix":"[<ident-token>|'*']? '|'","number-percentage":"<number>|<percentage>","numeric-figure-values":"[lining-nums|oldstyle-nums]","numeric-fraction-values":"[diagonal-fractions|stacked-fractions]","numeric-spacing-values":"[proportional-nums|tabular-nums]",nth:"<an-plus-b>|even|odd","opacity()":"opacity( [<number-percentage>] )","overflow-position":"unsafe|safe","outline-radius":"<length>|<percentage>","page-body":"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>","page-margin-box":"<page-margin-box-type> '{' <declaration-list> '}'","page-margin-box-type":"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom","page-selector-list":"[<page-selector>#]?","page-selector":"<pseudo-page>+|<ident> <pseudo-page>*","page-size":"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger","path()":"path( [<fill-rule> ,]? <string> )","paint()":"paint( <ident> , <declaration-value>? )","perspective()":"perspective( [<length [0,∞]>|none] )","polygon()":"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )",position:"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]","pow()":"pow( <calc-sum> , <calc-sum> )","pseudo-class-selector":"':' <ident-token>|':' <function-token> <any-value> ')'","pseudo-element-selector":"':' <pseudo-class-selector>","pseudo-page":": [left|right|first|blank]",quote:"open-quote|close-quote|no-open-quote|no-close-quote","radial-gradient()":"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )",ratio:"<number [0,∞]> [/ <number [0,∞]>]?","relative-selector":"<combinator>? <complex-selector>","relative-selector-list":"<relative-selector>#","relative-size":"larger|smaller","rem()":"rem( <calc-sum> , <calc-sum> )","repeat-style":"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}","repeating-conic-gradient()":"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )","repeating-linear-gradient()":"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )","repeating-radial-gradient()":"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )","reversed-counter-name":"reversed( <counter-name> )","rgb()":"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )","rgba()":"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )","rotate()":"rotate( [<angle>|<zero>] )","rotate3d()":"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )","rotateX()":"rotateX( [<angle>|<zero>] )","rotateY()":"rotateY( [<angle>|<zero>] )","rotateZ()":"rotateZ( [<angle>|<zero>] )","round()":"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )","rounding-strategy":"nearest|up|down|to-zero","saturate()":"saturate( <number-percentage> )","scale()":"scale( [<number>|<percentage>]#{1,2} )","scale3d()":"scale3d( [<number>|<percentage>]#{3} )","scaleX()":"scaleX( [<number>|<percentage>] )","scaleY()":"scaleY( [<number>|<percentage>] )","scaleZ()":"scaleZ( [<number>|<percentage>] )",scroller:"root|nearest","self-position":"center|start|end|self-start|self-end|flex-start|flex-end","shape-radius":"<length-percentage>|closest-side|farthest-side","sign()":"sign( <calc-sum> )","skew()":"skew( [<angle>|<zero>] , [<angle>|<zero>]? )","skewX()":"skewX( [<angle>|<zero>] )","skewY()":"skewY( [<angle>|<zero>] )","sepia()":"sepia( <number-percentage> )",shadow:"inset?&&<length>{2,4}&&<color>?","shadow-t":"[<length>{2,3}&&<color>?]",shape:"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )","shape-box":"<box>|margin-box","side-or-corner":"[left|right]||[top|bottom]","sin()":"sin( <calc-sum> )","single-animation":"<time>||<easing-function>||<time>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]","single-animation-direction":"normal|reverse|alternate|alternate-reverse","single-animation-fill-mode":"none|forwards|backwards|both","single-animation-iteration-count":"infinite|<number>","single-animation-play-state":"running|paused","single-animation-timeline":"auto|none|<timeline-name>|scroll( <axis>? <scroller>? )","single-transition":"[none|<single-transition-property>]||<time>||<easing-function>||<time>","single-transition-property":"all|<custom-ident>",size:"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}","sqrt()":"sqrt( <calc-sum> )","step-position":"jump-start|jump-end|jump-none|jump-both|start|end","step-timing-function":"step-start|step-end|steps( <integer> [, <step-position>]? )","subclass-selector":"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>","supports-condition":"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*","supports-in-parens":"( <supports-condition> )|<supports-feature>|<general-enclosed>","supports-feature":"<supports-decl>|<supports-selector-fn>","supports-decl":"( <declaration> )","supports-selector-fn":"selector( <complex-selector> )",symbol:"<string>|<image>|<custom-ident>","tan()":"tan( <calc-sum> )",target:"<target-counter()>|<target-counters()>|<target-text()>","target-counter()":"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )","target-counters()":"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )","target-text()":"target-text( [<string>|<url>] , [content|before|after|first-letter]? )","time-percentage":"<time>|<percentage>","timeline-name":"<custom-ident>|<string>","easing-function":"linear|<cubic-bezier-timing-function>|<step-timing-function>","track-breadth":"<length-percentage>|<flex>|min-content|max-content|auto","track-list":"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?","track-repeat":"repeat( [<integer [1,∞]>] , [<line-names>? <track-size>]+ <line-names>? )","track-size":"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )","transform-function":"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>","transform-list":"<transform-function>+","translate()":"translate( <length-percentage> , <length-percentage>? )","translate3d()":"translate3d( <length-percentage> , <length-percentage> , <length> )","translateX()":"translateX( <length-percentage> )","translateY()":"translateY( <length-percentage> )","translateZ()":"translateZ( <length> )","type-or-unit":"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%","type-selector":"<wq-name>|<ns-prefix>? '*'","var()":"var( <custom-property-name> , <declaration-value>? )","viewport-length":"auto|<length-percentage>","visual-box":"content-box|padding-box|border-box","wq-name":"<ns-prefix>? <ident-token>","-legacy-gradient":"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>","-legacy-linear-gradient":"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-repeating-linear-gradient":"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )","-legacy-linear-gradient-arguments":"[<angle>|<side-or-corner>]? , <color-stop-list>","-legacy-radial-gradient":"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-repeating-radial-gradient":"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )","-legacy-radial-gradient-arguments":"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>","-legacy-radial-gradient-size":"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover","-legacy-radial-gradient-shape":"circle|ellipse","-non-standard-font":"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body","-non-standard-color":"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text","-non-standard-image-rendering":"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast","-non-standard-overflow":"-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable","-non-standard-width":"fill-available|min-intrinsic|intrinsic|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content|-webkit-min-content|-webkit-max-content","-webkit-gradient()":"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )","-webkit-gradient-color-stop":"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )","-webkit-gradient-point":"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]","-webkit-gradient-radius":"<length>|<percentage>","-webkit-gradient-type":"linear|radial","-webkit-mask-box-repeat":"repeat|stretch|round","-webkit-mask-clip-style":"border|border-box|padding|padding-box|content|content-box|text","-ms-filter-function-list":"<-ms-filter-function>+","-ms-filter-function":"<-ms-filter-function-progid>|<-ms-filter-function-legacy>","-ms-filter-function-progid":"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]","-ms-filter-function-legacy":"<ident-token>|<function-token> <any-value>? )","-ms-filter":"<string>",age:"child|young|old","attr-name":"<wq-name>","attr-fallback":"<any-value>","bg-clip":"<box>|border|text",bottom:"<length>|auto","generic-voice":"[<age>? <gender> <integer>?]",gender:"male|female|neutral",left:"<length>|auto","mask-image":"<mask-reference>#",paint:"none|<color>|<url> [none|<color>]?|context-fill|context-stroke",right:"<length>|auto","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","single-animation-composition":"replace|add|accumulate","svg-length":"<percentage>|<length>|<number>","svg-writing-mode":"lr-tb|rl-tb|tb-rl|lr|rl|tb",top:"<length>|auto",x:"<number>",y:"<number>",declaration:"<ident-token> : <declaration-value>? ['!' important]?","declaration-list":"[<declaration>? ';']* <declaration>?",url:"url( <string> <url-modifier>* )|<url-token>","url-modifier":"<ident>|<function-token> <any-value> )","number-zero-one":"<number [0,1]>","number-one-or-greater":"<number [1,∞]>","-non-standard-display":"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box"},properties:{"--*":"<declaration-value>","-ms-accelerator":"false|true","-ms-block-progression":"tb|rl|bt|lr","-ms-content-zoom-chaining":"none|chained","-ms-content-zooming":"none|zoom","-ms-content-zoom-limit":"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>","-ms-content-zoom-limit-max":"<percentage>","-ms-content-zoom-limit-min":"<percentage>","-ms-content-zoom-snap":"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>","-ms-content-zoom-snap-points":"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )","-ms-content-zoom-snap-type":"none|proximity|mandatory","-ms-filter":"<string>","-ms-flow-from":"[none|<custom-ident>]#","-ms-flow-into":"[none|<custom-ident>]#","-ms-grid-columns":"none|<track-list>|<auto-track-list>","-ms-grid-rows":"none|<track-list>|<auto-track-list>","-ms-high-contrast-adjust":"auto|none","-ms-hyphenate-limit-chars":"auto|<integer>{1,3}","-ms-hyphenate-limit-lines":"no-limit|<integer>","-ms-hyphenate-limit-zone":"<percentage>|<length>","-ms-ime-align":"auto|after","-ms-overflow-style":"auto|none|scrollbar|-ms-autohiding-scrollbar","-ms-scrollbar-3dlight-color":"<color>","-ms-scrollbar-arrow-color":"<color>","-ms-scrollbar-base-color":"<color>","-ms-scrollbar-darkshadow-color":"<color>","-ms-scrollbar-face-color":"<color>","-ms-scrollbar-highlight-color":"<color>","-ms-scrollbar-shadow-color":"<color>","-ms-scrollbar-track-color":"<color>","-ms-scroll-chaining":"chained|none","-ms-scroll-limit":"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>","-ms-scroll-limit-x-max":"auto|<length>","-ms-scroll-limit-x-min":"<length>","-ms-scroll-limit-y-max":"auto|<length>","-ms-scroll-limit-y-min":"<length>","-ms-scroll-rails":"none|railed","-ms-scroll-snap-points-x":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-points-y":"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )","-ms-scroll-snap-type":"none|proximity|mandatory","-ms-scroll-snap-x":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>","-ms-scroll-snap-y":"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>","-ms-scroll-translation":"none|vertical-to-horizontal","-ms-text-autospace":"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space","-ms-touch-select":"grippers|none","-ms-user-select":"none|element|text","-ms-wrap-flow":"auto|both|start|end|maximum|clear","-ms-wrap-margin":"<length>","-ms-wrap-through":"wrap|none","-moz-appearance":"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized","-moz-binding":"<url>|none","-moz-border-bottom-colors":"<color>+|none","-moz-border-left-colors":"<color>+|none","-moz-border-right-colors":"<color>+|none","-moz-border-top-colors":"<color>+|none","-moz-context-properties":"none|[fill|fill-opacity|stroke|stroke-opacity]#","-moz-float-edge":"border-box|content-box|margin-box|padding-box","-moz-force-broken-image-icon":"0|1","-moz-image-region":"<shape>|auto","-moz-orient":"inline|block|horizontal|vertical","-moz-outline-radius":"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?","-moz-outline-radius-bottomleft":"<outline-radius>","-moz-outline-radius-bottomright":"<outline-radius>","-moz-outline-radius-topleft":"<outline-radius>","-moz-outline-radius-topright":"<outline-radius>","-moz-stack-sizing":"ignore|stretch-to-fit","-moz-text-blink":"none|blink","-moz-user-focus":"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none","-moz-user-input":"auto|none|enabled|disabled","-moz-user-modify":"read-only|read-write|write-only","-moz-window-dragging":"drag|no-drag","-moz-window-shadow":"default|menu|tooltip|sheet|none","-webkit-appearance":"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button","-webkit-border-before":"<'border-width'>||<'border-style'>||<color>","-webkit-border-before-color":"<color>","-webkit-border-before-style":"<'border-style'>","-webkit-border-before-width":"<'border-width'>","-webkit-box-reflect":"[above|below|right|left]? <length>? <image>?","-webkit-line-clamp":"none|<integer>","-webkit-mask":"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#","-webkit-mask-attachment":"<attachment>#","-webkit-mask-clip":"[<box>|border|padding|content|text]#","-webkit-mask-composite":"<composite-style>#","-webkit-mask-image":"<mask-reference>#","-webkit-mask-origin":"[<box>|border|padding|content]#","-webkit-mask-position":"<position>#","-webkit-mask-position-x":"[<length-percentage>|left|center|right]#","-webkit-mask-position-y":"[<length-percentage>|top|center|bottom]#","-webkit-mask-repeat":"<repeat-style>#","-webkit-mask-repeat-x":"repeat|no-repeat|space|round","-webkit-mask-repeat-y":"repeat|no-repeat|space|round","-webkit-mask-size":"<bg-size>#","-webkit-overflow-scrolling":"auto|touch","-webkit-tap-highlight-color":"<color>","-webkit-text-fill-color":"<color>","-webkit-text-stroke":"<length>||<color>","-webkit-text-stroke-color":"<color>","-webkit-text-stroke-width":"<length>","-webkit-touch-callout":"default|none","-webkit-user-modify":"read-only|read-write|read-write-plaintext-only","accent-color":"auto|<color>","align-content":"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>","align-items":"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]","align-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>","align-tracks":"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#",all:"initial|inherit|unset|revert|revert-layer",animation:"<single-animation>#","animation-composition":"<single-animation-composition>#","animation-delay":"<time>#","animation-direction":"<single-animation-direction>#","animation-duration":"<time>#","animation-fill-mode":"<single-animation-fill-mode>#","animation-iteration-count":"<single-animation-iteration-count>#","animation-name":"[none|<keyframes-name>]#","animation-play-state":"<single-animation-play-state>#","animation-timing-function":"<easing-function>#","animation-timeline":"<single-animation-timeline>#",appearance:"none|auto|textfield|menulist-button|<compat-auto>","aspect-ratio":"auto|<ratio>",azimuth:"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards","backdrop-filter":"none|<filter-function-list>","backface-visibility":"visible|hidden",background:"[<bg-layer> ,]* <final-bg-layer>","background-attachment":"<attachment>#","background-blend-mode":"<blend-mode>#","background-clip":"<bg-clip>#","background-color":"<color>","background-image":"<bg-image>#","background-origin":"<box>#","background-position":"<bg-position>#","background-position-x":"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#","background-position-y":"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#","background-repeat":"<repeat-style>#","background-size":"<bg-size>#","block-overflow":"clip|ellipsis|<string>","block-size":"<'width'>",border:"<line-width>||<line-style>||<color>","border-block":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-color":"<'border-top-color'>{1,2}","border-block-style":"<'border-top-style'>","border-block-width":"<'border-top-width'>","border-block-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-end-color":"<'border-top-color'>","border-block-end-style":"<'border-top-style'>","border-block-end-width":"<'border-top-width'>","border-block-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-block-start-color":"<'border-top-color'>","border-block-start-style":"<'border-top-style'>","border-block-start-width":"<'border-top-width'>","border-bottom":"<line-width>||<line-style>||<color>","border-bottom-color":"<'border-top-color'>","border-bottom-left-radius":"<length-percentage>{1,2}","border-bottom-right-radius":"<length-percentage>{1,2}","border-bottom-style":"<line-style>","border-bottom-width":"<line-width>","border-collapse":"collapse|separate","border-color":"<color>{1,4}","border-end-end-radius":"<length-percentage>{1,2}","border-end-start-radius":"<length-percentage>{1,2}","border-image":"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>","border-image-outset":"[<length>|<number>]{1,4}","border-image-repeat":"[stretch|repeat|round|space]{1,2}","border-image-slice":"<number-percentage>{1,4}&&fill?","border-image-source":"none|<image>","border-image-width":"[<length-percentage>|<number>|auto]{1,4}","border-inline":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-end":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-color":"<'border-top-color'>{1,2}","border-inline-style":"<'border-top-style'>","border-inline-width":"<'border-top-width'>","border-inline-end-color":"<'border-top-color'>","border-inline-end-style":"<'border-top-style'>","border-inline-end-width":"<'border-top-width'>","border-inline-start":"<'border-top-width'>||<'border-top-style'>||<color>","border-inline-start-color":"<'border-top-color'>","border-inline-start-style":"<'border-top-style'>","border-inline-start-width":"<'border-top-width'>","border-left":"<line-width>||<line-style>||<color>","border-left-color":"<color>","border-left-style":"<line-style>","border-left-width":"<line-width>","border-radius":"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?","border-right":"<line-width>||<line-style>||<color>","border-right-color":"<color>","border-right-style":"<line-style>","border-right-width":"<line-width>","border-spacing":"<length> <length>?","border-start-end-radius":"<length-percentage>{1,2}","border-start-start-radius":"<length-percentage>{1,2}","border-style":"<line-style>{1,4}","border-top":"<line-width>||<line-style>||<color>","border-top-color":"<color>","border-top-left-radius":"<length-percentage>{1,2}","border-top-right-radius":"<length-percentage>{1,2}","border-top-style":"<line-style>","border-top-width":"<line-width>","border-width":"<line-width>{1,4}",bottom:"<length>|<percentage>|auto","box-align":"start|center|end|baseline|stretch","box-decoration-break":"slice|clone","box-direction":"normal|reverse|inherit","box-flex":"<number>","box-flex-group":"<integer>","box-lines":"single|multiple","box-ordinal-group":"<integer>","box-orient":"horizontal|vertical|inline-axis|block-axis|inherit","box-pack":"start|center|end|justify","box-shadow":"none|<shadow>#","box-sizing":"content-box|border-box","break-after":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-before":"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region","break-inside":"auto|avoid|avoid-page|avoid-column|avoid-region","caption-side":"top|bottom|block-start|block-end|inline-start|inline-end",caret:"<'caret-color'>||<'caret-shape'>","caret-color":"auto|<color>","caret-shape":"auto|bar|block|underscore",clear:"none|left|right|both|inline-start|inline-end",clip:"<shape>|auto","clip-path":"<clip-source>|[<basic-shape>||<geometry-box>]|none",color:"<color>","print-color-adjust":"economy|exact","color-scheme":"normal|[light|dark|<custom-ident>]+&&only?","column-count":"<integer>|auto","column-fill":"auto|balance|balance-all","column-gap":"normal|<length-percentage>","column-rule":"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>","column-rule-color":"<color>","column-rule-style":"<'border-style'>","column-rule-width":"<'border-width'>","column-span":"none|all","column-width":"<length>|auto",columns:"<'column-width'>||<'column-count'>",contain:"none|strict|content|[[size||inline-size]||layout||style||paint]","contain-intrinsic-size":"[none|<length>|auto <length>]{1,2}","contain-intrinsic-block-size":"none|<length>|auto <length>","contain-intrinsic-height":"none|<length>|auto <length>","contain-intrinsic-inline-size":"none|<length>|auto <length>","contain-intrinsic-width":"none|<length>|auto <length>",content:"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?","content-visibility":"visible|auto|hidden","counter-increment":"[<counter-name> <integer>?]+|none","counter-reset":"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none","counter-set":"[<counter-name> <integer>?]+|none",cursor:"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]",direction:"ltr|rtl",display:"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>","empty-cells":"show|hide",filter:"none|<filter-function-list>|<-ms-filter-function-list>",flex:"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]","flex-basis":"content|<'width'>","flex-direction":"row|row-reverse|column|column-reverse","flex-flow":"<'flex-direction'>||<'flex-wrap'>","flex-grow":"<number>","flex-shrink":"<number>","flex-wrap":"nowrap|wrap|wrap-reverse",float:"left|right|none|inline-start|inline-end",font:"[[<'font-style'>||<font-variant-css21>||<'font-weight'>||<'font-stretch'>]? <'font-size'> [/ <'line-height'>]? <'font-family'>]|caption|icon|menu|message-box|small-caption|status-bar","font-family":"[<family-name>|<generic-family>]#","font-feature-settings":"normal|<feature-tag-value>#","font-kerning":"auto|normal|none","font-language-override":"normal|<string>","font-optical-sizing":"auto|none","font-variation-settings":"normal|[<string> <number>]#","font-size":"<absolute-size>|<relative-size>|<length-percentage>","font-size-adjust":"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]","font-smooth":"auto|never|always|<absolute-size>|<length>","font-stretch":"<font-stretch-absolute>","font-style":"normal|italic|oblique <angle>?","font-synthesis":"none|[weight||style||small-caps]","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-alternates":"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]","font-variant-caps":"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","font-variant-east-asian":"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]","font-variant-ligatures":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]","font-variant-numeric":"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]","font-variant-position":"normal|sub|super","font-weight":"<font-weight-absolute>|bolder|lighter","forced-color-adjust":"auto|none",gap:"<'row-gap'> <'column-gap'>?",grid:"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>","grid-area":"<grid-line> [/ <grid-line>]{0,3}","grid-auto-columns":"<track-size>+","grid-auto-flow":"[row|column]||dense","grid-auto-rows":"<track-size>+","grid-column":"<grid-line> [/ <grid-line>]?","grid-column-end":"<grid-line>","grid-column-gap":"<length-percentage>","grid-column-start":"<grid-line>","grid-gap":"<'grid-row-gap'> <'grid-column-gap'>?","grid-row":"<grid-line> [/ <grid-line>]?","grid-row-end":"<grid-line>","grid-row-gap":"<length-percentage>","grid-row-start":"<grid-line>","grid-template":"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?","grid-template-areas":"none|<string>+","grid-template-columns":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","grid-template-rows":"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?","hanging-punctuation":"none|[first||[force-end|allow-end]||last]",height:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","hyphenate-character":"auto|<string>",hyphens:"none|manual|auto","image-orientation":"from-image|<angle>|[<angle>? flip]","image-rendering":"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>","image-resolution":"[from-image||<resolution>]&&snap?","ime-mode":"auto|normal|active|inactive|disabled","initial-letter":"normal|[<number> <integer>?]","initial-letter-align":"[auto|alphabetic|hanging|ideographic]","inline-size":"<'width'>","input-security":"auto|none",inset:"<'top'>{1,4}","inset-block":"<'top'>{1,2}","inset-block-end":"<'top'>","inset-block-start":"<'top'>","inset-inline":"<'top'>{1,2}","inset-inline-end":"<'top'>","inset-inline-start":"<'top'>",isolation:"auto|isolate","justify-content":"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]","justify-items":"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]","justify-self":"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]","justify-tracks":"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#",left:"<length>|<percentage>|auto","letter-spacing":"normal|<length-percentage>","line-break":"auto|loose|normal|strict|anywhere","line-clamp":"none|<integer>","line-height":"normal|<number>|<length>|<percentage>","line-height-step":"<length>","list-style":"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>","list-style-image":"<image>|none","list-style-position":"inside|outside","list-style-type":"<counter-style>|<string>|none",margin:"[<length>|<percentage>|auto]{1,4}","margin-block":"<'margin-left'>{1,2}","margin-block-end":"<'margin-left'>","margin-block-start":"<'margin-left'>","margin-bottom":"<length>|<percentage>|auto","margin-inline":"<'margin-left'>{1,2}","margin-inline-end":"<'margin-left'>","margin-inline-start":"<'margin-left'>","margin-left":"<length>|<percentage>|auto","margin-right":"<length>|<percentage>|auto","margin-top":"<length>|<percentage>|auto","margin-trim":"none|in-flow|all",mask:"<mask-layer>#","mask-border":"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>","mask-border-mode":"luminance|alpha","mask-border-outset":"[<length>|<number>]{1,4}","mask-border-repeat":"[stretch|repeat|round|space]{1,2}","mask-border-slice":"<number-percentage>{1,4} fill?","mask-border-source":"none|<image>","mask-border-width":"[<length-percentage>|<number>|auto]{1,4}","mask-clip":"[<geometry-box>|no-clip]#","mask-composite":"<compositing-operator>#","mask-image":"<mask-reference>#","mask-mode":"<masking-mode>#","mask-origin":"<geometry-box>#","mask-position":"<position>#","mask-repeat":"<repeat-style>#","mask-size":"<bg-size>#","mask-type":"luminance|alpha","masonry-auto-flow":"[pack|next]||[definite-first|ordered]","math-depth":"auto-add|add( <integer> )|<integer>","math-shift":"normal|compact","math-style":"normal|compact","max-block-size":"<'max-width'>","max-height":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","max-inline-size":"<'max-width'>","max-lines":"none|<integer>","max-width":"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","min-block-size":"<'min-width'>","min-height":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )","min-inline-size":"<'min-width'>","min-width":"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|<-non-standard-width>","mix-blend-mode":"<blend-mode>|plus-lighter","object-fit":"fill|contain|cover|none|scale-down","object-position":"<position>",offset:"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?","offset-anchor":"auto|<position>","offset-distance":"<length-percentage>","offset-path":"none|ray( [<angle>&&<size>&&contain?] )|<path()>|<url>|[<basic-shape>||<geometry-box>]","offset-position":"auto|<position>","offset-rotate":"[auto|reverse]||<angle>",opacity:"<alpha-value>",order:"<integer>",orphans:"<integer>",outline:"[<'outline-color'>||<'outline-style'>||<'outline-width'>]","outline-color":"<color>|invert","outline-offset":"<length>","outline-style":"auto|<'border-style'>","outline-width":"<line-width>",overflow:"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>","overflow-anchor":"auto|none","overflow-block":"visible|hidden|clip|scroll|auto","overflow-clip-box":"padding-box|content-box","overflow-clip-margin":"<visual-box>||<length [0,∞]>","overflow-inline":"visible|hidden|clip|scroll|auto","overflow-wrap":"normal|break-word|anywhere","overflow-x":"visible|hidden|clip|scroll|auto","overflow-y":"visible|hidden|clip|scroll|auto","overscroll-behavior":"[contain|none|auto]{1,2}","overscroll-behavior-block":"contain|none|auto","overscroll-behavior-inline":"contain|none|auto","overscroll-behavior-x":"contain|none|auto","overscroll-behavior-y":"contain|none|auto",padding:"[<length>|<percentage>]{1,4}","padding-block":"<'padding-left'>{1,2}","padding-block-end":"<'padding-left'>","padding-block-start":"<'padding-left'>","padding-bottom":"<length>|<percentage>","padding-inline":"<'padding-left'>{1,2}","padding-inline-end":"<'padding-left'>","padding-inline-start":"<'padding-left'>","padding-left":"<length>|<percentage>","padding-right":"<length>|<percentage>","padding-top":"<length>|<percentage>","page-break-after":"auto|always|avoid|left|right|recto|verso","page-break-before":"auto|always|avoid|left|right|recto|verso","page-break-inside":"auto|avoid","paint-order":"normal|[fill||stroke||markers]",perspective:"none|<length>","perspective-origin":"<position>","place-content":"<'align-content'> <'justify-content'>?","place-items":"<'align-items'> <'justify-items'>?","place-self":"<'align-self'> <'justify-self'>?","pointer-events":"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit",position:"static|relative|absolute|sticky|fixed|-webkit-sticky",quotes:"none|auto|[<string> <string>]+",resize:"none|both|horizontal|vertical|block|inline",right:"<length>|<percentage>|auto",rotate:"none|<angle>|[x|y|z|<number>{3}]&&<angle>","row-gap":"normal|<length-percentage>","ruby-align":"start|center|space-between|space-around","ruby-merge":"separate|collapse|auto","ruby-position":"[alternate||[over|under]]|inter-character",scale:"none|<number>{1,3}","scrollbar-color":"auto|<color>{2}","scrollbar-gutter":"auto|stable&&both-edges?","scrollbar-width":"auto|thin|none","scroll-behavior":"auto|smooth","scroll-margin":"<length>{1,4}","scroll-margin-block":"<length>{1,2}","scroll-margin-block-start":"<length>","scroll-margin-block-end":"<length>","scroll-margin-bottom":"<length>","scroll-margin-inline":"<length>{1,2}","scroll-margin-inline-start":"<length>","scroll-margin-inline-end":"<length>","scroll-margin-left":"<length>","scroll-margin-right":"<length>","scroll-margin-top":"<length>","scroll-padding":"[auto|<length-percentage>]{1,4}","scroll-padding-block":"[auto|<length-percentage>]{1,2}","scroll-padding-block-start":"auto|<length-percentage>","scroll-padding-block-end":"auto|<length-percentage>","scroll-padding-bottom":"auto|<length-percentage>","scroll-padding-inline":"[auto|<length-percentage>]{1,2}","scroll-padding-inline-start":"auto|<length-percentage>","scroll-padding-inline-end":"auto|<length-percentage>","scroll-padding-left":"auto|<length-percentage>","scroll-padding-right":"auto|<length-percentage>","scroll-padding-top":"auto|<length-percentage>","scroll-snap-align":"[none|start|end|center]{1,2}","scroll-snap-coordinate":"none|<position>#","scroll-snap-destination":"<position>","scroll-snap-points-x":"none|repeat( <length-percentage> )","scroll-snap-points-y":"none|repeat( <length-percentage> )","scroll-snap-stop":"normal|always","scroll-snap-type":"none|[x|y|block|inline|both] [mandatory|proximity]?","scroll-snap-type-x":"none|mandatory|proximity","scroll-snap-type-y":"none|mandatory|proximity","scroll-timeline":"<scroll-timeline-name>||<scroll-timeline-axis>","scroll-timeline-axis":"block|inline|vertical|horizontal","scroll-timeline-name":"none|<custom-ident>","shape-image-threshold":"<alpha-value>","shape-margin":"<length-percentage>","shape-outside":"none|[<shape-box>||<basic-shape>]|<image>","tab-size":"<integer>|<length>","table-layout":"auto|fixed","text-align":"start|end|left|right|center|justify|match-parent","text-align-last":"auto|start|end|left|right|center|justify","text-combine-upright":"none|all|[digits <integer>?]","text-decoration":"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>","text-decoration-color":"<color>","text-decoration-line":"none|[underline||overline||line-through||blink]|spelling-error|grammar-error","text-decoration-skip":"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]","text-decoration-skip-ink":"auto|all|none","text-decoration-style":"solid|double|dotted|dashed|wavy","text-decoration-thickness":"auto|from-font|<length>|<percentage>","text-emphasis":"<'text-emphasis-style'>||<'text-emphasis-color'>","text-emphasis-color":"<color>","text-emphasis-position":"[over|under]&&[right|left]","text-emphasis-style":"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>","text-indent":"<length-percentage>&&hanging?&&each-line?","text-justify":"auto|inter-character|inter-word|none","text-orientation":"mixed|upright|sideways","text-overflow":"[clip|ellipsis|<string>]{1,2}","text-rendering":"auto|optimizeSpeed|optimizeLegibility|geometricPrecision","text-shadow":"none|<shadow-t>#","text-size-adjust":"none|auto|<percentage>","text-transform":"none|capitalize|uppercase|lowercase|full-width|full-size-kana","text-underline-offset":"auto|<length>|<percentage>","text-underline-position":"auto|from-font|[under||[left|right]]",top:"<length>|<percentage>|auto","touch-action":"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation",transform:"none|<transform-list>","transform-box":"content-box|border-box|fill-box|stroke-box|view-box","transform-origin":"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?","transform-style":"flat|preserve-3d",transition:"<single-transition>#","transition-delay":"<time>#","transition-duration":"<time>#","transition-property":"none|<single-transition-property>#","transition-timing-function":"<easing-function>#",translate:"none|<length-percentage> [<length-percentage> <length>?]?","unicode-bidi":"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext","user-select":"auto|text|none|contain|all","vertical-align":"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>",visibility:"visible|hidden|collapse","white-space":"normal|pre|nowrap|pre-wrap|pre-line|break-spaces",widows:"<integer>",width:"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|fill|stretch|intrinsic|-moz-max-content|-webkit-max-content|-moz-fit-content|-webkit-fit-content","will-change":"auto|<animateable-feature>#","word-break":"normal|break-all|keep-all|break-word","word-spacing":"normal|<length>","word-wrap":"normal|break-word","writing-mode":"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>","z-index":"auto|<integer>",zoom:"normal|reset|<number>|<percentage>","-moz-background-clip":"padding|border","-moz-border-radius-bottomleft":"<'border-bottom-left-radius'>","-moz-border-radius-bottomright":"<'border-bottom-right-radius'>","-moz-border-radius-topleft":"<'border-top-left-radius'>","-moz-border-radius-topright":"<'border-bottom-right-radius'>","-moz-control-character-visibility":"visible|hidden","-moz-osx-font-smoothing":"auto|grayscale","-moz-user-select":"none|text|all|-moz-none","-ms-flex-align":"start|end|center|baseline|stretch","-ms-flex-item-align":"auto|start|end|center|baseline|stretch","-ms-flex-line-pack":"start|end|center|justify|distribute|stretch","-ms-flex-negative":"<'flex-shrink'>","-ms-flex-pack":"start|end|center|justify|distribute","-ms-flex-order":"<integer>","-ms-flex-positive":"<'flex-grow'>","-ms-flex-preferred-size":"<'flex-basis'>","-ms-interpolation-mode":"nearest-neighbor|bicubic","-ms-grid-column-align":"start|end|center|stretch","-ms-grid-row-align":"start|end|center|stretch","-ms-hyphenate-limit-last":"none|always|column|page|spread","-webkit-background-clip":"[<box>|border|padding|content|text]#","-webkit-column-break-after":"always|auto|avoid","-webkit-column-break-before":"always|auto|avoid","-webkit-column-break-inside":"always|auto|avoid","-webkit-font-smoothing":"auto|none|antialiased|subpixel-antialiased","-webkit-mask-box-image":"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?","-webkit-print-color-adjust":"economy|exact","-webkit-text-security":"none|circle|disc|square","-webkit-user-drag":"none|element|auto","-webkit-user-select":"auto|none|text|all","alignment-baseline":"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical","baseline-shift":"baseline|sub|super|<svg-length>",behavior:"<url>+","clip-rule":"nonzero|evenodd",cue:"<'cue-before'> <'cue-after'>?","cue-after":"<url> <decibel>?|none","cue-before":"<url> <decibel>?|none","dominant-baseline":"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge",fill:"<paint>","fill-opacity":"<number-zero-one>","fill-rule":"nonzero|evenodd","glyph-orientation-horizontal":"<angle>","glyph-orientation-vertical":"<angle>",kerning:"auto|<svg-length>",marker:"none|<url>","marker-end":"none|<url>","marker-mid":"none|<url>","marker-start":"none|<url>",pause:"<'pause-before'> <'pause-after'>?","pause-after":"<time>|none|x-weak|weak|medium|strong|x-strong","pause-before":"<time>|none|x-weak|weak|medium|strong|x-strong",rest:"<'rest-before'> <'rest-after'>?","rest-after":"<time>|none|x-weak|weak|medium|strong|x-strong","rest-before":"<time>|none|x-weak|weak|medium|strong|x-strong","shape-rendering":"auto|optimizeSpeed|crispEdges|geometricPrecision",src:"[<url> [format( <string># )]?|local( <family-name> )]#",speak:"auto|none|normal","speak-as":"normal|spell-out||digits||[literal-punctuation|no-punctuation]",stroke:"<paint>","stroke-dasharray":"none|[<svg-length>+]#","stroke-dashoffset":"<svg-length>","stroke-linecap":"butt|round|square","stroke-linejoin":"miter|round|bevel","stroke-miterlimit":"<number-one-or-greater>","stroke-opacity":"<number-zero-one>","stroke-width":"<svg-length>","text-anchor":"start|middle|end","unicode-range":"<urange>#","voice-balance":"<number>|left|center|right|leftwards|rightwards","voice-duration":"auto|<time>","voice-family":"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve","voice-pitch":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-range":"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]","voice-rate":"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>","voice-stress":"normal|strong|moderate|none|reduced","voice-volume":"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]"},atrules:{charset:{prelude:"<string>",descriptors:null},"counter-style":{prelude:"<counter-style-name>",descriptors:{"additive-symbols":"[<integer>&&<symbol>]#",fallback:"<counter-style-name>",negative:"<symbol> <symbol>?",pad:"<integer>&&<symbol>",prefix:"<symbol>",range:"[[<integer>|infinite]{2}]#|auto","speak-as":"auto|bullets|numbers|words|spell-out|<counter-style-name>",suffix:"<symbol>",symbols:"<symbol>+",system:"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]"}},document:{prelude:"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#",descriptors:null},"font-face":{prelude:null,descriptors:{"ascent-override":"normal|<percentage>","descent-override":"normal|<percentage>","font-display":"[auto|block|swap|fallback|optional]","font-family":"<family-name>","font-feature-settings":"normal|<feature-tag-value>#","font-variation-settings":"normal|[<string> <number>]#","font-stretch":"<font-stretch-absolute>{1,2}","font-style":"normal|italic|oblique <angle>{0,2}","font-weight":"<font-weight-absolute>{1,2}","font-variant":"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]","line-gap-override":"normal|<percentage>","size-adjust":"<percentage>",src:"[<url> [format( <string># )]?|local( <family-name> )]#","unicode-range":"<urange>#"}},"font-feature-values":{prelude:"<family-name>#",descriptors:null},import:{prelude:"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?",descriptors:null},keyframes:{prelude:"<keyframes-name>",descriptors:null},layer:{prelude:"[<layer-name>#|<layer-name>?]",descriptors:null},media:{prelude:"<media-query-list>",descriptors:null},namespace:{prelude:"<namespace-prefix>? [<string>|<url>]",descriptors:null},page:{prelude:"<page-selector-list>",descriptors:{bleed:"auto|<length>",marks:"none|[crop||cross]",size:"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]"}},property:{prelude:"<custom-property-name>",descriptors:{syntax:"<string>",inherits:"true|false","initial-value":"<string>"}},"scroll-timeline":{prelude:"<timeline-name>",descriptors:null},supports:{prelude:"<supports-condition>",descriptors:null},viewport:{prelude:null,descriptors:{height:"<viewport-length>{1,2}","max-height":"<viewport-length>","max-width":"<viewport-length>","max-zoom":"auto|<number>|<percentage>","min-height":"<viewport-length>","min-width":"<viewport-length>","min-zoom":"auto|<number>|<percentage>",orientation:"auto|portrait|landscape","user-zoom":"zoom|fixed","viewport-fit":"auto|contain|cover",width:"<viewport-length>{1,2}",zoom:"auto|<number>|<percentage>"}},nest:{prelude:"<complex-selector-list>",descriptors:null}}},Ft=43,Ze=45,Ia=110,Jn=!0,xx=!1;function Na(r,e){let t=this.tokenStart+r;const n=this.charCodeAt(t);for((n===Ft||n===Ze)&&(e&&this.error("Number sign is not allowed"),t++);t<this.tokenEnd;t++)xe(this.charCodeAt(t))||this.error("Integer is expected",t)}function jr(r){return Na.call(this,0,r)}function Ln(r,e){if(!this.cmpChar(this.tokenStart+r,e)){let t="";switch(e){case Ia:t="N is expected";break;case Ze:t="HyphenMinus is expected";break}this.error(t,this.tokenStart+r)}}function Ec(){let r=0,e=0,t=this.tokenType;for(;t===de||t===Be;)t=this.lookupType(++r);if(t!==j)if(this.isDelim(Ft,r)||this.isDelim(Ze,r)){e=this.isDelim(Ft,r)?Ft:Ze;do t=this.lookupType(++r);while(t===de||t===Be);t!==j&&(this.skip(r),jr.call(this,Jn))}else return null;return r>0&&this.skip(r),e===0&&(t=this.charCodeAt(this.tokenStart),t!==Ft&&t!==Ze&&this.error("Number sign is expected")),jr.call(this,e!==0),e===Ze?"-"+this.consume(j):this.consume(j)}const Ax="AnPlusB",Ex={a:[String,null],b:[String,null]};function Op(){const r=this.tokenStart;let e=null,t=null;if(this.tokenType===j)jr.call(this,xx),t=this.consume(j);else if(this.tokenType===z&&this.cmpChar(this.tokenStart,Ze))switch(e="-1",Ln.call(this,1,Ia),this.tokenEnd-this.tokenStart){case 2:this.next(),t=Ec.call(this);break;case 3:Ln.call(this,2,Ze),this.next(),this.skipSC(),jr.call(this,Jn),t="-"+this.consume(j);break;default:Ln.call(this,2,Ze),Na.call(this,3,Jn),this.next(),t=this.substrToCursor(r+2)}else if(this.tokenType===z||this.isDelim(Ft)&&this.lookupType(1)===z){let n=0;switch(e="1",this.isDelim(Ft)&&(n=1,this.next()),Ln.call(this,0,Ia),this.tokenEnd-this.tokenStart){case 1:this.next(),t=Ec.call(this);break;case 2:Ln.call(this,1,Ze),this.next(),this.skipSC(),jr.call(this,Jn),t="-"+this.consume(j);break;default:Ln.call(this,1,Ze),Na.call(this,2,Jn),this.next(),t=this.substrToCursor(r+n+1)}}else if(this.tokenType===K){const n=this.charCodeAt(this.tokenStart),i=n===Ft||n===Ze;let s=this.tokenStart+i;for(;s<this.tokenEnd&&xe(this.charCodeAt(s));s++);s===this.tokenStart+i&&this.error("Integer is expected",this.tokenStart+i),Ln.call(this,s-this.tokenStart,Ia),e=this.substring(r,s),s+1===this.tokenEnd?(this.next(),t=Ec.call(this)):(Ln.call(this,s-this.tokenStart+1,Ze),s+2===this.tokenEnd?(this.next(),this.skipSC(),jr.call(this,Jn),t="-"+this.consume(j)):(Na.call(this,s-this.tokenStart+2,Jn),this.next(),t=this.substrToCursor(s+1)))}else this.error();return e!==null&&e.charCodeAt(0)===Ft&&(e=e.substr(1)),t!==null&&t.charCodeAt(0)===Ft&&(t=t.substr(1)),{type:"AnPlusB",loc:this.getLocation(r,this.tokenStart),a:e,b:t}}function Cx(r){if(r.a){const e=r.a==="+1"&&"n"||r.a==="1"&&"n"||r.a==="-1"&&"-n"||r.a+"n";if(r.b){const t=r.b[0]==="-"||r.b[0]==="+"?r.b:"+"+r.b;this.tokenize(e+t)}else this.tokenize(e)}else this.tokenize(r.b)}const Tx=Object.freeze(Object.defineProperty({__proto__:null,generate:Cx,name:Ax,parse:Op,structure:Ex},Symbol.toStringTag,{value:"Module"}));function Mp(r){return this.Raw(r,this.consumeUntilLeftCurlyBracketOrSemicolon,!0)}function Lx(){for(let r=1,e;e=this.lookupType(r);r++){if(e===st)return!0;if(e===Ne||e===pe)return!1}return!1}const Dx="Atrule",Ix="atrule",Nx={name:String,prelude:["AtrulePrelude","Raw",null],block:["Block",null]};function qp(r=!1){const e=this.tokenStart;let t,n,i=null,s=null;switch(this.eat(pe),t=this.substrToCursor(e+1),n=t.toLowerCase(),this.skipSC(),this.eof===!1&&this.tokenType!==Ne&&this.tokenType!==He&&(this.parseAtrulePrelude?i=this.parseWithFallback(this.AtrulePrelude.bind(this,t,r),Mp):i=Mp.call(this,this.tokenIndex),this.skipSC()),this.tokenType){case He:this.next();break;case Ne:hasOwnProperty.call(this.atrule,n)&&typeof this.atrule[n].block=="function"?s=this.atrule[n].block.call(this,r):s=this.Block(Lx.call(this));break}return{type:"Atrule",loc:this.getLocation(e,this.tokenStart),name:t,prelude:i,block:s}}function Ox(r){this.token(pe,"@"+r.name),r.prelude!==null&&this.node(r.prelude),r.block?this.node(r.block):this.token(He,";")}const Mx=Object.freeze(Object.defineProperty({__proto__:null,generate:Ox,name:Dx,parse:qp,structure:Nx,walkContext:Ix},Symbol.toStringTag,{value:"Module"})),qx="AtrulePrelude",_x="atrulePrelude",zx={children:[[]]};function _p(r){let e=null;return r!==null&&(r=r.toLowerCase()),this.skipSC(),hasOwnProperty.call(this.atrule,r)&&typeof this.atrule[r].prelude=="function"?e=this.atrule[r].prelude.call(this):e=this.readSequence(this.scope.AtrulePrelude),this.skipSC(),this.eof!==!0&&this.tokenType!==Ne&&this.tokenType!==He&&this.error("Semicolon or block is expected"),{type:"AtrulePrelude",loc:this.getLocationFromList(e),children:e}}function Rx(r){this.children(r)}const Bx=Object.freeze(Object.defineProperty({__proto__:null,generate:Rx,name:qx,parse:_p,structure:zx,walkContext:_x},Symbol.toStringTag,{value:"Module"})),Px=36,zp=42,Oa=61,$x=94,Cc=124,Fx=126;function jx(){this.eof&&this.error("Unexpected end of input");const r=this.tokenStart;let e=!1;return this.isDelim(zp)?(e=!0,this.next()):this.isDelim(Cc)||this.eat(z),this.isDelim(Cc)?this.charCodeAt(this.tokenStart+1)!==Oa?(this.next(),this.eat(z)):e&&this.error("Identifier is expected",this.tokenEnd):e&&this.error("Vertical line is expected"),{type:"Identifier",loc:this.getLocation(r,this.tokenStart),name:this.substrToCursor(r)}}function Hx(){const r=this.tokenStart,e=this.charCodeAt(r);return e!==Oa&&e!==Fx&&e!==$x&&e!==Px&&e!==zp&&e!==Cc&&this.error("Attribute selector (=, ~=, ^=, $=, *=, |=) is expected"),this.next(),e!==Oa&&(this.isDelim(Oa)||this.error("Equal sign is expected"),this.next()),this.substrToCursor(r)}const Ux="AttributeSelector",Vx={name:"Identifier",matcher:[String,null],value:["String","Identifier",null],flags:[String,null]};function Rp(){const r=this.tokenStart;let e,t=null,n=null,i=null;return this.eat(Qe),this.skipSC(),e=jx.call(this),this.skipSC(),this.tokenType!==wt&&(this.tokenType!==z&&(t=Hx.call(this),this.skipSC(),n=this.tokenType===Rt?this.String():this.Identifier(),this.skipSC()),this.tokenType===z&&(i=this.consume(z),this.skipSC())),this.eat(wt),{type:"AttributeSelector",loc:this.getLocation(r,this.tokenStart),name:e,matcher:t,value:n,flags:i}}function Yx(r){this.token(Q,"["),this.node(r.name),r.matcher!==null&&(this.tokenize(r.matcher),this.node(r.value)),r.flags!==null&&this.token(z,r.flags),this.token(Q,"]")}const Gx=Object.freeze(Object.defineProperty({__proto__:null,generate:Yx,name:Ux,parse:Rp,structure:Vx},Symbol.toStringTag,{value:"Module"})),Kx=38;function Bp(r){return this.Raw(r,null,!0)}function Pp(){return this.parseWithFallback(this.Rule,Bp)}function $p(r){return this.Raw(r,this.consumeUntilSemicolonIncluded,!0)}function Wx(){if(this.tokenType===He)return $p.call(this,this.tokenIndex);const r=this.parseWithFallback(this.Declaration,$p);return this.tokenType===He&&this.next(),r}const Qx="Block",Zx="block",Xx={children:[["Atrule","Rule","Declaration"]]};function Fp(r){const e=r?Wx:Pp,t=this.tokenStart;let n=this.createList();this.eat(Ne);e:for(;!this.eof;)switch(this.tokenType){case st:break e;case de:case Be:this.next();break;case pe:n.push(this.parseWithFallback(this.Atrule.bind(this,r),Bp));break;default:r&&this.isDelim(Kx)?n.push(Pp.call(this)):n.push(e.call(this))}return this.eof||this.eat(st),{type:"Block",loc:this.getLocation(t,this.tokenStart),children:n}}function Jx(r){this.token(Ne,"{"),this.children(r,e=>{e.type==="Declaration"&&this.token(He,";")}),this.token(st,"}")}const eA=Object.freeze(Object.defineProperty({__proto__:null,generate:Jx,name:Qx,parse:Fp,structure:Xx,walkContext:Zx},Symbol.toStringTag,{value:"Module"})),tA="Brackets",nA={children:[[]]};function jp(r,e){const t=this.tokenStart;let n=null;return this.eat(Qe),n=r.call(this,e),this.eof||this.eat(wt),{type:"Brackets",loc:this.getLocation(t,this.tokenStart),children:n}}function rA(r){this.token(Q,"["),this.children(r),this.token(Q,"]")}const iA=Object.freeze(Object.defineProperty({__proto__:null,generate:rA,name:tA,parse:jp,structure:nA},Symbol.toStringTag,{value:"Module"})),sA="CDC",aA=[];function Hp(){const r=this.tokenStart;return this.eat(je),{type:"CDC",loc:this.getLocation(r,this.tokenStart)}}function oA(){this.token(je,"-->")}const lA=Object.freeze(Object.defineProperty({__proto__:null,generate:oA,name:sA,parse:Hp,structure:aA},Symbol.toStringTag,{value:"Module"})),cA="CDO",uA=[];function Up(){const r=this.tokenStart;return this.eat(Ci),{type:"CDO",loc:this.getLocation(r,this.tokenStart)}}function dA(){this.token(Ci,"<!--")}const hA=Object.freeze(Object.defineProperty({__proto__:null,generate:dA,name:cA,parse:Up,structure:uA},Symbol.toStringTag,{value:"Module"})),fA=46,pA="ClassSelector",gA={name:String};function Vp(){return this.eatDelim(fA),{type:"ClassSelector",loc:this.getLocation(this.tokenStart-1,this.tokenEnd),name:this.consume(z)}}function mA(r){this.token(Q,"."),this.token(z,r.name)}const bA=Object.freeze(Object.defineProperty({__proto__:null,generate:mA,name:pA,parse:Vp,structure:gA},Symbol.toStringTag,{value:"Module"})),yA=43,Yp=47,vA=62,wA=126,kA="Combinator",SA={name:String};function Gp(){const r=this.tokenStart;let e;switch(this.tokenType){case de:e=" ";break;case Q:switch(this.charCodeAt(this.tokenStart)){case vA:case yA:case wA:this.next();break;case Yp:this.next(),this.eatIdent("deep"),this.eatDelim(Yp);break;default:this.error("Combinator is expected")}e=this.substrToCursor(r);break}return{type:"Combinator",loc:this.getLocation(r,this.tokenStart),name:e}}function xA(r){this.tokenize(r.name)}const AA=Object.freeze(Object.defineProperty({__proto__:null,generate:xA,name:kA,parse:Gp,structure:SA},Symbol.toStringTag,{value:"Module"})),EA=42,CA=47,TA="Comment",LA={value:String};function Kp(){const r=this.tokenStart;let e=this.tokenEnd;return this.eat(Be),e-r+2>=2&&this.charCodeAt(e-2)===EA&&this.charCodeAt(e-1)===CA&&(e-=2),{type:"Comment",loc:this.getLocation(r,this.tokenStart),value:this.substring(r+2,e)}}function DA(r){this.token(Be,"/*"+r.value+"*/")}const IA=Object.freeze(Object.defineProperty({__proto__:null,generate:DA,name:TA,parse:Kp,structure:LA},Symbol.toStringTag,{value:"Module"})),Wp=33,NA=35,OA=36,MA=38,qA=42,_A=43,Qp=47;function zA(r){return this.Raw(r,this.consumeUntilExclamationMarkOrSemicolon,!0)}function RA(r){return this.Raw(r,this.consumeUntilExclamationMarkOrSemicolon,!1)}function BA(){const r=this.tokenIndex,e=this.Value();return e.type!=="Raw"&&this.eof===!1&&this.tokenType!==He&&this.isDelim(Wp)===!1&&this.isBalanceEdge(r)===!1&&this.error(),e}const PA="Declaration",$A="declaration",FA={important:[Boolean,String],property:String,value:["Value","Raw"]};function Zp(){const r=this.tokenStart,e=this.tokenIndex,t=HA.call(this),n=tc(t),i=n?this.parseCustomProperty:this.parseValue,s=n?RA:zA;let a=!1,o;this.skipSC(),this.eat(Ie);const l=this.tokenIndex;if(n||this.skipSC(),i?o=this.parseWithFallback(BA,s):o=s.call(this,this.tokenIndex),n&&o.type==="Value"&&o.children.isEmpty){for(let c=l-this.tokenIndex;c<=0;c++)if(this.lookupType(c)===de){o.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}return this.isDelim(Wp)&&(a=UA.call(this),this.skipSC()),this.eof===!1&&this.tokenType!==He&&this.isBalanceEdge(e)===!1&&this.error(),{type:"Declaration",loc:this.getLocation(r,this.tokenStart),important:a,property:t,value:o}}function jA(r){this.token(z,r.property),this.token(Ie,":"),this.node(r.value),r.important&&(this.token(Q,"!"),this.token(z,r.important===!0?"important":r.important))}function HA(){const r=this.tokenStart;if(this.tokenType===Q)switch(this.charCodeAt(this.tokenStart)){case qA:case OA:case _A:case NA:case MA:this.next();break;case Qp:this.next(),this.isDelim(Qp)&&this.next();break}return this.tokenType===ae?this.eat(ae):this.eat(z),this.substrToCursor(r)}function UA(){this.eat(Q),this.skipSC();const r=this.consume(z);return r==="important"?!0:r}const VA=Object.freeze(Object.defineProperty({__proto__:null,generate:jA,name:PA,parse:Zp,structure:FA,walkContext:$A},Symbol.toStringTag,{value:"Module"})),YA=38;function Tc(r){return this.Raw(r,this.consumeUntilSemicolonIncluded,!0)}const GA="DeclarationList",KA={children:[["Declaration","Atrule","Rule"]]};function Xp(){const r=this.createList();for(;!this.eof;)switch(this.tokenType){case de:case Be:case He:this.next();break;case pe:r.push(this.parseWithFallback(this.Atrule.bind(this,!0),Tc));break;default:this.isDelim(YA)?r.push(this.parseWithFallback(this.Rule,Tc)):r.push(this.parseWithFallback(this.Declaration,Tc))}return{type:"DeclarationList",loc:this.getLocationFromList(r),children:r}}function WA(r){this.children(r,e=>{e.type==="Declaration"&&this.token(He,";")})}const QA=Object.freeze(Object.defineProperty({__proto__:null,generate:WA,name:GA,parse:Xp,structure:KA},Symbol.toStringTag,{value:"Module"})),ZA="Dimension",XA={value:String,unit:String};function Jp(){const r=this.tokenStart,e=this.consumeNumber(K);return{type:"Dimension",loc:this.getLocation(r,this.tokenStart),value:e,unit:this.substring(r+e.length,this.tokenStart)}}function JA(r){this.token(K,r.value+r.unit)}const eE=Object.freeze(Object.defineProperty({__proto__:null,generate:JA,name:ZA,parse:Jp,structure:XA},Symbol.toStringTag,{value:"Module"})),tE="Function",nE="function",rE={name:String,children:[[]]};function eg(r,e){const t=this.tokenStart,n=this.consumeFunctionName(),i=n.toLowerCase();let s;return s=e.hasOwnProperty(i)?e[i].call(this,e):r.call(this,e),this.eof||this.eat(ne),{type:"Function",loc:this.getLocation(t,this.tokenStart),name:n,children:s}}function iE(r){this.token(W,r.name+"("),this.children(r),this.token(ne,")")}const sE=Object.freeze(Object.defineProperty({__proto__:null,generate:iE,name:tE,parse:eg,structure:rE,walkContext:nE},Symbol.toStringTag,{value:"Module"})),aE="XXX",oE="Hash",lE={value:String};function tg(){const r=this.tokenStart;return this.eat(ae),{type:"Hash",loc:this.getLocation(r,this.tokenStart),value:this.substrToCursor(r+1)}}function cE(r){this.token(ae,"#"+r.value)}const uE=Object.freeze(Object.defineProperty({__proto__:null,generate:cE,name:oE,parse:tg,structure:lE,xxx:aE},Symbol.toStringTag,{value:"Module"})),dE="Identifier",hE={name:String};function ng(){return{type:"Identifier",loc:this.getLocation(this.tokenStart,this.tokenEnd),name:this.consume(z)}}function fE(r){this.token(z,r.name)}const pE=Object.freeze(Object.defineProperty({__proto__:null,generate:fE,name:dE,parse:ng,structure:hE},Symbol.toStringTag,{value:"Module"})),gE="IdSelector",mE={name:String};function rg(){const r=this.tokenStart;return this.eat(ae),{type:"IdSelector",loc:this.getLocation(r,this.tokenStart),name:this.substrToCursor(r+1)}}function bE(r){this.token(Q,"#"+r.name)}const yE=Object.freeze(Object.defineProperty({__proto__:null,generate:bE,name:gE,parse:rg,structure:mE},Symbol.toStringTag,{value:"Module"})),vE="MediaFeature",wE={name:String,value:["Identifier","Number","Dimension","Ratio",null]};function ig(){const r=this.tokenStart;let e,t=null;if(this.eat(ke),this.skipSC(),e=this.consume(z),this.skipSC(),this.tokenType!==ne){switch(this.eat(Ie),this.skipSC(),this.tokenType){case j:this.lookupNonWSType(1)===Q?t=this.Ratio():t=this.Number();break;case K:t=this.Dimension();break;case z:t=this.Identifier();break;default:this.error("Number, dimension, ratio or identifier is expected")}this.skipSC()}return this.eat(ne),{type:"MediaFeature",loc:this.getLocation(r,this.tokenStart),name:e,value:t}}function kE(r){this.token(ke,"("),this.token(z,r.name),r.value!==null&&(this.token(Ie,":"),this.node(r.value)),this.token(ne,")")}const SE=Object.freeze(Object.defineProperty({__proto__:null,generate:kE,name:vE,parse:ig,structure:wE},Symbol.toStringTag,{value:"Module"})),xE="MediaQuery",AE={children:[["Identifier","MediaFeature","WhiteSpace"]]};function sg(){const r=this.createList();let e=null;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Be:case de:this.next();continue;case z:e=this.Identifier();break;case ke:e=this.MediaFeature();break;default:break e}r.push(e)}return e===null&&this.error("Identifier or parenthesis is expected"),{type:"MediaQuery",loc:this.getLocationFromList(r),children:r}}function EE(r){this.children(r)}const CE=Object.freeze(Object.defineProperty({__proto__:null,generate:EE,name:xE,parse:sg,structure:AE},Symbol.toStringTag,{value:"Module"})),TE="MediaQueryList",LE={children:[["MediaQuery"]]};function ag(){const r=this.createList();for(this.skipSC();!this.eof&&(r.push(this.MediaQuery()),this.tokenType===Bt);)this.next();return{type:"MediaQueryList",loc:this.getLocationFromList(r),children:r}}function DE(r){this.children(r,()=>this.token(Bt,","))}const IE=Object.freeze(Object.defineProperty({__proto__:null,generate:DE,name:TE,parse:ag,structure:LE},Symbol.toStringTag,{value:"Module"})),NE=38,OE="NestingSelector",ME={};function og(){const r=this.tokenStart;return this.eatDelim(NE),{type:"NestingSelector",loc:this.getLocation(r,this.tokenStart)}}function qE(){this.token(Q,"&")}const _E=Object.freeze(Object.defineProperty({__proto__:null,generate:qE,name:OE,parse:og,structure:ME},Symbol.toStringTag,{value:"Module"})),zE="Nth",RE={nth:["AnPlusB","Identifier"],selector:["SelectorList",null]};function lg(){this.skipSC();const r=this.tokenStart;let e=r,t=null,n;return this.lookupValue(0,"odd")||this.lookupValue(0,"even")?n=this.Identifier():n=this.AnPlusB(),e=this.tokenStart,this.skipSC(),this.lookupValue(0,"of")&&(this.next(),t=this.SelectorList(),e=this.tokenStart),{type:"Nth",loc:this.getLocation(r,e),nth:n,selector:t}}function BE(r){this.node(r.nth),r.selector!==null&&(this.token(z,"of"),this.node(r.selector))}const PE=Object.freeze(Object.defineProperty({__proto__:null,generate:BE,name:zE,parse:lg,structure:RE},Symbol.toStringTag,{value:"Module"})),$E="Number",FE={value:String};function cg(){return{type:"Number",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consume(j)}}function jE(r){this.token(j,r.value)}const HE=Object.freeze(Object.defineProperty({__proto__:null,generate:jE,name:$E,parse:cg,structure:FE},Symbol.toStringTag,{value:"Module"})),UE="Operator",VE={value:String};function ug(){const r=this.tokenStart;return this.next(),{type:"Operator",loc:this.getLocation(r,this.tokenStart),value:this.substrToCursor(r)}}function YE(r){this.tokenize(r.value)}const GE=Object.freeze(Object.defineProperty({__proto__:null,generate:YE,name:UE,parse:ug,structure:VE},Symbol.toStringTag,{value:"Module"})),KE="Parentheses",WE={children:[[]]};function dg(r,e){const t=this.tokenStart;let n=null;return this.eat(ke),n=r.call(this,e),this.eof||this.eat(ne),{type:"Parentheses",loc:this.getLocation(t,this.tokenStart),children:n}}function QE(r){this.token(ke,"("),this.children(r),this.token(ne,")")}const ZE=Object.freeze(Object.defineProperty({__proto__:null,generate:QE,name:KE,parse:dg,structure:WE},Symbol.toStringTag,{value:"Module"})),XE="Percentage",JE={value:String};function hg(){return{type:"Percentage",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:this.consumeNumber(ue)}}function eC(r){this.token(ue,r.value+"%")}const tC=Object.freeze(Object.defineProperty({__proto__:null,generate:eC,name:XE,parse:hg,structure:JE},Symbol.toStringTag,{value:"Module"})),nC="PseudoClassSelector",rC="function",iC={name:String,children:[["Raw"],null]};function fg(){const r=this.tokenStart;let e=null,t,n;return this.eat(Ie),this.tokenType===W?(t=this.consumeFunctionName(),n=t.toLowerCase(),hasOwnProperty.call(this.pseudo,n)?(this.skipSC(),e=this.pseudo[n].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(ne)):t=this.consume(z),{type:"PseudoClassSelector",loc:this.getLocation(r,this.tokenStart),name:t,children:e}}function sC(r){this.token(Ie,":"),r.children===null?this.token(z,r.name):(this.token(W,r.name+"("),this.children(r),this.token(ne,")"))}const aC=Object.freeze(Object.defineProperty({__proto__:null,generate:sC,name:nC,parse:fg,structure:iC,walkContext:rC},Symbol.toStringTag,{value:"Module"})),oC="PseudoElementSelector",lC="function",cC={name:String,children:[["Raw"],null]};function pg(){const r=this.tokenStart;let e=null,t,n;return this.eat(Ie),this.eat(Ie),this.tokenType===W?(t=this.consumeFunctionName(),n=t.toLowerCase(),hasOwnProperty.call(this.pseudo,n)?(this.skipSC(),e=this.pseudo[n].call(this),this.skipSC()):(e=this.createList(),e.push(this.Raw(this.tokenIndex,null,!1))),this.eat(ne)):t=this.consume(z),{type:"PseudoElementSelector",loc:this.getLocation(r,this.tokenStart),name:t,children:e}}function uC(r){this.token(Ie,":"),this.token(Ie,":"),r.children===null?this.token(z,r.name):(this.token(W,r.name+"("),this.children(r),this.token(ne,")"))}const dC=Object.freeze(Object.defineProperty({__proto__:null,generate:uC,name:oC,parse:pg,structure:cC,walkContext:lC},Symbol.toStringTag,{value:"Module"})),hC=47,fC=46;function gg(){this.skipSC();const r=this.consume(j);for(let e=0;e<r.length;e++){const t=r.charCodeAt(e);!xe(t)&&t!==fC&&this.error("Unsigned number is expected",this.tokenStart-r.length+e)}return Number(r)===0&&this.error("Zero number is not allowed",this.tokenStart-r.length),r}const pC="Ratio",gC={left:String,right:String};function mg(){const r=this.tokenStart,e=gg.call(this);let t;return this.skipSC(),this.eatDelim(hC),t=gg.call(this),{type:"Ratio",loc:this.getLocation(r,this.tokenStart),left:e,right:t}}function mC(r){this.token(j,r.left),this.token(Q,"/"),this.token(j,r.right)}const bC=Object.freeze(Object.defineProperty({__proto__:null,generate:mC,name:pC,parse:mg,structure:gC},Symbol.toStringTag,{value:"Module"}));function yC(){return this.tokenIndex>0&&this.lookupType(-1)===de?this.tokenIndex>1?this.getTokenStart(this.tokenIndex-1):this.firstCharOffset:this.tokenStart}const vC="Raw",wC={value:String};function bg(r,e,t){const n=this.getTokenStart(r);let i;return this.skipUntilBalanced(r,e||this.consumeUntilBalanceEnd),t&&this.tokenStart>n?i=yC.call(this):i=this.tokenStart,{type:"Raw",loc:this.getLocation(n,i),value:this.substring(n,i)}}function kC(r){this.tokenize(r.value)}const SC=Object.freeze(Object.defineProperty({__proto__:null,generate:kC,name:vC,parse:bg,structure:wC},Symbol.toStringTag,{value:"Module"}));function yg(r){return this.Raw(r,this.consumeUntilLeftCurlyBracket,!0)}function xC(){const r=this.SelectorList();return r.type!=="Raw"&&this.eof===!1&&this.tokenType!==Ne&&this.error(),r}const AC="Rule",EC="rule",CC={prelude:["SelectorList","Raw"],block:["Block"]};function vg(){const r=this.tokenIndex,e=this.tokenStart;let t,n;return this.parseRulePrelude?t=this.parseWithFallback(xC,yg):t=yg.call(this,r),n=this.Block(!0),{type:"Rule",loc:this.getLocation(e,this.tokenStart),prelude:t,block:n}}function TC(r){this.node(r.prelude),this.node(r.block)}const LC=Object.freeze(Object.defineProperty({__proto__:null,generate:TC,name:AC,parse:vg,structure:CC,walkContext:EC},Symbol.toStringTag,{value:"Module"})),DC="Selector",IC={children:[["TypeSelector","IdSelector","ClassSelector","AttributeSelector","PseudoClassSelector","PseudoElementSelector","Combinator","WhiteSpace"]]};function wg(){const r=this.readSequence(this.scope.Selector);return this.getFirstListNode(r)===null&&this.error("Selector is expected"),{type:"Selector",loc:this.getLocationFromList(r),children:r}}function NC(r){this.children(r)}const OC=Object.freeze(Object.defineProperty({__proto__:null,generate:NC,name:DC,parse:wg,structure:IC},Symbol.toStringTag,{value:"Module"})),MC="SelectorList",qC="selector",_C={children:[["Selector","Raw"]]};function kg(){const r=this.createList();for(;!this.eof;){if(r.push(this.Selector()),this.tokenType===Bt){this.next();continue}break}return{type:"SelectorList",loc:this.getLocationFromList(r),children:r}}function zC(r){this.children(r,()=>this.token(Bt,","))}const RC=Object.freeze(Object.defineProperty({__proto__:null,generate:zC,name:MC,parse:kg,structure:_C,walkContext:qC},Symbol.toStringTag,{value:"Module"})),Lc=92,Sg=34,BC=39;function xg(r){const e=r.length,t=r.charCodeAt(0),n=t===Sg||t===BC?1:0,i=n===1&&e>1&&r.charCodeAt(e-1)===t?e-2:e-1;let s="";for(let a=n;a<=i;a++){let o=r.charCodeAt(a);if(o===Lc){if(a===i){a!==e-1&&(s=r.substr(a+1));break}if(o=r.charCodeAt(++a),Pt(Lc,o)){const l=a-1,c=_r(r,l);a=c-1,s+=gf(r.substring(l+1,c))}else o===13&&r.charCodeAt(a+1)===10&&a++}else s+=r[a]}return s}function PC(r,e){const t='"',n=Sg;let i="",s=!1;for(let a=0;a<r.length;a++){const o=r.charCodeAt(a);if(o===0){i+="�";continue}if(o<=31||o===127){i+="\\"+o.toString(16),s=!0;continue}o===n||o===Lc?(i+="\\"+r.charAt(a),s=!1):(s&&(En(o)||Zn(o))&&(i+=" "),i+=r.charAt(a),s=!1)}return t+i+t}const $C="String",FC={value:String};function Ag(){return{type:"String",loc:this.getLocation(this.tokenStart,this.tokenEnd),value:xg(this.consume(Rt))}}function jC(r){this.token(Rt,PC(r.value))}const HC=Object.freeze(Object.defineProperty({__proto__:null,generate:jC,name:$C,parse:Ag,structure:FC},Symbol.toStringTag,{value:"Module"})),UC=33;function Eg(r){return this.Raw(r,null,!1)}const VC="StyleSheet",YC="stylesheet",GC={children:[["Comment","CDO","CDC","Atrule","Rule","Raw"]]};function Cg(){const r=this.tokenStart,e=this.createList();let t;for(;!this.eof;){switch(this.tokenType){case de:this.next();continue;case Be:if(this.charCodeAt(this.tokenStart+2)!==UC){this.next();continue}t=this.Comment();break;case Ci:t=this.CDO();break;case je:t=this.CDC();break;case pe:t=this.parseWithFallback(this.Atrule,Eg);break;default:t=this.parseWithFallback(this.Rule,Eg)}e.push(t)}return{type:"StyleSheet",loc:this.getLocation(r,this.tokenStart),children:e}}function KC(r){this.children(r)}const WC=Object.freeze(Object.defineProperty({__proto__:null,generate:KC,name:VC,parse:Cg,structure:GC,walkContext:YC},Symbol.toStringTag,{value:"Module"})),QC=42,Tg=124;function Dc(){this.tokenType!==z&&this.isDelim(QC)===!1&&this.error("Identifier or asterisk is expected"),this.next()}const ZC="TypeSelector",XC={name:String};function Lg(){const r=this.tokenStart;return this.isDelim(Tg)?(this.next(),Dc.call(this)):(Dc.call(this),this.isDelim(Tg)&&(this.next(),Dc.call(this))),{type:"TypeSelector",loc:this.getLocation(r,this.tokenStart),name:this.substrToCursor(r)}}function JC(r){this.tokenize(r.name)}const eT=Object.freeze(Object.defineProperty({__proto__:null,generate:JC,name:ZC,parse:Lg,structure:XC},Symbol.toStringTag,{value:"Module"})),Dg=43,Ig=45,Ic=63;function Bi(r,e){let t=0;for(let n=this.tokenStart+r;n<this.tokenEnd;n++){const i=this.charCodeAt(n);if(i===Ig&&e&&t!==0)return Bi.call(this,r+t+1,!1),-1;En(i)||this.error(e&&t!==0?"Hyphen minus"+(t<6?" or hex digit":"")+" is expected":t<6?"Hex digit is expected":"Unexpected input",n),++t>6&&this.error("Too many hex digits",n)}return this.next(),t}function Ma(r){let e=0;for(;this.isDelim(Ic);)++e>r&&this.error("Too many question marks"),this.next()}function tT(r){this.charCodeAt(this.tokenStart)!==r&&this.error((r===Dg?"Plus sign":"Hyphen minus")+" is expected")}function nT(){let r=0;switch(this.tokenType){case j:if(r=Bi.call(this,1,!0),this.isDelim(Ic)){Ma.call(this,6-r);break}if(this.tokenType===K||this.tokenType===j){tT.call(this,Ig),Bi.call(this,1,!1);break}break;case K:r=Bi.call(this,1,!0),r>0&&Ma.call(this,6-r);break;default:if(this.eatDelim(Dg),this.tokenType===z){r=Bi.call(this,0,!0),r>0&&Ma.call(this,6-r);break}if(this.isDelim(Ic)){this.next(),Ma.call(this,5);break}this.error("Hex digit or question mark is expected")}}const rT="UnicodeRange",iT={value:String};function Ng(){const r=this.tokenStart;return this.eatIdent("u"),nT.call(this),{type:"UnicodeRange",loc:this.getLocation(r,this.tokenStart),value:this.substrToCursor(r)}}function sT(r){this.tokenize(r.value)}const aT=Object.freeze(Object.defineProperty({__proto__:null,generate:sT,name:rT,parse:Ng,structure:iT},Symbol.toStringTag,{value:"Module"})),oT=32,Nc=92,lT=34,cT=39,uT=40,Og=41;function dT(r){const e=r.length;let t=4,n=r.charCodeAt(e-1)===Og?e-2:e-1,i="";for(;t<n&&Zn(r.charCodeAt(t));)t++;for(;t<n&&Zn(r.charCodeAt(n));)n--;for(let s=t;s<=n;s++){let a=r.charCodeAt(s);if(a===Nc){if(s===n){s!==e-1&&(i=r.substr(s+1));break}if(a=r.charCodeAt(++s),Pt(Nc,a)){const o=s-1,l=_r(r,o);s=l-1,i+=gf(r.substring(o+1,l))}else a===13&&r.charCodeAt(s+1)===10&&s++}else i+=r[s]}return i}function hT(r){let e="",t=!1;for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i===0){e+="�";continue}if(i<=31||i===127){e+="\\"+i.toString(16),t=!0;continue}i===oT||i===Nc||i===lT||i===cT||i===uT||i===Og?(e+="\\"+r.charAt(n),t=!1):(t&&En(i)&&(e+=" "),e+=r.charAt(n),t=!1)}return"url("+e+")"}const fT="Url",pT={value:String};function Mg(){const r=this.tokenStart;let e;switch(this.tokenType){case De:e=dT(this.consume(De));break;case W:this.cmpStr(this.tokenStart,this.tokenEnd,"url(")||this.error("Function name must be `url`"),this.eat(W),this.skipSC(),e=xg(this.consume(Rt)),this.skipSC(),this.eof||this.eat(ne);break;default:this.error("Url or Function is expected")}return{type:"Url",loc:this.getLocation(r,this.tokenStart),value:e}}function gT(r){this.token(De,hT(r.value))}const mT=Object.freeze(Object.defineProperty({__proto__:null,generate:gT,name:fT,parse:Mg,structure:pT},Symbol.toStringTag,{value:"Module"})),bT="Value",yT={children:[[]]};function qg(){const r=this.tokenStart,e=this.readSequence(this.scope.Value);return{type:"Value",loc:this.getLocation(r,this.tokenStart),children:e}}function vT(r){this.children(r)}const wT=Object.freeze(Object.defineProperty({__proto__:null,generate:vT,name:bT,parse:qg,structure:yT},Symbol.toStringTag,{value:"Module"})),kT=Object.freeze({type:"WhiteSpace",loc:null,value:" "}),ST="WhiteSpace",xT={value:String};function _g(){return this.eat(de),kT}function AT(r){this.token(de,r.value)}const ET=Object.freeze(Object.defineProperty({__proto__:null,generate:AT,name:ST,parse:_g,structure:xT},Symbol.toStringTag,{value:"Module"})),zg=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:Tx,Atrule:Mx,AtrulePrelude:Bx,AttributeSelector:Gx,Block:eA,Brackets:iA,CDC:lA,CDO:hA,ClassSelector:bA,Combinator:AA,Comment:IA,Declaration:VA,DeclarationList:QA,Dimension:eE,Function:sE,Hash:uE,IdSelector:yE,Identifier:pE,MediaFeature:SE,MediaQuery:CE,MediaQueryList:IE,NestingSelector:_E,Nth:PE,Number:HE,Operator:GE,Parentheses:ZE,Percentage:tC,PseudoClassSelector:aC,PseudoElementSelector:dC,Ratio:bC,Raw:SC,Rule:LC,Selector:OC,SelectorList:RC,String:HC,StyleSheet:WC,TypeSelector:eT,UnicodeRange:aT,Url:mT,Value:wT,WhiteSpace:ET},Symbol.toStringTag,{value:"Module"})),CT=Re(V({generic:!0},Sx),{node:zg}),TT=35,LT=42,Rg=43,DT=45,IT=47,NT=117;function Bg(r){switch(this.tokenType){case ae:return this.Hash();case Bt:return this.Operator();case ke:return this.Parentheses(this.readSequence,r.recognizer);case Qe:return this.Brackets(this.readSequence,r.recognizer);case Rt:return this.String();case K:return this.Dimension();case ue:return this.Percentage();case j:return this.Number();case W:return this.cmpStr(this.tokenStart,this.tokenEnd,"url(")?this.Url():this.Function(this.readSequence,r.recognizer);case De:return this.Url();case z:return this.cmpChar(this.tokenStart,NT)&&this.cmpChar(this.tokenStart+1,Rg)?this.UnicodeRange():this.Identifier();case Q:{const e=this.charCodeAt(this.tokenStart);if(e===IT||e===LT||e===Rg||e===DT)return this.Operator();e===TT&&this.error("Hex or identifier is expected",this.tokenStart+1);break}}}const OT={getNode:Bg},MT=35,qT=38,_T=42,zT=43,RT=47,Pg=46,BT=62,PT=124,$T=126;function FT(r,e){e.last!==null&&e.last.type!=="Combinator"&&r!==null&&r.type!=="Combinator"&&e.push({type:"Combinator",loc:null,name:" "})}function jT(){switch(this.tokenType){case Qe:return this.AttributeSelector();case ae:return this.IdSelector();case Ie:return this.lookupType(1)===Ie?this.PseudoElementSelector():this.PseudoClassSelector();case z:return this.TypeSelector();case j:case ue:return this.Percentage();case K:this.charCodeAt(this.tokenStart)===Pg&&this.error("Identifier is expected",this.tokenStart+1);break;case Q:{switch(this.charCodeAt(this.tokenStart)){case zT:case BT:case $T:case RT:return this.Combinator();case Pg:return this.ClassSelector();case _T:case PT:return this.TypeSelector();case MT:return this.IdSelector();case qT:return this.NestingSelector()}break}}}const HT={onWhiteSpace:FT,getNode:jT};function UT(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function VT(){const r=this.createList();if(this.skipSC(),r.push(this.Identifier()),this.skipSC(),this.tokenType===Bt){r.push(this.Operator());const e=this.tokenIndex,t=this.parseCustomProperty?this.Value(null):this.Raw(this.tokenIndex,this.consumeUntilExclamationMarkOrSemicolon,!1);if(t.type==="Value"&&t.children.isEmpty){for(let n=e-this.tokenIndex;n<=0;n++)if(this.lookupType(n)===de){t.children.appendData({type:"WhiteSpace",loc:null,value:" "});break}}r.push(t)}return r}function $g(r){return r!==null&&r.type==="Operator"&&(r.value[r.value.length-1]==="-"||r.value[r.value.length-1]==="+")}const YT={getNode:Bg,onWhiteSpace(r,e){$g(r)&&(r.value=" "+r.value),$g(e.last)&&(e.last.value+=" ")},expression:UT,var:VT},GT=Object.freeze(Object.defineProperty({__proto__:null,AtrulePrelude:OT,Selector:HT,Value:YT},Symbol.toStringTag,{value:"Module"})),KT={parse:{prelude:null,block(){return this.Block(!0)}}},WT={parse:{prelude(){const r=this.createList();switch(this.skipSC(),this.tokenType){case Rt:r.push(this.String());break;case De:case W:r.push(this.Url());break;default:this.error("String or url() is expected")}return(this.lookupNonWSType(0)===z||this.lookupNonWSType(0)===ke)&&r.push(this.MediaQueryList()),r},block:null}},QT={parse:{prelude(){return this.createSingleNodeList(this.MediaQueryList())},block(r=!1){return this.Block(r)}}},ZT={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}},XT={parse:{prelude(){return this.createSingleNodeList(this.SelectorList())},block(){return this.Block(!0)}}};function JT(){return this.createSingleNodeList(this.Raw(this.tokenIndex,null,!1))}function eL(){return this.skipSC(),this.tokenType===z&&this.lookupNonWSType(1)===Ie?this.createSingleNodeList(this.Declaration()):Fg.call(this)}function Fg(){const r=this.createList();let e;this.skipSC();e:for(;!this.eof;){switch(this.tokenType){case Be:case de:this.next();continue;case W:e=this.Function(JT,this.scope.AtrulePrelude);break;case z:e=this.Identifier();break;case ke:e=this.Parentheses(eL,this.scope.AtrulePrelude);break;default:break e}r.push(e)}return r}const tL={parse:{prelude(){const r=Fg.call(this);return this.getFirstListNode(r)===null&&this.error("Condition is expected"),r},block(r=!1){return this.Block(r)}}},nL={"font-face":KT,import:WT,media:QT,nest:ZT,page:XT,supports:tL},er={parse(){return this.createSingleNodeList(this.SelectorList())}},Oc={parse(){return this.createSingleNodeList(this.Selector())}},jg={parse(){return this.createSingleNodeList(this.Identifier())}},qa={parse(){return this.createSingleNodeList(this.Nth())}},rL={dir:jg,has:er,lang:jg,matches:er,is:er,"-moz-any":er,"-webkit-any":er,where:er,not:er,"nth-child":qa,"nth-last-child":qa,"nth-last-of-type":qa,"nth-of-type":qa,slotted:Oc,host:Oc,"host-context":Oc},iL=Object.freeze(Object.defineProperty({__proto__:null,AnPlusB:Op,Atrule:qp,AtrulePrelude:_p,AttributeSelector:Rp,Block:Fp,Brackets:jp,CDC:Hp,CDO:Up,ClassSelector:Vp,Combinator:Gp,Comment:Kp,Declaration:Zp,DeclarationList:Xp,Dimension:Jp,Function:eg,Hash:tg,IdSelector:rg,Identifier:ng,MediaFeature:ig,MediaQuery:sg,MediaQueryList:ag,NestingSelector:og,Nth:lg,Number:cg,Operator:ug,Parentheses:dg,Percentage:hg,PseudoClassSelector:fg,PseudoElementSelector:pg,Ratio:mg,Raw:bg,Rule:vg,Selector:wg,SelectorList:kg,String:Ag,StyleSheet:Cg,TypeSelector:Lg,UnicodeRange:Ng,Url:Mg,Value:qg,WhiteSpace:_g},Symbol.toStringTag,{value:"Module"})),sL={parseContext:{default:"StyleSheet",stylesheet:"StyleSheet",atrule:"Atrule",atrulePrelude(r){return this.AtrulePrelude(r.atrule?String(r.atrule):null)},mediaQueryList:"MediaQueryList",mediaQuery:"MediaQuery",rule:"Rule",selectorList:"SelectorList",selector:"Selector",block(){return this.Block(!0)},declarationList:"DeclarationList",declaration:"Declaration",value:"Value"},scope:GT,atrule:nL,pseudo:rL,node:iL},aL={node:zg},oL=kx(V(V(V({},CT),sL),aL));function Mc(r){const e={};for(const t in r){let n=r[t];n&&(Array.isArray(n)||n instanceof ge?n=n.map(Mc):n.constructor===Object&&(n=Mc(n))),e[t]=n}return e}const{tokenize:BD,parse:lL,generate:cL,lexer:PD,createLexer:$D,walk:tr,find:FD,findLast:jD,findAll:HD,toPlainObject:UD,fromPlainObject:VD,fork:YD}=oL;let uL="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",xt=(r=21)=>{let e="",t=r;for(;t--;)e+=uL[Math.random()*64|0];return e};function nr(r){return lL(r,{parseAtrulePrelude:!1,parseCustomProperty:!0})}function Xe(r){return cL(r,{mode:"spec"})}function Hg(r){return r.type==="Declaration"}function dL(r){return r.value.children.first.name}const qc={"position-anchor":`--position-anchor-${xt(12)}`,"anchor-scope":`--anchor-scope-${xt(12)}`,"anchor-name":`--anchor-name-${xt(12)}`};function hL(r,e){return Hg(r)&&qc[r.property]&&e?(e.children.appendData(Re(V({},r),{property:qc[r.property]})),{updated:!0}):{}}function fL(r){for(const e of r){let t=!1;const n=nr(e.css);tr(n,{visit:"Declaration",enter(i){var s;const a=(s=this.rule)==null?void 0:s.block,{updated:o}=hL(i,a);o&&(t=!0)}}),t&&(e.css=Xe(n),e.changed=!0)}return r.some(e=>e.changed===!0)}var Ug=(r=>(r.All="all",r.None="none",r))(Ug||{});function jt(r,e){var t;return e=(t=qc[e])!=null?t:e,(r instanceof HTMLElement?getComputedStyle(r):r.computedStyle).getPropertyValue(e).trim()}function Hr(r,e,t){return jt(r,e)===t}function pL(r,{selector:e,pseudoElementPart:t}){const n=getComputedStyle(r,t),i=document.createElement("div"),s=document.createElement("style");i.id=`fake-pseudo-element-${xt()}`;for(const o of Array.from(n)){const l=n.getPropertyValue(o);i.style.setProperty(o,l)}s.textContent+=`#${i.id}${t} { content: ${n.content}; }`,s.textContent+=`${e} { display: none !important; }`,document.head.append(s);const a=t==="::before"?"afterbegin":"beforeend";return r.insertAdjacentElement(a,i),{fakePseudoElement:i,sheet:s,computedStyle:n}}function gL(r){let e=r;for(;e;){if(Hr(e,"overflow","scroll"))return e;e=e.parentElement}return e}function mL(r){let e=gL(r);return e===document.documentElement&&(e=null),e??{scrollTop:0,scrollLeft:0}}function bL(r){const{elementPart:e,pseudoElementPart:t}=r,n=[];if(t&&!(t==="::before"||t==="::after"))return n;const i=Array.from(document.querySelectorAll(e));if(!t)return n.push(...i),n;for(const s of i){const{fakePseudoElement:a,sheet:o,computedStyle:l}=pL(s,r),c=a.getBoundingClientRect(),{scrollY:d,scrollX:f}=globalThis,h=mL(s);n.push({fakePseudoElement:a,computedStyle:l,removeFakePseudoElement(){a.remove(),o.remove()},contextElement:s,getBoundingClientRect(){const{scrollY:g,scrollX:m}=globalThis,{scrollTop:y,scrollLeft:k}=h;return DOMRect.fromRect({y:c.y+(d-g)+(h.scrollTop-y),x:c.x+(f-m)+(h.scrollLeft-k),width:c.width,height:c.height})}})}return n}function yL(r,e){const t=jt(r,"anchor-name");return e?t.split(",").map(n=>n.trim()).includes(e):!t}function vL(r,e){const t=jt(r,"anchor-scope");return t===e||t==="all"}function wL(r){return!!((r.type==="text/css"||r.rel==="stylesheet")&&r.href)}function kL(r){const e=new URL(r.href,document.baseURI);if(wL(r)&&e.origin===location.origin)return e}function SL(r){return fe(this,null,function*(){return Promise.all(r.map(e=>fe(this,null,function*(){if(!e.url)return e;const t=yield(yield fetch(e.url.toString())).text();return Re(V({},e),{css:t})})))})}function xL(){const r=document.querySelectorAll('[style*="anchor"]'),e=[];return r.forEach(t=>{const n=xt(12),i="data-has-inline-styles";t.setAttribute(i,n);const s=t.getAttribute("style"),a=`[${i}="${n}"] { ${s} }`;e.push({el:t,css:a})}),e}function AL(){return fe(this,null,function*(){const r=document.querySelectorAll("link, style"),e=[];r.forEach(n=>{if(n.tagName.toLowerCase()==="link"){const i=kL(n);i&&e.push({el:n,url:i})}n.tagName.toLowerCase()==="style"&&e.push({el:n,css:n.innerHTML})});const t=xL();return yield SL([...e,...t])})}function EL(r,e){return!r||r===e?!1:Vg(r)?r.document.contains(e):r.contains(e)}function Vg(r){return!!(r&&r===r.window)}function CL(r){return Hr(r,"position","fixed")}function _c(r){return!!(r&&(CL(r)||Hr(r,"position","absolute")))}function Yg(r,e){return r.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING}function TL(r){return fe(this,null,function*(){return yield it.getOffsetParent(r)})}function zc(r){return fe(this,null,function*(){if(!["absolute","fixed"].includes(jt(r,"position")))return yield TL(r);let e=r.parentElement;for(;e;){if(!Hr(e,"position","static")&&Hr(e,"display","block"))return e;e=e.parentElement}return window})}function LL(r,e,t,n){return fe(this,null,function*(){const i=yield zc(r),s=yield zc(t);if(!(EL(s,r)||Vg(s))||i===s&&!(!_c(r)||Yg(r,t)))return!1;if(i!==s){let a;const o=[];for(a=i;a&&a!==s&&a!==window;)o.push(a),a=yield zc(a);const l=o[o.length-1];if(l instanceof HTMLElement&&!(!_c(l)||Yg(l,t)))return!1}{let a=r.parentElement;for(;a;){if(Hr(a,"content-visibility","hidden"))return!1;a=a.parentElement}}return!(e&&n&&Gg(r,e,n)!==Gg(t,e,n))})}function Gg(r,e,t){for(;!(r.matches(t)&&vL(r,e));){if(!r.parentElement)return null;r=r.parentElement}return r}function Kg(r,e,t,n){return fe(this,null,function*(){if(!(r instanceof HTMLElement&&t.length&&_c(r)))return null;const i=t.flatMap(bL).filter(a=>yL(a,e)),s=n.map(a=>a.selector).join(",")||null;for(let a=i.length-1;a>=0;a--){const o=i[a],l="fakePseudoElement"in o;if(yield LL(l?o.fakePseudoElement:o,e,r,s))return l&&o.removeFakePseudoElement(),o}return null})}const DL=["left","right","top","bottom","inset-block-start","inset-block-end","inset-inline-start","inset-inline-end","inset-block","inset-inline","inset"],IL=["width","height","min-width","min-height","max-width","max-height"],NL=["justify-content","align-content","justify-self","align-self","justify-items","align-items"],OL=["top","left","right","bottom","start","end","self-start","self-end","center"],ML=["width","height","block","inline","self-block","self-inline"];function qL(r){return r.type==="Declaration"&&r.property==="anchor-name"}function _L(r){return r.type==="Declaration"&&r.property==="anchor-scope"}function Wg(r){return!!(r&&r.type==="Function"&&r.name==="anchor")}function Qg(r){return!!(r&&r.type==="Function"&&r.name==="anchor-size")}function _a(r){return!!(r&&r.type==="Function"&&r.name==="var")}function zL(r){return r.type==="Declaration"&&r.property==="position-fallback"}function RL(r){return r.type==="Atrule"&&r.name==="position-fallback"}function BL(r){return r.type==="Atrule"&&r.name==="try"}function Rc(r){return!!(r.type==="Identifier"&&r.name)}function PL(r){return!!(r.type==="Percentage"&&r.value)}function Pi(r){return DL.includes(r)}function $L(r){return OL.includes(r)}function za(r){return IL.includes(r)}function FL(r){return ML.includes(r)}function jL(r){return NL.includes(r)}function Zg(r,e){let t,n,i,s="",a=!1,o;const l=[];r.children.toArray().forEach(h=>{if(a){s=`${s}${Xe(h)}`;return}if(h.type==="Operator"&&h.value===","){a=!0;return}l.push(h)});let[c,d]=l;if(d||(d=c,c=void 0),c&&(Rc(c)?c.name==="implicit"?c=void 0:c.name.startsWith("--")&&(t=c.name):_a(c)&&c.children.first&&(o=c.children.first.name)),d)if(Wg(r)){if(Rc(d)&&$L(d.name))n=d.name;else if(PL(d)){const h=Number(d.value);n=Number.isNaN(h)?void 0:h}}else Qg(r)&&Rc(d)&&FL(d.name)&&(i=d.name);const f=`--anchor-${xt(12)}`;return Object.assign(r,{type:"Raw",value:`var(${f})`,children:null}),Reflect.deleteProperty(r,"name"),{anchorName:t,anchorSide:n,anchorSize:i,fallbackValue:s||"0px",customPropName:o,uuid:f}}function Xg(r){return r.value.children.map(({name:e})=>e)}function Bc(r){return r?r.children.map(e=>{var t;let n;((t=e.children.last)==null?void 0:t.type)==="PseudoElementSelector"&&(e=Mc(e),n=Xe(e.children.last),e.children.pop());const i=Xe(e);return{selector:i+(n??""),elementPart:i,pseudoElementPart:n}}).toArray():[]}let $i={},rr={},ir={},Fi={},sr={};function HL(){$i={},rr={},ir={},Fi={},sr={}}function UL(r,e){var t;if((Wg(r)||Qg(r))&&e){if(e.property.startsWith("--")){const n=Xe(e.value),i=Zg(r);return Fi[i.uuid]=n,ir[e.property]=[...(t=ir[e.property])!=null?t:[],i],{changed:!0}}if(Pi(e.property)||za(e.property)){const n=Zg(r);return{prop:e.property,data:n,changed:!0}}}return{}}function VL(r){return zL(r)&&r.value.children.first?dL(r):null}function YL(r){var e,t;if(RL(r)&&(e=r.prelude)!=null&&e.value&&(t=r.block)!=null&&t.children){const n=r.prelude.value,i=[];return r.block.children.filter(BL).forEach(s=>{var a;if((a=s.block)!=null&&a.children){const o=s.block.children.filter(c=>Hg(c)&&(Pi(c.property)||za(c.property)||jL(c.property))),l={uuid:`${n}-try-${xt(12)}`,declarations:Object.fromEntries(o.map(c=>[c.property,Xe(c.value)]))};i.push(l)}}),{name:n,blocks:i}}return{}}function GL(r,e){return fe(this,null,function*(){let t=e.anchorName;const n=e.customPropName;if(r&&!t){const o=r.getAttribute("anchor"),l=jt(r,"position-anchor");if(l)t=l;else if(n)t=jt(r,n);else if(o){const c=`#${CSS.escape(o)}`;return yield Kg(r,null,[{selector:c,elementPart:c}],[])}}const i=t?$i[t]||[]:[],s=t?rr[Ug.All]||[]:[],a=t?rr[t]||[]:[];return yield Kg(r,t||null,i,[...s,...a])})}function KL(r){return fe(this,null,function*(){var e,t,n,i,s,a;const o={},l={},c={},d={};HL();for(const y of r){const k=nr(y.css);tr(k,{visit:"Atrule",enter(w){const{name:x,blocks:E}=YL(w);x&&E!=null&&E.length&&(c[x]={targets:[],blocks:E})}})}for(const y of r){let k=!1;const w=nr(y.css);tr(w,{visit:"Declaration",enter(x){var E,C;const I=(E=this.rule)==null?void 0:E.prelude,M=Bc(I),O=VL(x);if(O&&M.length&&c[O]){for(const{selector:S}of M)d[S]={fallbacks:c[O].blocks},c[O].targets.includes(S)||c[O].targets.push(S);for(const S of c[O].blocks){const A=`[data-anchor-polyfill="${S.uuid}"]`;(C=this.stylesheet)==null||C.children.prependData({type:"Rule",prelude:{type:"Raw",value:A},block:{type:"Block",children:new ge().fromArray(Object.entries(S.declarations).map(([_,N])=>({type:"Declaration",important:!0,property:_,value:{type:"Raw",value:N}})))}}),l[A]=M.map(({selector:_})=>_).join(", ")}k=!0}}}),k&&(y.css=Xe(w),y.changed=!0)}for(const y of r){let k=!1;const w=nr(y.css);tr(w,function(x){var E,C,I;const M=(E=this.rule)==null?void 0:E.prelude,O=Bc(M);if(qL(x)&&O.length)for(const N of Xg(x))$i[N]!=null||($i[N]=[]),$i[N].push(...O);if(_L(x)&&O.length)for(const N of Xg(x))rr[N]!=null||(rr[N]=[]),rr[N].push(...O);const{prop:S,data:A,changed:_}=UL(x,this.declaration);if(S&&A&&O.length)for(const{selector:N}of O)o[N]=Re(V({},o[N]),{[S]:[...(I=(C=o[N])==null?void 0:C[S])!=null?I:[],A]});_&&(k=!0)}),k&&(y.css=Xe(w),y.changed=!0)}const f=new Set(Object.keys(ir)),h={},g=y=>{var k,w,x,E,C;const I=[],M=new Set((w=(k=h[y])==null?void 0:k.names)!=null?w:[]);for(;M.size>0;)for(const O of M)I.push(...(x=ir[O])!=null?x:[]),M.delete(O),(C=(E=h[O])==null?void 0:E.names)!=null&&C.length&&h[O].names.forEach(S=>M.add(S));return I};for(;f.size>0;){const y=[];for(const k of r){let w=!1;const x=nr(k.css);tr(x,{visit:"Function",enter(E){var C,I;const M=(C=this.rule)==null?void 0:C.prelude,O=this.declaration,S=O==null?void 0:O.property;if((M==null?void 0:M.children.isEmpty)===!1&&_a(E)&&O&&S&&E.children.first&&f.has(E.children.first.name)&&S.startsWith("--")){const A=E.children.first,_=(I=ir[A.name])!=null?I:[],N=g(A.name);if(!(_.length||N.length))return;const G=`${A.name}-anchor-${xt(12)}`,me=Xe(O.value);Fi[G]=me,h[S]||(h[S]={names:[],uuids:[]});const le=h[S];le.names.includes(A.name)||le.names.push(A.name),le.uuids.push(G),y.push(S),A.name=G,w=!0}}}),w&&(k.css=Xe(x),k.changed=!0)}f.clear(),y.forEach(k=>f.add(k))}for(const y of r){let k=!1;const w=nr(y.css);tr(w,{visit:"Function",enter(x){var E,C,I,M,O,S,A;const _=(E=this.rule)==null?void 0:E.prelude,N=this.declaration,G=N==null?void 0:N.property;if((_==null?void 0:_.children.isEmpty)===!1&&_a(x)&&N&&G&&x.children.first&&(Pi(G)||za(G))){const me=x.children.first,le=(C=ir[me.name])!=null?C:[],Je=g(me.name);if(!(le.length||Je.length))return;const Ue=`${G}-${xt(12)}`;if(Je.length){const Ut=new Set([me.name]);for(;Ut.size>0;)for(const Vt of Ut){const Y=h[Vt];if((I=Y==null?void 0:Y.names)!=null&&I.length&&(M=Y==null?void 0:Y.uuids)!=null&&M.length)for(const Yt of Y.names)for(const Gt of Y.uuids)sr[Gt]=Re(V({},sr[Gt]),{[Ue]:`${Yt}-${Ue}`});Ut.delete(Vt),(O=Y==null?void 0:Y.names)!=null&&O.length&&Y.names.forEach(Yt=>Ut.add(Yt))}}const Ui=Bc(_);for(const Ut of[...le,...Je]){const Vt=V({},Ut),Y=`--anchor-${xt(12)}-${G}`,Yt=Vt.uuid;Vt.uuid=Y;for(const{selector:Gt}of Ui)o[Gt]=Re(V({},o[Gt]),{[G]:[...(A=(S=o[Gt])==null?void 0:S[G])!=null?A:[],Vt]});sr[Yt]=Re(V({},sr[Yt]),{[Ue]:Y})}me.name=`${me.name}-${Ue}`,k=!0}}}),k&&(y.css=Xe(w),y.changed=!0)}if(Object.keys(sr).length>0)for(const y of r){let k=!1;const w=nr(y.css);tr(w,{visit:"Function",enter(x){var E,C,I,M;if(_a(x)&&(C=(E=x.children.first)==null?void 0:E.name)!=null&&C.startsWith("--")&&(M=(I=this.declaration)==null?void 0:I.property)!=null&&M.startsWith("--")&&this.block){const O=x.children.first,S=sr[O.name];if(S)for(const[A,_]of Object.entries(S))this.block.children.appendData({type:"Declaration",important:!1,property:`${this.declaration.property}-${A}`,value:{type:"Raw",value:Xe(this.declaration.value).replace(`var(${O.name})`,`var(${_})`)}}),k=!0;Fi[O.name]&&(this.declaration.value={type:"Raw",value:Fi[O.name]},k=!0)}}}),k&&(y.css=Xe(w),y.changed=!0)}const m=new Map;for(const[y,k]of Object.entries(o)){let w;y.startsWith("[data-anchor-polyfill=")&&l[y]?w=document.querySelectorAll(l[y]):w=document.querySelectorAll(y);for(const[x,E]of Object.entries(k))for(const C of E)for(const I of w){const M=yield GL(I,C),O=`--anchor-${xt(12)}`;m.set(I,Re(V({},(e=m.get(I))!=null?e:{}),{[C.uuid]:O})),I.setAttribute("style",`${C.uuid}: var(${O}); ${(t=I.getAttribute("style"))!=null?t:""}`),d[y]=Re(V({},d[y]),{declarations:Re(V({},(n=d[y])==null?void 0:n.declarations),{[x]:[...(a=(s=(i=d[y])==null?void 0:i.declarations)==null?void 0:s[x])!=null?a:[],Re(V({},C),{anchorEl:M,targetEl:I,uuid:O})]})})}}return{rules:d,inlineStyles:m,anchorScopes:rr}})}function Jg(r,e,t=!1){return fe(this,null,function*(){const n=[];for(const{el:i,css:s,changed:a}of r){const o={el:i,css:s,changed:!1};if(a){if(i.tagName.toLowerCase()==="style")i.innerHTML=s;else if(i.tagName.toLowerCase()==="link"){const l=new Blob([s],{type:"text/css"}),c=URL.createObjectURL(l),d=document.createElement("link");d.rel="stylesheet",d.href=c;const f=new Promise(h=>{d.onload=h});i.replaceWith(d),yield f,URL.revokeObjectURL(c),o.el=d}else if(i.hasAttribute("data-has-inline-styles")){const l=i.getAttribute("data-has-inline-styles");if(l){const c=`[data-has-inline-styles="${l}"]{`;let d=s.slice(c.length,-1);const f=e==null?void 0:e.get(i);if(f)for(const[h,g]of Object.entries(f))d=`${h}: var(${g}); ${d}`;i.setAttribute("style",d)}}}t&&i.hasAttribute("data-has-inline-styles")&&i.removeAttribute("data-has-inline-styles"),n.push(o)}return n})}const WL=Re(V({},it),{_c:new Map}),em=r=>fe(void 0,null,function*(){var e,t,n;let i=yield(e=it.getOffsetParent)==null?void 0:e.call(it,r);return(yield(t=it.isElement)==null?void 0:t.call(it,i))||(i=(yield(n=it.getDocumentElement)==null?void 0:n.call(it,r))||window.document.documentElement),i}),QL=(r,e)=>{let t;switch(r){case"start":case"self-start":t=0;break;case"end":case"self-end":t=100;break;default:typeof r=="number"&&!Number.isNaN(r)&&(t=r)}if(t!==void 0)return e?100-t:t},ZL=(r,e)=>{let t;switch(r){case"block":case"self-block":t=e?"width":"height";break;case"inline":case"self-inline":t=e?"height":"width";break}return t},tm=r=>{switch(r){case"top":case"bottom":return"y";case"left":case"right":return"x"}return null},XL=r=>{switch(r){case"x":return"width";case"y":return"height"}return null},nm=r=>jt(r,"display")==="inline",rm=(r,e)=>(e==="x"?["border-left-width","border-right-width"]:["border-top-width","border-bottom-width"]).reduce((t,n)=>t+parseInt(jt(r,n),10),0)||0,Ra=(r,e)=>parseInt(jt(r,`margin-${e}`),10)||0,JL=r=>({top:Ra(r,"top"),right:Ra(r,"right"),bottom:Ra(r,"bottom"),left:Ra(r,"left")}),im=r=>fe(void 0,[r],function*({targetEl:e,targetProperty:t,anchorRect:n,anchorSide:i,anchorSize:s,fallback:a}){var o;if(!((s||i!==void 0)&&e&&n))return a;if(s){if(!za(t))return a;let l;switch(s){case"width":case"height":l=s;break;default:{let c=!1;const d=jt(e,"writing-mode");c=d.startsWith("vertical-")||d.startsWith("sideways-"),l=ZL(s,c)}}return l?`${n[l]}px`:a}if(i!==void 0){let l,c;const d=tm(t);if(!(Pi(t)&&d&&(!Pi(i)||d===tm(i))))return a;switch(i){case"left":l=0;break;case"right":l=100;break;case"top":l=0;break;case"bottom":l=100;break;case"center":l=50;break;default:if(e){const g=(yield(o=it.isRTL)==null?void 0:o.call(it,e))||!1;l=QL(i,g)}}const f=typeof l=="number"&&!Number.isNaN(l),h=XL(d);if(f&&h){(t==="bottom"||t==="right")&&(c=yield em(e));let g=n[d]+n[h]*(l/100);switch(t){case"bottom":{if(!c)break;let m=c.clientHeight;if(m===0&&nm(c)){const y=rm(c,d);m=c.offsetHeight-y}g=m-g;break}case"right":{if(!c)break;let m=c.clientWidth;if(m===0&&nm(c)){const y=rm(c,d);m=c.offsetWidth-y}g=m-g;break}}return`${g}px`}}return a});function eD(r,e=!1){return fe(this,null,function*(){const t=document.documentElement;for(const[n,i]of Object.entries(r))for(const s of i){const a=s.anchorEl,o=s.targetEl;if(a&&o)uf(a,o,()=>fe(this,null,function*(){const l=yield it.getElementRects({reference:a,floating:o,strategy:"absolute"}),c=yield im({targetEl:o,targetProperty:n,anchorRect:l.reference,anchorSide:s.anchorSide,anchorSize:s.anchorSize,fallback:s.fallbackValue});t.style.setProperty(s.uuid,c)}),{animationFrame:e});else{const l=yield im({targetProperty:n,anchorSide:s.anchorSide,anchorSize:s.anchorSize,fallback:s.fallbackValue});t.style.setProperty(s.uuid,l)}}})}function tD(r,e,t=!1){return fe(this,null,function*(){if(!e.length)return;const n=document.querySelectorAll(r);for(const i of n){let s=!1;const a=yield em(i);uf(i,i,()=>fe(this,null,function*(){if(!s){s=!0;for(const[o,{uuid:l}]of e.entries()){if(i.setAttribute("data-anchor-polyfill",l),o===e.length-1){s=!1;break}const c=yield it.getElementRects({reference:i,floating:i,strategy:"absolute"}),d=yield lk({x:i.offsetLeft,y:i.offsetTop,platform:WL,rects:c,elements:{floating:i},strategy:"absolute"},{boundary:a,rootBoundary:"document",padding:JL(i)});if(Object.values(d).every(f=>f<=0)){s=!1;break}}}}),{animationFrame:t})}})}function nD(r,e=!1){return fe(this,null,function*(){var t,n;for(const i of Object.values(r))yield eD((t=i.declarations)!=null?t:{},e);for(const[i,s]of Object.entries(r))yield tD(i,(n=s.fallbacks)!=null?n:[],e)})}function rD(r){return fe(this,null,function*(){const e=!!window.UPDATE_ANCHOR_ON_ANIMATION_FRAME;let t=yield AL();(yield fL(t))&&(t=yield Jg(t));const{rules:n,inlineStyles:i}=yield KL(t);return Object.values(n).length&&(yield Jg(t,i,!0),yield nD(n,e)),n})}function Pc(){console.log("[Keys UI] Starting initialization..."),"anchorName"in document.documentElement.style||rD(),ea.initialize(),us.getInstance().init(),ds.getInstance().init(),hs.getInstance().init(),ho.getInstance().init(),fs.getInstance().init(),ps.getInstance().init(),gs.getInstance().init(),go.getInstance().init(),ms.getInstance().init(),On.getInstance().init(),bs.getInstance().init(),ys.getInstance().init(),vs.getInstance().init(),Mn.getInstance().init(),ws.getInstance().init(),qn.getInstance().init(),_n.getInstance().init(),ks.getInstance().init(),Rn.getInstance().init(),Ss.getInstance().init(),bo.getInstance().init(),yo.getInstance().init(),console.log("[Keys UI] Initializing LightboxActions..."),ri.getInstance().init(),vo.getInstance().init(),xs.getInstance().init(),Mu.getInstance().init(),As.getInstance().init(),mo.getInstance().init(),console.log("[Keys UI] Initialization complete!")}const $c={FormActions:us.getInstance(),TextareaActions:ds.getInstance(),AlertActions:hs.getInstance(),AvatarActions:ho.getInstance(),BadgeActions:fs.getInstance(),BadgeGroupActions:ps.getInstance(),ButtonActions:gs.getInstance(),CalendarCore:go.getInstance(),RadioActions:ms.getInstance(),RangeActions:On.getInstance(),SelectActions:bs.getInstance(),TabsActions:ys.getInstance(),ModalActions:vs.getInstance(),ToastActions:Mn.getInstance(),DropdownActions:ws.getInstance(),TableActions:qn.getInstance(),TimePickerActions:_n.getInstance(),EditorActions:ks.getInstance(),DatePickerActions:Rn.getInstance(),AddToCartActions:Ss.getInstance(),GalleryActions:bo.getInstance(),ImageActions:yo.getInstance(),LightboxActions:ri.getInstance(),ChartActions:vo.getInstance(),PopoverActions:xs.getInstance(),SidebarActions:As.getInstance(),Quill:D,init:Pc,initialize:Pc};typeof window<"u"&&(window.KeysUI=$c,window.Quill=D,window.manualSyncEditor=()=>$c.EditorActions.manualSync()),$.AddToCartActions=Ss,$.AlertActions=hs,$.AvatarActions=ho,$.BadgeActions=fs,$.BadgeGroupActions=ps,$.BaseActionClass=H,$.ButtonActions=gs,$.CalendarCore=go,$.ChartActions=vo,$.ColorPickerActions=Mu,$.DOMUtils=b,$.DatePickerActions=Rn,$.DropdownActions=ws,$.EditorActions=ks,$.EventUtils=T,$.FormActions=us,$.GalleryActions=bo,$.ImageActions=yo,$.LightboxActions=ri,$.ModalActions=vs,$.PopoverActions=xs,$.RTLUtils=ea,$.RadioActions=ms,$.RangeActions=On,$.RatingActions=mo,$.SelectActions=bs,$.SidebarActions=As,$.TableActions=qn,$.TabsActions=ys,$.TextareaActions=ds,$.TimePickerActions=_n,$.ToastActions=Mn,$.default=$c,$.initializeKeysUI=Pc,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
